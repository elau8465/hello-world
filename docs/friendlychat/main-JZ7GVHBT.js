var Sx=Object.defineProperty,Rx=Object.defineProperties;var Mx=Object.getOwnPropertyDescriptors;var fE=Object.getOwnPropertySymbols,Nx=Object.getPrototypeOf,xx=Object.prototype.hasOwnProperty,Px=Object.prototype.propertyIsEnumerable,kx=Reflect.get;var pE=(t,e,n)=>e in t?Sx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})xx.call(e,n)&&pE(t,n,e[n]);if(fE)for(var n of fE(e))Px.call(e,n)&&pE(t,n,e[n]);return t},Te=(t,e)=>Rx(t,Mx(e));var br=(t,e,n)=>kx(Nx(t),n,e);var y=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var gE=null;var Mf=1,Nf=Symbol("SIGNAL");function ae(t){let e=gE;return gE=t,e}var mE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ox(t){if(!(kf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Mf)){if(!t.producerMustRecompute(t)&&!xf(t)){t.dirty=!1,t.lastCleanEpoch=Mf;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Mf}}function yE(t){return t&&(t.nextProducerIndex=0),ae(t)}function vE(t,e){if(ae(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(kf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Pf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function xf(t){_u(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Ox(n),r!==n.version))return!0}return!1}function _E(t){if(_u(t),kf(t))for(let e=0;e<t.producerNode.length;e++)Pf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Pf(t,e){if(Fx(t),_u(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Pf(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];_u(i),i.producerIndexOfThis[r]=e}}function kf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _u(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Fx(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Lx(){throw new Error}var Vx=Lx;function wE(t){Vx=t}function ee(t){return typeof t=="function"}function fs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wu=fs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ci(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(s){e=s instanceof wu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{IE(s)}catch(o){e=e??[],o instanceof wu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)IE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ci(n,e)}remove(e){let{_finalizers:n}=this;n&&ci(n,e),e instanceof t&&e._removeParent(this)}};Ve.EMPTY=(()=>{let t=new Ve;return t.closed=!0,t})();var Of=Ve.EMPTY;function Iu(t){return t instanceof Ve||t&&"closed"in t&&ee(t.remove)&&ee(t.add)&&ee(t.unsubscribe)}function IE(t){ee(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ps={setTimeout(t,e,...n){let{delegate:r}=ps;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ps;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Eu(t){ps.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function sa(){}var EE=Ff("C",void 0,void 0);function TE(t){return Ff("E",void 0,t)}function bE(t){return Ff("N",t,void 0)}function Ff(t,e,n){return{kind:t,value:e,error:n}}var ui=null;function gs(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!ui;if(e&&(ui={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ui;if(ui=null,n)throw r}}else t()}function DE(t){on.useDeprecatedSynchronousErrorHandling&&ui&&(ui.errorThrown=!0,ui.error=t)}var li=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Iu(e)&&e.add(this)):this.destination=Bx}static create(e,n,r){return new ms(e,n,r)}next(e){this.isStopped?Vf(bE(e),this):this._next(e)}error(e){this.isStopped?Vf(TE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vf(EE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ux=Function.prototype.bind;function Lf(t,e){return Ux.call(t,e)}var Uf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Tu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Tu(r)}else Tu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Tu(n)}}},ms=class extends li{constructor(e,n,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&on.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Lf(e.next,s),error:e.error&&Lf(e.error,s),complete:e.complete&&Lf(e.complete,s)}):i=e}this.destination=new Uf(i)}};function Tu(t){on.useDeprecatedSynchronousErrorHandling?DE(t):Eu(t)}function jx(t){throw t}function Vf(t,e){let{onStoppedNotification:n}=on;n&&ps.setTimeout(()=>n(t,e))}var Bx={closed:!0,next:sa,error:jx,complete:sa};var ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(t){return t}function di(...t){return jf(t)}function jf(t){return t.length===0?Lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=Hx(n)?n:new ms(n,r,i);return gs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=CE(r),new r((i,s)=>{let o=new ms({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ys](){return this}pipe(...n){return jf(n)(this)}toPromise(n){return n=CE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function CE(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function $x(t){return t&&ee(t.next)&&ee(t.error)&&ee(t.complete)}function Hx(t){return t&&t instanceof li||$x(t)&&Iu(t)}function Bf(t){return ee(t?.lift)}function fe(t){return e=>{if(Bf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new $f(t,e,n,r,i)}var $f=class extends li{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function vs(){return fe((t,e)=>{let n=null;t._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _s=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Bf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let n=this.getSubject();e.add(this.source.subscribe(le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return vs()(this)}};var AE=fs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var _t=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new AE}next(n){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Of:(this.currentObservers=null,s.push(n),new Ve(()=>{this.currentObservers=null,ci(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new bu(e,n),t})(),bu=class extends _t{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Of}};var nt=class extends _t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Hf={now(){return(Hf.delegate||Date).now()},delegate:void 0};var Du=class extends Ve{constructor(e,n){super()}schedule(e,n=0){return this}};var oa={setInterval(t,e,...n){let{delegate:r}=oa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=oa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ws=class extends Du{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return oa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&oa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ci(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Is=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Is.now=Hf.now;var Es=class extends Is{constructor(e,n=Is.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var qf=new Es(ws);var Cu=class extends ws{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Au=class extends Es{};var zf=new Au(Cu);var Vt=new ie(t=>t.complete());function SE(t){return t&&ee(t.schedule)}function RE(t){return t[t.length-1]}function Su(t){return ee(RE(t))?t.pop():void 0}function Dr(t){return SE(RE(t))?t.pop():void 0}function Ru(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function NE(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function ME(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function xE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(C){return Promise.resolve(C).then(_,p)}}function a(_,C){r[_]&&(i[_]=function(M){return new Promise(function(R,k){s.push([_,M,R,k])>1||u(_,M)})},C&&(i[_]=C(i[_])))}function u(_,C){try{l(r[_](C))}catch(M){m(s[0][3],M)}}function l(_){_.value instanceof hi?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,C){_(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function PE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ME=="function"?ME(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Mu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Nu(t){return ee(t?.then)}function xu(t){return ee(t[ys])}function Pu(t){return Symbol.asyncIterator&&ee(t?.[Symbol.asyncIterator])}function ku(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ou=qx();function Fu(t){return ee(t?.[Ou])}function Lu(t){return xE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield hi(n.read());if(i)return yield hi(void 0);yield yield hi(r)}}finally{n.releaseLock()}})}function Vu(t){return ee(t?.getReader)}function je(t){if(t instanceof ie)return t;if(t!=null){if(xu(t))return zx(t);if(Mu(t))return Gx(t);if(Nu(t))return Wx(t);if(Pu(t))return kE(t);if(Fu(t))return Kx(t);if(Vu(t))return Qx(t)}throw ku(t)}function zx(t){return new ie(e=>{let n=t[ys]();if(ee(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gx(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Wx(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Eu)})}function Kx(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function kE(t){return new ie(e=>{Yx(t,e).catch(n=>e.error(n))})}function Qx(t){return kE(Lu(t))}function Yx(t,e){var n,r,i,s;return NE(this,void 0,void 0,function*(){try{for(n=PE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function At(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Cr(t,e=0){return fe((n,r)=>{n.subscribe(le(r,i=>At(r,t,()=>r.next(i),e),()=>At(r,t,()=>r.complete(),e),i=>At(r,t,()=>r.error(i),e)))})}function Ar(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function OE(t,e){return je(t).pipe(Ar(e),Cr(e))}function FE(t,e){return je(t).pipe(Ar(e),Cr(e))}function LE(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function VE(t,e){return new ie(n=>{let r;return At(n,e,()=>{r=t[Ou](),At(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Uu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{At(n,e,()=>{let r=t[Symbol.asyncIterator]();At(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function UE(t,e){return Uu(Lu(t),e)}function jE(t,e){if(t!=null){if(xu(t))return OE(t,e);if(Mu(t))return LE(t,e);if(Nu(t))return FE(t,e);if(Pu(t))return Uu(t,e);if(Fu(t))return VE(t,e);if(Vu(t))return UE(t,e)}throw ku(t)}function Me(t,e){return e?jE(t,e):je(t)}function G(...t){let e=Dr(t);return Me(t,e)}function Ts(t,e){let n=ee(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function Gf(t){return!!t&&(t instanceof ie||ee(t.lift)&&ee(t.subscribe))}var Kn=fs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(t,e){return fe((n,r)=>{let i=0;n.subscribe(le(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:Jx}=Array;function Zx(t,e){return Jx(e)?t(...e):t(e)}function ju(t){return Z(e=>Zx(t,e))}var{isArray:Xx}=Array,{getPrototypeOf:eP,prototype:tP,keys:nP}=Object;function Bu(t){if(t.length===1){let e=t[0];if(Xx(e))return{args:e,keys:null};if(rP(e)){let n=nP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rP(t){return t&&typeof t=="object"&&eP(t)===tP}function $u(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function aa(...t){let e=Dr(t),n=Su(t),{args:r,keys:i}=Bu(t);if(r.length===0)return Me([],e);let s=new ie(iP(r,e,i?o=>$u(i,o):Lt));return n?s.pipe(ju(n)):s}function iP(t,e,n=Lt){return r=>{BE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)BE(e,()=>{let l=Me(t[u],e),h=!1;l.subscribe(le(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function BE(t,e,n){t?At(n,t,e):e()}function $E(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},_=M=>l<r?C(M):u.push(M),C=M=>{s&&e.next(M),l++;let R=!1;je(n(M,h++)).subscribe(le(e,k=>{i?.(k),s?_(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?At(e,o,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(le(e,_,()=>{p=!0,m()})),()=>{a?.()}}function Be(t,e,n=1/0){return ee(e)?Be((r,i)=>Z((s,o)=>e(r,s,i,o))(je(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>$E(r,i,t,n)))}function bs(t=1/0){return Be(Lt,t)}function HE(){return bs(1)}function Ds(...t){return HE()(Me(t,Dr(t)))}function Hu(t){return new ie(e=>{je(t()).subscribe(e)})}function Wf(...t){let e=Su(t),{args:n,keys:r}=Bu(t),i=new ie(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;je(n[h]).subscribe(le(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?$u(r,a):a),s.complete())}))}});return e?i.pipe(ju(e)):i}function Ut(t,e){return fe((n,r)=>{let i=0;n.subscribe(le(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Sr(t){return fe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(le(n,void 0,void 0,o=>{s=je(t(o,Sr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function qE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(le(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function fi(t,e){return ee(e)?Be(t,e,1):Be(t,1)}function Rr(t){return fe((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function an(t){return t<=0?()=>Vt:fe((e,n)=>{let r=0;e.subscribe(le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Kf(t){return Z(()=>t)}function qu(t=sP){return fe((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sP(){return new Kn}function ca(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function wn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ut((i,s)=>t(i,s,r)):Lt,an(1),n?Rr(e):qu(()=>new Kn))}function Cs(t){return t<=0?()=>Vt:fe((e,n)=>{let r=[];e.subscribe(le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Qf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ut((i,s)=>t(i,s,r)):Lt,Cs(1),n?Rr(e):qu(()=>new Kn))}function zu(t,e){return fe(qE(t,e,arguments.length>=2,!0))}function Gu(...t){let e=Dr(t);return fe((n,r)=>{(e?Ds(t,n,e):Ds(t,n)).subscribe(r)})}function jt(t,e){return fe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(le(r,u=>{i?.unsubscribe();let l=0,h=s++;je(t(u,h)).subscribe(i=le(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Yf(t){return fe((e,n)=>{je(t).subscribe(le(n,()=>n.complete(),sa)),!n.closed&&e.subscribe(n)})}function We(t,e,n){let r=ee(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(le(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}var DT="https://g.co/ng/security#xss",W=class extends Error{constructor(e,n){super(ng(e,n)),this.code=e}};function ng(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Da(t){return{toString:t}.toString()}var Wu="__parameters__";function oP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function CT(t,e,n){return Da(()=>{let r=oP(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Wu)?u[Wu]:Object.defineProperty(u,Wu,{value:[]})[Wu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ua=globalThis;function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function aP(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Rt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Rt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function zE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var cP=Ae({__forward_ref__:Ae});function Ca(t){return t.__forward_ref__=Ca,t.toString=function(){return Rt(this())},t}function wt(t){return AT(t)?t():t}function AT(t){return typeof t=="function"&&t.hasOwnProperty(cP)&&t.__forward_ref__===Ca}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Or(t){return{providers:t.providers||[],imports:t.imports||[]}}function El(t){return GE(t,RT)||GE(t,MT)}function ST(t){return El(t)!==null}function GE(t,e){return t.hasOwnProperty(e)?t[e]:null}function uP(t){let e=t&&(t[RT]||t[MT]);return e||null}function WE(t){return t&&(t.hasOwnProperty(KE)||t.hasOwnProperty(lP))?t[KE]:null}var RT=Ae({\u0275prov:Ae}),KE=Ae({\u0275inj:Ae}),MT=Ae({ngInjectableDef:Ae}),lP=Ae({ngInjectorDef:Ae}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NT(t){return t&&!!t.\u0275providers}var dP=Ae({\u0275cmp:Ae}),hP=Ae({\u0275dir:Ae}),fP=Ae({\u0275pipe:Ae}),pP=Ae({\u0275mod:Ae}),tl=Ae({\u0275fac:Ae}),la=Ae({__NG_ELEMENT_ID__:Ae}),QE=Ae({__NG_ENV_ID__:Ae});function rg(t){return typeof t=="string"?t:t==null?"":String(t)}function gP(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():rg(t)}function mP(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function ig(t,e){throw new W(-201,!1)}var se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),fp;function xT(){return fp}function St(t){let e=fp;return fp=t,e}function PT(t,e,n){let r=El(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;ig(t,"Injector")}var yP={},da=yP,pp="__NG_DI_FLAG__",nl="ngTempTokenPath",vP="ngTokenPath",_P=/\n/gm,wP="\u0275",YE="__source",Ns;function IP(){return Ns}function Mr(t){let e=Ns;return Ns=t,e}function EP(t,e=se.Default){if(Ns===void 0)throw new W(-203,!1);return Ns===null?PT(t,void 0,e):Ns.get(t,e&se.Optional?null:void 0,e)}function K(t,e=se.Default){return(xT()||EP)(wt(t),e)}function x(t,e=se.Default){return K(t,Tl(e))}function Tl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function gp(t){let e=[];for(let n=0;n<t.length;n++){let r=wt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],u=TP(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(K(i,s))}else e.push(K(r))}return e}function kT(t,e){return t[pp]=e,t.prototype[pp]=e,t}function TP(t){return t[pp]}function bP(t,e,n,r){let i=t[nl];throw e[YE]&&i.unshift(e[YE]),t.message=DP(`
`+t.message,i,n,r),t[vP]=i,t[nl]=null,t}function DP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==wP?t.slice(2):t;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_P,`
  `)}`}var Se=kT(CT("Optional"),8);var OT=kT(CT("SkipSelf"),4);function mi(t,e){let n=t.hasOwnProperty(tl);return n?t[tl]:null}function sg(t,e){t.forEach(n=>Array.isArray(n)?sg(n,e):e(n))}function FT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function CP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function AP(t,e,n){let r=Aa(t,e);return r>=0?t[r|1]=n:(r=~r,CP(t,r,e,n)),r}function Jf(t,e){let n=Aa(t,e);if(n>=0)return t[n|1]}function Aa(t,e){return SP(t,e,1)}function SP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ps={},Yt=[],ks=new j(""),LT=new j("",-1),VT=new j(""),il=class{get(e,n=da){if(n===da){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return n}},UT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(UT||{}),Tn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Tn||{}),Jt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Jt||{});function RP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function mp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];NP(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function MP(t){return t===3||t===4||t===6}function NP(t){return t.charCodeAt(0)===64}function ha(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?JE(t,n,i,null,e[++r]):JE(t,n,i,null,null))}}return t}function JE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var jT="ng-template";function xP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RP(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(og(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function og(t){return t.type===4&&t.value!==jT}function PP(t,e,n){let r=t.type===4&&!n?jT:t.value;return e===r}function kP(t,e,n){let r=4,i=t.attrs,s=i!==null?LP(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!cn(r)&&!cn(u))return!1;if(o&&cn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!PP(t,u,n)||u===""&&e.length===1){if(cn(r))return!1;o=!0}}else if(r&8){if(i===null||!xP(t,i,u,n)){if(cn(r))return!1;o=!0}}else{let l=e[++a],h=OP(u,i,og(t),n);if(h===-1){if(cn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;o=!0}}}}return cn(r)||o}function cn(t){return(t&1)===0}function OP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return VP(e,t)}function FP(t,e,n=!1){for(let r=0;r<e.length;r++)if(kP(t,e[r],n))return!0;return!1}function LP(t){for(let e=0;e<t.length;e++){let n=t[e];if(MP(n))return e}return t.length}function VP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ZE(t,e){return t?":not("+e.trim()+")":e}function UP(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!cn(o)&&(e+=ZE(s,i),i=""),r=o,s=s||!cn(r);n++}return i!==""&&(e+=ZE(s,i)),e}function jP(t){return t.map(UP).join(",")}function BP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!cn(i))break;i=s}r++}return{attrs:e,classes:n}}function Cn(t){return Da(()=>{let e=GT(t),n=Te(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===UT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tn.Emulated,styles:t.styles||Yt,_:null,schemas:t.schemas||null,tView:null,id:""});WT(n);let r=t.dependencies;return n.directiveDefs=eT(r,!1),n.pipeDefs=eT(r,!0),n.id=qP(n),n})}function $P(t){return xr(t)||$T(t)}function HP(t){return t!==null}function Fr(t){return Da(()=>({type:t.type,bootstrap:t.bootstrap||Yt,declarations:t.declarations||Yt,imports:t.imports||Yt,exports:t.exports||Yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function XE(t,e){if(t==null)return Ps;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Jt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Jt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Zn(t){return Da(()=>{let e=GT(t);return WT(e),e})}function BT(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function xr(t){return t[dP]||null}function $T(t){return t[hP]||null}function HT(t){return t[fP]||null}function qT(t){let e=xr(t)||$T(t)||HT(t);return e!==null?e.standalone:!1}function zT(t,e){let n=t[pP]||null;if(!n&&e===!0)throw new Error(`Type ${Rt(t)} does not have '\u0275mod' property.`);return n}function GT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ps,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Yt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XE(t.inputs,e),outputs:XE(t.outputs),debugInfo:null}}function WT(t){t.features?.forEach(e=>e(t))}function eT(t,e){if(!t)return null;let n=e?HT:$P;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(HP)}function qP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ht(t){return{\u0275providers:t}}function zP(...t){return{\u0275providers:KT(!0,t),\u0275fromNgModule:!0}}function KT(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return sg(e,o=>{let a=o;yp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&QT(i,s),n}function QT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ag(i,s=>{e(s,r)})}}function yp(t,e,n,r){if(t=wt(t),!t)return!1;let i=null,s=WE(t),o=!s&&xr(t);if(!s&&!o){let u=t.ngModule;if(s=WE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)yp(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{sg(s.imports,h=>{yp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&QT(l,e)}if(!a){let l=mi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Yt},i),e({provide:VT,useValue:i,multi:!0},i),e({provide:ks,useValue:()=>K(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;ag(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ag(t,e){for(let n of t)NT(n)&&(n=n.\u0275providers),Array.isArray(n)?ag(n,e):e(n)}var GP=Ae({provide:String,useValue:Ae});function YT(t){return t!==null&&typeof t=="object"&&GP in t}function WP(t){return!!(t&&t.useExisting)}function KP(t){return!!(t&&t.useFactory)}function Os(t){return typeof t=="function"}function QP(t){return!!t.useClass}var bl=new j(""),Yu={},YP={},Zf;function cg(){return Zf===void 0&&(Zf=new il),Zf}var Mt=class{},fa=class extends Mt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_p(e,o=>this.processProvider(o)),this.records.set(LT,As(void 0,this)),i.has("environment")&&this.records.set(Mt,As(void 0,this));let s=this.records.get(bl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(VT,Yt,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Mr(this),r=St(void 0),i;try{return e()}finally{Mr(n),St(r)}}get(e,n=da,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(QE))return e[QE](this);r=Tl(r);let i,s=Mr(this),o=St(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=tk(e)&&El(e);l&&this.injectableDefInScope(l)?u=As(vp(e),Yu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?cg():this.parent;return n=r&se.Optional&&n===da?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[nl]=a[nl]||[]).unshift(Rt(e)),s)throw a;return bP(a,e,"R3InjectorError",this.source)}else throw a}finally{St(o),Mr(s)}}resolveInjectorInitializers(){let e=ae(null),n=Mr(this),r=St(void 0),i;try{let s=this.get(ks,Yt,se.Self);for(let o of s)o()}finally{Mr(n),St(r),ae(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=wt(e);let n=Os(e)?e:wt(e&&e.provide),r=ZP(e);if(!Os(e)&&e.multi===!0){let i=this.records.get(n);i||(i=As(void 0,Yu,!0),i.factory=()=>gp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ae(null);try{return n.value===Yu&&(n.value=YP,n.value=n.factory()),typeof n.value=="object"&&n.value&&ek(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=wt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function vp(t){let e=El(t),n=e!==null?e.factory:mi(t);if(n!==null)return n;if(t instanceof j)throw new W(204,!1);if(t instanceof Function)return JP(t);throw new W(204,!1)}function JP(t){if(t.length>0)throw new W(204,!1);let n=uP(t);return n!==null?()=>n.factory(t):()=>new t}function ZP(t){if(YT(t))return As(void 0,t.useValue);{let e=JT(t);return As(e,Yu)}}function JT(t,e,n){let r;if(Os(t)){let i=wt(t);return mi(i)||vp(i)}else if(YT(t))r=()=>wt(t.useValue);else if(KP(t))r=()=>t.useFactory(...gp(t.deps||[]));else if(WP(t))r=()=>K(wt(t.useExisting));else{let i=wt(t&&(t.useClass||t.provide));if(XP(t))r=()=>new i(...gp(t.deps));else return mi(i)||vp(i)}return r}function As(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XP(t){return!!t.deps}function ek(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function tk(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function _p(t,e){for(let n of t)Array.isArray(n)?_p(n,e):n&&NT(n)?_p(n.\u0275providers,e):e(n)}function Xn(t,e){t instanceof fa&&t.assertNotDestroyed();let n,r=Mr(t),i=St(void 0);try{return e()}finally{Mr(r),St(i)}}function ZT(){return xT()!==void 0||IP()!=null}function nk(t){if(!ZT())throw new W(-203,!1)}function rk(t){return typeof t=="function"}var er=0,re=1,Y=2,dt=3,un=4,hn=5,pa=6,ga=7,lt=8,Fs=9,ln=10,Je=11,ma=12,tT=13,$s=14,dn=15,Dl=16,Ss=17,Ls=18,Cl=19,XT=20,Nr=21,Xf=22,yi=23,Nt=25,eb=1;var vi=7,sl=8,ol=9,Et=10,ug=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ug||{});function pi(t){return Array.isArray(t)&&typeof t[eb]=="object"}function tr(t){return Array.isArray(t)&&t[eb]===!0}function tb(t){return(t.flags&4)!==0}function Al(t){return t.componentOffset>-1}function lg(t){return(t.flags&1)===1}function Pr(t){return!!t.template}function ik(t){return(t[Y]&512)!==0}var wp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function nb(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Hs(){return rb}function rb(t){return t.type.prototype.ngOnChanges&&(t.setInput=ok),sk}Hs.ngInherit=!0;function sk(){let t=sb(this),e=t?.current;if(e){let n=t.previous;if(n===Ps)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ok(t,e,n,r,i){let s=this.declaredInputs[r],o=sb(t)||ak(t,{previous:Ps,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new wp(l&&l.currentValue,n,u===Ps),nb(t,e,i,n)}var ib="__ngSimpleChanges__";function sb(t){return t[ib]||null}function ak(t,e){return t[ib]=e}var nT=null;var In=function(t,e,n){nT?.(t,e,n)},ck="svg",uk="math",lk=!1;function dk(){return lk}function bn(t){for(;Array.isArray(t);)t=t[er];return t}function ob(t,e){return bn(e[t])}function fn(t,e){return bn(e[t.index])}function dg(t,e){return t.data[e]}function ab(t,e){return t[e]}function Lr(t,e){let n=e[t];return pi(n)?n:n[er]}function hg(t){return(t[Y]&128)===128}function hk(t){return tr(t[dt])}function al(t,e){return e==null?null:t[e]}function cb(t){t[Ss]=0}function fk(t){t[Y]&1024||(t[Y]|=1024,hg(t)&&ya(t))}function pk(t,e){for(;t>0;)e=e[$s],t--;return e}function fg(t){return!!(t[Y]&9216||t[yi]?.dirty)}function Ip(t){t[ln].changeDetectionScheduler?.notify(1),fg(t)?ya(t):t[Y]&64&&(dk()?(t[Y]|=1024,ya(t)):t[ln].changeDetectionScheduler?.notify())}function ya(t){t[ln].changeDetectionScheduler?.notify();let e=va(t);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!hg(e)));)e=va(e)}function ub(t,e){if((t[Y]&256)===256)throw new W(911,!1);t[Nr]===null&&(t[Nr]=[]),t[Nr].push(e)}function gk(t,e){if(t[Nr]===null)return;let n=t[Nr].indexOf(e);n!==-1&&t[Nr].splice(n,1)}function va(t){let e=t[dt];return tr(e)?e[dt]:e}var oe={lFrame:mb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function mk(){return oe.lFrame.elementDepthCount}function yk(){oe.lFrame.elementDepthCount++}function vk(){oe.lFrame.elementDepthCount--}function lb(){return oe.bindingsEnabled}function _k(){return oe.skipHydrationRootTNode!==null}function wk(t){return oe.skipHydrationRootTNode===t}function Ik(){oe.skipHydrationRootTNode=null}function be(){return oe.lFrame.lView}function Bt(){return oe.lFrame.tView}function Ti(t){return oe.lFrame.contextLView=t,t[lt]}function bi(t){return oe.lFrame.contextLView=null,t}function Zt(){let t=db();for(;t!==null&&t.type===64;)t=t.parent;return t}function db(){return oe.lFrame.currentTNode}function Ek(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Sa(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function hb(){return oe.lFrame.isParent}function Tk(){oe.lFrame.isParent=!1}function bk(){return oe.lFrame.contextLView}function Dk(){let t=oe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ck(t){return oe.lFrame.bindingIndex=t}function Ra(){return oe.lFrame.bindingIndex++}function Ak(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Sk(){return oe.lFrame.inI18n}function Rk(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ep(e)}function Mk(){return oe.lFrame.currentDirectiveIndex}function Ep(t){oe.lFrame.currentDirectiveIndex=t}function Nk(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function fb(t){oe.lFrame.currentQueryIndex=t}function xk(t){let e=t[re];return e.type===2?e.declTNode:e.type===1?t[hn]:null}function pb(t,e,n){if(n&se.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=xk(s),i===null||(s=s[$s],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=oe.lFrame=gb();return r.currentTNode=e,r.lView=t,!0}function pg(t){let e=gb(),n=t[re];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function gb(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?mb(t):e}function mb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function yb(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vb=yb;function gg(){let t=yb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Pk(t){return(oe.lFrame.contextLView=pk(t,oe.lFrame.contextLView))[lt]}function Di(){return oe.lFrame.selectedIndex}function _i(t){oe.lFrame.selectedIndex=t}function _b(){let t=oe.lFrame;return dg(t.tView,t.selectedIndex)}function kk(){return oe.lFrame.currentNamespace}var wb=!0;function mg(){return wb}function yg(t){wb=t}function Ok(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=rb(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function vg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ju(t,e,n){Ib(t,e,3,n)}function Zu(t,e,n,r){(t[Y]&3)===n&&Ib(t,e,n,r)}function ep(t,e){let n=t[Y];(n&3)===e&&(n&=16383,n+=1,t[Y]=n)}function Ib(t,e,n,r){let i=r!==void 0?t[Ss]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ss]+=65536),(a<s||s==-1)&&(Fk(t,n,e,u),t[Ss]=(t[Ss]&4294901760)+u+2),u++}function rT(t,e){In(4,t,e);let n=ae(null);try{e.call(t)}finally{ae(n),In(5,t,e)}}function Fk(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Y]>>14<t[Ss]>>16&&(t[Y]&3)===e&&(t[Y]+=16384,rT(a,s)):rT(a,s)}var xs=-1,wi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Lk(t){return t instanceof wi}function Vk(t){return(t.flags&8)!==0}function Uk(t){return(t.flags&16)!==0}function Eb(t){return t!==xs}function cl(t){return t&32767}function jk(t){return t>>16}function ul(t,e){let n=jk(t),r=e;for(;n>0;)r=r[$s],n--;return r}var Tp=!0;function ll(t){let e=Tp;return Tp=t,e}var Bk=256,Tb=Bk-1,bb=5,$k=0,En={};function Hk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(la)&&(r=n[la]),r==null&&(r=n[la]=$k++);let i=r&Tb,s=1<<i;e.data[t+(i>>bb)]|=s}function dl(t,e){let n=Db(t,e);if(n!==-1)return n;let r=e[re];r.firstCreatePass&&(t.injectorIndex=e.length,tp(r.data,t),tp(e,null),tp(r.blueprint,null));let i=_g(t,e),s=t.injectorIndex;if(Eb(i)){let o=cl(i),a=ul(i,e),u=a[re].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function tp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Db(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function _g(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Mb(i),r===null)return xs;if(n++,i=i[$s],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return xs}function bp(t,e,n){Hk(t,e,n)}function Cb(t,e,n){if(n&se.Optional||t!==void 0)return t;ig(e,"NodeInjector")}function Ab(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),!(n&(se.Self|se.Host))){let i=t[Fs],s=St(void 0);try{return i?i.get(e,r,n&se.Optional):PT(e,r,n&se.Optional)}finally{St(s)}}return Cb(r,e,n)}function Sb(t,e,n,r=se.Default,i){if(t!==null){if(e[Y]&2048&&!(r&se.Self)){let o=Kk(t,e,n,r,En);if(o!==En)return o}let s=Rb(t,e,n,r,En);if(s!==En)return s}return Ab(e,n,r,i)}function Rb(t,e,n,r,i){let s=Gk(n);if(typeof s=="function"){if(!pb(e,t,r))return r&se.Host?Cb(i,n,r):Ab(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))ig(n);else return o}finally{vb()}}else if(typeof s=="number"){let o=null,a=Db(t,e),u=xs,l=r&se.Host?e[dn][hn]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?_g(t,e):e[a+8],u===xs||!sT(r,!1)?a=-1:(o=e[re],a=cl(u),e=ul(u,e)));a!==-1;){let h=e[re];if(iT(s,a,h.data)){let p=qk(a,e,n,o,r,l);if(p!==En)return p}u=e[a+8],u!==xs&&sT(r,e[re].data[a+8]===l)&&iT(s,a,e)?(o=h,a=cl(u),e=ul(u,e)):a=-1}}return i}function qk(t,e,n,r,i,s){let o=e[re],a=o.data[t+8],u=r==null?Al(a)&&Tp:r!=o&&(a.type&3)!==0,l=i&se.Host&&s===a,h=zk(a,o,n,u,l);return h!==null?Vs(e,o,h,a):En}function zk(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let _=p;_<m;_++){let C=o[_];if(_<u&&n===C||_>=u&&C.type===n)return _}if(i){let _=o[u];if(_&&Pr(_)&&_.type===n)return u}return null}function Vs(t,e,n,r){let i=t[n],s=e.data;if(Lk(i)){let o=i;o.resolving&&mP(gP(s[n]));let a=ll(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?St(o.injectImpl):null,h=pb(t,r,se.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Ok(n,s[n],e)}finally{l!==null&&St(l),ll(a),o.resolving=!1,vb()}}return i}function Gk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(la)?t[la]:void 0;return typeof e=="number"?e>=0?e&Tb:Wk:e}function iT(t,e,n){let r=1<<t;return!!(n[e+(t>>bb)]&r)}function sT(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var gi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Sb(this._tNode,this._lView,e,Tl(r),n)}};function Wk(){return new gi(Zt(),be())}function Ma(t){return Da(()=>{let e=t.prototype.constructor,n=e[tl]||Dp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[tl]||Dp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Dp(t){return AT(t)?()=>{let e=Dp(wt(t));return e&&e()}:mi(t)}function Kk(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Y]&2048&&!(o[Y]&512);){let a=Rb(s,o,n,r|se.Self,En);if(a!==En)return a;let u=s.parent;if(!u){let l=o[XT];if(l){let h=l.get(n,En,r);if(h!==En)return h}u=Mb(o),o=o[$s]}s=u}return i}function Mb(t){let e=t[re],n=e.type;return n===2?e.declTNode:n===1?t[hn]:null}function oT(t,e=null,n=null,r){let i=Nb(t,e,n,r);return i.resolveInjectorInitializers(),i}function Nb(t,e=null,n=null,r,i=new Set){let s=[n||Yt,zP(t)];return r=r||(typeof t=="object"?void 0:Rt(t)),new fa(s,e||cg(),r||null,i)}var Ue=(()=>{class t{static{this.THROW_IF_NOT_FOUND=da}static{this.NULL=new il}static create(n,r){if(Array.isArray(n))return oT({name:""},r,n,"");{let i=n.name??"";return oT({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>K(LT)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();var Qk="ngOriginalError";function np(t){return t[Qk]}var Dn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&np(e);for(;n&&np(n);)n=np(n);return n||null}},xb=new j("",{providedIn:"root",factory:()=>x(Dn).handleError.bind(void 0)}),wg=(()=>{class t{static{this.__NG_ELEMENT_ID__=Yk}static{this.__NG_ENV_ID__=n=>n}}return t})(),Cp=class extends wg{constructor(e){super(),this._lView=e}onDestroy(e){return ub(this._lView,e),()=>gk(this._lView,e)}};function Yk(){return new Cp(be())}function Jk(){return Ig(Zt(),be())}function Ig(t,e){return new Ci(fn(t,e))}var Ci=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=Jk}}return t})();var Ap=class extends _t{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,ZT()&&(this.destroyRef=x(wg,{optional:!0})??void 0)}emit(e){let n=ae(null);try{super.next(e)}finally{ae(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=rp(s),i&&(i=rp(i)),o&&(o=rp(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ve&&e.add(a),a}};function rp(t){return e=>{setTimeout(t,void 0,e)}}var It=Ap;function Pb(t){return(t.flags&128)===128}var kb=new Map,Zk=0;function Xk(){return Zk++}function eO(t){kb.set(t[Cl],t)}function tO(t){kb.delete(t[Cl])}var aT="__ngContext__";function Ii(t,e){pi(e)?(t[aT]=e[Cl],eO(e)):t[aT]=e}function Ob(t){return Lb(t[ma])}function Fb(t){return Lb(t[un])}function Lb(t){for(;t!==null&&!tr(t);)t=t[un];return t}var Sp;function Vb(t){Sp=t}function nO(){if(Sp!==void 0)return Sp;if(typeof document<"u")return document;throw new W(210,!1)}var Eg=new j("",{providedIn:"root",factory:()=>rO}),rO="ng",Tg=new j(""),$t=new j("",{providedIn:"platform",factory:()=>"unknown"});var bg=new j("",{providedIn:"root",factory:()=>nO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iO="h",sO="b";var oO=()=>null;function Dg(t,e,n=!1){return oO(t,e,n)}var Ub=!1,aO=new j("",{providedIn:"root",factory:()=>Ub});var hl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DT})`}};function Sl(t){return t instanceof hl?t.changingThisBreaksApplicationSecurity:t}function jb(t,e){let n=cO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${DT})`)}return n===e}function cO(t){return t instanceof hl&&t.getTypeName()||null}var uO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bb(t){return t=String(t),t.match(uO)?t:"unsafe:"+t}var Cg=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Cg||{});function qs(t){let e=lO();return e?e.sanitize(Cg.URL,t)||"":jb(t,"URL")?Sl(t):Bb(rg(t))}function lO(){let t=be();return t&&t[ln].sanitizer}function $b(t){return t instanceof Function?t():t}function dO(t){return(t??x(Ue)).get($t)==="browser"}var Qn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qn||{}),hO;function Ag(t,e){return hO(t,e)}function Rs(t,e,n,r,i){if(r!=null){let s,o=!1;tr(r)?s=r:pi(r)&&(o=!0,r=r[er]);let a=bn(r);t===0&&n!==null?i==null?Gb(e,n,a):fl(e,n,a,i||null,!0):t===1&&n!==null?fl(e,n,a,i||null,!0):t===2?RO(e,a,o):t===3&&e.destroyNode(a),s!=null&&NO(e,t,s,n,i)}}function fO(t,e){return t.createText(e)}function pO(t,e,n){t.setValue(e,n)}function Hb(t,e,n){return t.createElement(e,n)}function gO(t,e){qb(t,e),e[er]=null,e[hn]=null}function mO(t,e,n,r,i,s){r[er]=i,r[hn]=e,Ml(t,r,n,1,i,s)}function qb(t,e){e[ln].changeDetectionScheduler?.notify(1),Ml(t,e,e[Je],2,null,null)}function yO(t){let e=t[ma];if(!e)return ip(t[re],t);for(;e;){let n=null;if(pi(e))n=e[ma];else{let r=e[Et];r&&(n=r)}if(!n){for(;e&&!e[un]&&e!==t;)pi(e)&&ip(e[re],e),e=e[dt];e===null&&(e=t),pi(e)&&ip(e[re],e),n=e&&e[un]}e=n}}function vO(t,e,n,r){let i=Et+r,s=n.length;r>0&&(n[i-1][un]=e),r<s-Et?(e[un]=n[i],FT(n,Et+r,e)):(n.push(e),e[un]=null),e[dt]=n;let o=e[Dl];o!==null&&n!==o&&_O(o,e);let a=e[Ls];a!==null&&a.insertView(t),Ip(e),e[Y]|=128}function _O(t,e){let n=t[ol],i=e[dt][dt][dn];e[dn]!==i&&(t[Y]|=ug.HasTransplantedViews),n===null?t[ol]=[e]:n.push(e)}function zb(t,e){let n=t[ol],r=n.indexOf(e);n.splice(r,1)}function _a(t,e){if(t.length<=Et)return;let n=Et+e,r=t[n];if(r){let i=r[Dl];i!==null&&i!==t&&zb(i,r),e>0&&(t[n-1][un]=r[un]);let s=rl(t,Et+e);gO(r[re],r);let o=s[Ls];o!==null&&o.detachView(s[re]),r[dt]=null,r[un]=null,r[Y]&=-129}return r}function Rl(t,e){if(!(e[Y]&256)){let n=e[Je];n.destroyNode&&Ml(t,e,n,3,null,null),yO(e)}}function ip(t,e){if(e[Y]&256)return;let n=ae(null);try{e[Y]&=-129,e[Y]|=256,e[yi]&&_E(e[yi]),IO(t,e),wO(t,e),e[re].type===1&&e[Je].destroy();let r=e[Dl];if(r!==null&&tr(e[dt])){r!==e[dt]&&zb(r,e);let i=e[Ls];i!==null&&i.detachView(t)}tO(e)}finally{ae(n)}}function wO(t,e){let n=t.cleanup,r=e[ga];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ga]=null);let i=e[Nr];if(i!==null){e[Nr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function IO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof wi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];In(4,a,u);try{u.call(a)}finally{In(5,a,u)}}else{In(4,i,s);try{s.call(i)}finally{In(5,i,s)}}}}}function EO(t,e,n){return TO(t,e.parent,n)}function TO(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[er];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Tn.None||s===Tn.Emulated)return null}return fn(r,n)}}function fl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Gb(t,e,n){t.appendChild(e,n)}function cT(t,e,n,r,i){r!==null?fl(t,e,n,r,i):Gb(t,e,n)}function bO(t,e,n,r){t.removeChild(e,n,r)}function Sg(t,e){return t.parentNode(e)}function DO(t,e){return t.nextSibling(e)}function CO(t,e,n){return SO(t,e,n)}function AO(t,e,n){return t.type&40?fn(t,n):null}var SO=AO,uT;function Rg(t,e,n,r){let i=EO(t,r,e),s=e[Je],o=r.parent||e[hn],a=CO(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)cT(s,i,n[u],a,!1);else cT(s,i,n,a,!1);uT!==void 0&&uT(s,r,e,n,i)}function Xu(t,e){if(e!==null){let n=e.type;if(n&3)return fn(e,t);if(n&4)return Rp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Xu(t,r);{let i=t[e.index];return tr(i)?Rp(-1,i):bn(i)}}else{if(n&32)return Ag(e,t)()||bn(t[e.index]);{let r=Wb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=va(t[dn]);return Xu(i,r)}else return Xu(t,e.next)}}}return null}function Wb(t,e){if(e!==null){let r=t[dn][hn],i=e.projection;return r.projection[i]}return null}function Rp(t,e){let n=Et+t+1;if(n<e.length){let r=e[n],i=r[re].firstChild;if(i!==null)return Xu(r,i)}return e[vi]}function RO(t,e,n){let r=Sg(t,e);r&&bO(t,r,e,n)}function Mg(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Ii(bn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Mg(t,e,n.child,r,i,s,!1),Rs(e,t,i,a,s);else if(u&32){let l=Ag(n,r),h;for(;h=l();)Rs(e,t,i,h,s);Rs(e,t,i,a,s)}else u&16?MO(t,e,r,n,i,s):Rs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ml(t,e,n,r,i,s){Mg(n,r,t.firstChild,e,i,s,!1)}function MO(t,e,n,r,i,s){let o=n[dn],u=o[hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Rs(e,t,i,h,s)}else{let l=u,h=o[dt];Pb(r)&&(l.flags|=128),Mg(t,e,l,h,i,s,!0)}}function NO(t,e,n,r,i){let s=n[vi],o=bn(n);s!==o&&Rs(e,t,r,s,i);for(let a=Et;a<n.length;a++){let u=n[a];Ml(u[re],u,t,e,r,s)}}function xO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Qn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qn.Important),t.setStyle(n,r,i,s))}}function PO(t,e,n){t.setAttribute(e,"style",n)}function Kb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Qb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&mp(t,e,r),i!==null&&Kb(t,e,i),s!==null&&PO(t,e,s)}var Ai={};function $e(t=1){Yb(Bt(),be(),Di()+t,!1)}function Yb(t,e,n,r){if(!r)if((e[Y]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ju(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Zu(e,s,0,n)}_i(n)}function He(t,e=se.Default){let n=be();if(n===null)return K(t,e);let r=Zt();return Sb(r,n,wt(t),e)}function Jb(){let t="invalid";throw new Error(t)}function Zb(t,e,n,r,i,s){let o=ae(null);try{let a=null;i&Jt.SignalBased&&(a=e[r][Nf]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Jt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):nb(e,a,r,s)}finally{ae(o)}}function kO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)_i(~i);else{let s=i,o=n[++r],a=n[++r];Rk(o,s);let u=e[s];a(2,u)}}}finally{_i(-1)}}function Nl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[er]=i,p[Y]=r|4|128|8|64,(l!==null||t&&t[Y]&2048)&&(p[Y]|=2048),cb(p),p[dt]=p[$s]=t,p[lt]=n,p[ln]=o||t&&t[ln],p[Je]=a||t&&t[Je],p[Fs]=u||t&&t[Fs]||null,p[hn]=s,p[Cl]=Xk(),p[pa]=h,p[XT]=l,p[dn]=e.type==2?t[dn]:p,p}function xl(t,e,n,r,i){let s=t.data[e];if(s===null)s=OO(t,e,n,r,i),Sk()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Ek();s.injectorIndex=o===null?-1:o.injectorIndex}return Sa(s,!0),s}function OO(t,e,n,r,i){let s=db(),o=hb(),a=o?s:s&&s.parent,u=t.data[e]=jO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Xb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eD(t,e,n,r,i){let s=Di(),o=r&2;try{_i(-1),o&&e.length>Nt&&Yb(t,e,Nt,!1),In(o?2:0,i),n(r,i)}finally{_i(s),In(o?3:1,i)}}function tD(t,e,n){if(tb(e)){let r=ae(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{ae(r)}}}function nD(t,e,n){lb()&&(GO(t,e,n,fn(n,e)),(n.flags&64)===64&&cD(t,e,n))}function rD(t,e,n=fn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function iD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ng(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Ng(t,e,n,r,i,s,o,a,u,l,h){let p=Nt+r,m=p+i,_=FO(p,m),C=typeof l=="function"?l():l;return _[re]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function FO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ai);return n}function LO(t,e,n,r){let s=r.get(aO,Ub)||n===Tn.ShadowDom,o=t.selectRootElement(e,s);return VO(o),o}function VO(t){UO(t)}var UO=()=>null;function jO(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return _k()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lT(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Jt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?dT(r,n,l,a,u):dT(r,n,l,a)}return r}function dT(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function BO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,_=m?m.inputs:null,C=m?m.outputs:null;u=lT(0,p.inputs,h,u,_),l=lT(1,p.outputs,h,l,C);let M=u!==null&&o!==null&&!og(e)?t1(u,h,o):null;a.push(M)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function $O(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sD(t,e,n,r,i,s,o,a){let u=fn(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(xg(t,n,h,r,i),Al(e)&&HO(n,e.index)):e.type&3?(r=$O(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function HO(t,e){let n=Lr(e,t);n[Y]&16||(n[Y]|=64)}function oD(t,e,n,r){if(lb()){let i=r===null?null:{"":-1},s=KO(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&aD(t,e,n,o,i,a),i&&QO(n,r,i)}n.mergedAttrs=ha(n.mergedAttrs,n.attrs)}function aD(t,e,n,r,i,s){for(let l=0;l<r.length;l++)bp(dl(n,e),t,r[l].type);JO(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Xb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=ha(n.mergedAttrs,h.hostAttrs),ZO(t,n,e,u,h),YO(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}BO(t,n,s)}function qO(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;zO(o)!=a&&o.push(a),o.push(n,r,s)}}function zO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function GO(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Al(n)&&XO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||dl(n,e),Ii(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Vs(e,t,a,n);if(Ii(l,e),o!==null&&e1(e,a-i,l,u,n,o),Pr(u)){let h=Lr(n.index,e);h[lt]=Vs(e,t,a,n)}}}function cD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Mk();try{_i(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Ep(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&WO(u,l)}}finally{_i(-1),Ep(o)}}function WO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function KO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(FP(e,o.selectors,!1))if(r||(r=[]),Pr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Mp(t,e,u)}else r.unshift(o),Mp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Mp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function QO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function YO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Pr(e)&&(n[""]=t)}}function JO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ZO(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=mi(i.type,!0)),o=new wi(s,Pr(i),He);t.blueprint[r]=o,n[r]=o,qO(t,e,r,Xb(t,n,i.hostVars,Ai),i)}function XO(t,e,n){let r=fn(e,t),i=iD(n),s=t[ln].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Pl(t,Nl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function e1(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Zb(r,n,u,l,h,p)}}function t1(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function uD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function lD(t,e){let n=t.contentQueries;if(n!==null){let r=ae(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];fb(s),a.contentQueries(2,e[o],o)}}}finally{ae(r)}}}function Pl(t,e){return t[ma]?t[tT][un]=e:t[ma]=e,t[tT]=e,e}function Np(t,e,n){fb(0);let r=ae(null);try{e(t,n)}finally{ae(r)}}function n1(t){return t[ga]||(t[ga]=[])}function r1(t){return t.cleanup||(t.cleanup=[])}function dD(t,e){let n=t[Fs],r=n?n.get(Dn,null):null;r&&r.handleError(e)}function xg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];Zb(h,l,r,a,u,i)}}function i1(t,e,n){let r=ob(e,t);pO(t[Je],r,n)}function s1(t,e){let n=Lr(e,t),r=n[re];o1(r,n);let i=n[er];i!==null&&n[pa]===null&&(n[pa]=Dg(i,n[Fs])),Pg(r,n,n[lt])}function o1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Pg(t,e,n){pg(e);try{let r=t.viewQuery;r!==null&&Np(1,r,n);let i=t.template;i!==null&&eD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ls]?.finishViewCreation(t),t.staticContentQueries&&lD(t,e),t.staticViewQueries&&Np(2,t.viewQuery,n);let s=t.components;s!==null&&a1(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Y]&=-5,gg()}}function a1(t,e){for(let n=0;n<e.length;n++)s1(t,e[n])}function kg(t,e,n,r){let i=ae(null);try{let s=e.tView,a=t[Y]&4096?4096:16,u=Nl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Dl]=l;let h=t[Ls];return h!==null&&(u[Ls]=h.createEmbeddedView(s)),Pg(s,u,n),u}finally{ae(i)}}function hD(t,e){let n=Et+e;if(n<t.length)return t[n]}function wa(t,e){return!e||e.firstChild===null||Pb(t)}function kl(t,e,n,r=!0){let i=e[re];if(vO(i,e,t,n),r){let o=Rp(n,t),a=e[Je],u=Sg(a,t[vi]);u!==null&&mO(i,t[hn],a,e,u,o)}let s=e[pa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function fD(t,e){let n=_a(t,e);return n!==void 0&&Rl(n[re],n),n}function pl(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(bn(s)),tr(s)&&c1(s,r);let o=n.type;if(o&8)pl(t,e,n.child,r);else if(o&32){let a=Ag(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Wb(e,n);if(Array.isArray(a))r.push(...a);else{let u=va(e[dn]);pl(u[re],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function c1(t,e){for(let n=Et;n<t.length;n++){let r=t[n],i=r[re].firstChild;i!==null&&pl(r[re],r,i,e)}t[vi]!==t[er]&&e.push(t[vi])}var pD=[];function u1(t){return t[yi]??l1(t)}function l1(t){let e=pD.pop()??Object.create(h1);return e.lView=t,e}function d1(t){t.lView[yi]!==t&&(t.lView=null,pD.push(t))}var h1=Te(L({},mE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ya(t.lView)},consumerOnSignalRead(){this.lView[yi]=this}}),gD=100;function mD(t,e=!0,n=0){let r=t[ln],i=r.rendererFactory,s=!1;s||i.begin?.();try{f1(t,n)}catch(o){throw e&&dD(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function f1(t,e){xp(t,e);let n=0;for(;fg(t);){if(n===gD)throw new W(103,!1);n++,xp(t,1)}}function p1(t,e,n,r){let i=e[Y];if((i&256)===256)return;let s=!1;!s&&e[ln].inlineEffectRunner?.flush(),pg(e);let o=null,a=null;!s&&g1(t)&&(a=u1(e),o=yE(a));try{cb(e),Ck(t.bindingStartIndex),n!==null&&eD(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&Ju(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Zu(e,p,0,null),ep(e,0)}if(m1(e),yD(e,0),t.contentQueries!==null&&lD(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&Ju(e,p)}else{let p=t.contentHooks;p!==null&&Zu(e,p,1),ep(e,1)}kO(t,e);let l=t.components;l!==null&&_D(e,l,0);let h=t.viewQuery;if(h!==null&&Np(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&Ju(e,p)}else{let p=t.viewHooks;p!==null&&Zu(e,p,2),ep(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Xf]){for(let p of e[Xf])p();e[Xf]=null}s||(e[Y]&=-73)}catch(u){throw ya(e),u}finally{a!==null&&(vE(a,o),d1(a)),gg()}}function g1(t){return t.type!==2}function yD(t,e){for(let n=Ob(t);n!==null;n=Fb(n))for(let r=Et;r<n.length;r++){let i=n[r];vD(i,e)}}function m1(t){for(let e=Ob(t);e!==null;e=Fb(e)){if(!(e[Y]&ug.HasTransplantedViews))continue;let n=e[ol];for(let r=0;r<n.length;r++){let i=n[r],s=i[dt];fk(i)}}}function y1(t,e,n){let r=Lr(e,t);vD(r,n)}function vD(t,e){hg(t)&&xp(t,e)}function xp(t,e){let r=t[re],i=t[Y],s=t[yi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&xf(s)),s&&(s.dirty=!1),t[Y]&=-9217,o)p1(r,t,r.template,t[lt]);else if(i&8192){yD(t,1);let a=r.components;a!==null&&_D(t,a,1)}}function _D(t,e,n){for(let r=0;r<e.length;r++)y1(t,e[r],n)}function Og(t){for(t[ln].changeDetectionScheduler?.notify();t;){t[Y]|=64;let e=va(t);if(ik(t)&&!e)return t;t=e}return null}var Us=class{get rootNodes(){let e=this._lView,n=e[re];return pl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lt]}set context(e){this._lView[lt]=e}get destroyed(){return(this._lView[Y]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(tr(e)){let n=e[sl],r=n?n.indexOf(this):-1;r>-1&&(_a(e,r),rl(n,r))}this._attachedToViewContainer=!1}Rl(this._lView[re],this._lView)}onDestroy(e){ub(this._lView,e)}markForCheck(){Og(this._cdRefInjectingView||this._lView)}detach(){this._lView[Y]&=-129}reattach(){Ip(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,mD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,qb(this._lView[re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e,Ip(this._lView)}};var a7=new RegExp(`^(\\d+)*(${sO}|${iO})*(.*)`);var v1=()=>null;function Ia(t,e){return v1(t,e)}var gl=class{},Pp=class{},ml=class{};function _1(t){let e=Error(`No component factory found for ${Rt(t)}.`);return e[w1]=t,e}var w1="ngComponent";var kp=class{resolveComponentFactory(e){throw _1(e)}},Ol=(()=>{class t{static{this.NULL=new kp}}return t})(),Ea=class{},zs=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>I1()}}return t})();function I1(){let t=be(),e=Zt(),n=Lr(e.index,t);return(pi(n)?n:t)[Je]}var E1=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})(),sp={};var hT=new Set;function Na(t){hT.has(t)||(hT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function fT(...t){}function T1(){let t=typeof ua.requestAnimationFrame=="function",e=ua[t?"requestAnimationFrame":"setTimeout"],n=ua[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ce=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new It(!1),this.onMicrotaskEmpty=new It(!1),this.onStable=new It(!1),this.onError=new It(!1),typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=T1().nativeRequestAnimationFrame,C1(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,b1,fT,fT);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},b1={};function Fg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function D1(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ua,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Op(t),t.isCheckStableRunning=!0,Fg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Op(t))}function C1(t){let e=()=>{D1(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(A1(a))return n.invokeTask(i,s,o,a);try{return pT(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gT(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return pT(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),gT(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Op(t),Fg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Op(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function pT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gT(t){t._nesting--,Fg(t)}function A1(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Ms=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ms||{}),S1={destroy(){}};function Fl(t,e){!e&&nk(Fl);let n=e?.injector??x(Ue);if(!dO(n))return S1;Na("NgAfterNextRender");let r=n.get(Lg),i=r.handler??=new Lp,s=e?.phase??Ms.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(wg).onDestroy(o),u=Xn(n,()=>new Fp(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var Fp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=x(ce),this.errorHandler=x(Dn,{optional:!0}),x(gl,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Lp=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ms.EarlyRead]:new Set,[Ms.Write]:new Set,[Ms.MixedReadWrite]:new Set,[Ms.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Lg=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Vp(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=zE(i,a);else if(s==2){let u=a,l=e[++o];r=zE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var yl=class extends Ol{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=xr(e);return new js(n,this.ngModule)}};function mT(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function R1(t){let e=t.toLowerCase();return e==="svg"?ck:e==="math"?uk:null}var Up=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Tl(r);let i=this.injector.get(e,sp,r);return i!==sp||n===sp?i:this.parentInjector.get(e,n,r)}},js=class extends ml{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=mT(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=ae(null);try{i=i||this.ngModule;let o=i instanceof Mt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Up(e,o):e,u=a.get(Ea,null);if(u===null)throw new W(407,!1);let l=a.get(E1,null),h=a.get(Lg,null),p=a.get(gl,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",M=r?LO(_,r,this.componentDef.encapsulation,a):Hb(_,C,R1(C)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let k=null;M!==null&&(k=Dg(M,a,!0));let B=Ng(0,null,null,1,0,null,null,null,null,null,null),V=Nl(null,B,null,R,null,null,m,_,a,null,k);pg(V);let $,Ie;try{let z=this.componentDef,E,v=null;z.findHostDirectiveDefs?(E=[],v=new Map,z.findHostDirectiveDefs(z,E,v),E.push(z)):E=[z];let w=M1(V,M),T=N1(w,M,z,E,V,m,_);Ie=dg(B,Nt),M&&k1(_,z,M,r),n!==void 0&&O1(Ie,this.ngContentSelectors,n),$=P1(T,z,E,v,V,[F1]),Pg(B,V,null)}finally{gg()}return new jp(this.componentType,$,Ig(Ie,V),V,Ie)}finally{ae(s)}}},jp=class extends Pp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Us(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;xg(s[re],s,i,e,n),this.previousInputValues.set(e,n);let o=Lr(this._tNode.index,s);Og(o)}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function M1(t,e){let n=t[re],r=Nt;return t[r]=e,xl(n,r,2,"#host",null)}function N1(t,e,n,r,i,s,o){let a=i[re];x1(r,t,e,o);let u=null;e!==null&&(u=Dg(e,i[Fs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Nl(i,iD(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Mp(a,t,r.length-1),Pl(i,p),i[t.index]=p}function x1(t,e,n,r){for(let i of t)e.mergedAttrs=ha(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vp(e,e.mergedAttrs,!0),n!==null&&Qb(r,n,e))}function P1(t,e,n,r,i,s){let o=Zt(),a=i[re],u=fn(o,i);aD(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Vs(i,a,p,o);Ii(m,i)}cD(a,i,o),u&&Ii(u,i);let l=Vs(i,a,o.directiveStart+o.componentOffset,o);if(t[lt]=i[lt]=l,s!==null)for(let h of s)h(l,e);return tD(a,o,i),l}function k1(t,e,n,r){if(r)mp(t,n,["ng-version","17.3.12"]);else{let{attrs:i,classes:s}=BP(e.selectors[0]);i&&mp(t,n,i),s&&s.length>0&&Kb(t,n,s.join(" "))}}function O1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function F1(){let t=Zt();vg(be()[re],t)}var Ll=(()=>{class t{static{this.__NG_ELEMENT_ID__=L1}}return t})();function L1(){let t=Zt();return U1(t,be())}var V1=Ll,wD=class extends V1{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ig(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){let e=_g(this._hostTNode,this._hostLView);if(Eb(e)){let n=ul(e,this._hostLView),r=cl(e),i=n[re].data[r+8];return new gi(i,n)}else return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=yT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Et}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ia(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,wa(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!rk(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new js(xr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let M=(o?l:this.parentInjector).get(Mt,null);M&&(s=M)}let h=xr(u.componentType??{}),p=Ia(this._lContainer,h?.id??null),m=p?.firstChild??null,_=u.create(l,i,m,s);return this.insertImpl(_.hostView,a,wa(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[dt],l=new wD(u,u[hn],u[dt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return kl(o,i,s,r),e.attachToViewContainerRef(),FT(op(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=yT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=_a(this._lContainer,n);r&&(rl(op(this._lContainer),n),Rl(r[re],r))}detach(e){let n=this._adjustIndex(e,-1),r=_a(this._lContainer,n);return r&&rl(op(this._lContainer),n)!=null?new Us(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function yT(t){return t[sl]}function op(t){return t[sl]||(t[sl]=[])}function U1(t,e){let n,r=e[t.index];return tr(r)?n=r:(n=uD(r,e,null,t),e[t.index]=n,Pl(e,n)),B1(n,e,t,r),new wD(n,t,e)}function j1(t,e){let n=t[Je],r=n.createComment(""),i=fn(e,t),s=Sg(n,i);return fl(n,s,r,DO(n,i),!1),r}var B1=q1,$1=()=>!1;function H1(t,e,n){return $1(t,e,n)}function q1(t,e,n,r){if(t[vi])return;let i;n.type&8?i=bn(r):i=j1(e,n),t[vi]=i}function z1(t){return typeof t=="function"&&t[Nf]!==void 0}function ID(t){return z1(t)&&typeof t.set=="function"}function G1(t){return Object.getPrototypeOf(t.prototype).constructor}function Gs(t){let e=G1(t.type),n=!0,r=[t];for(;e;){let i;if(Pr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Ku(t.inputs),o.inputTransforms=Ku(t.inputTransforms),o.declaredInputs=Ku(t.declaredInputs),o.outputs=Ku(t.outputs);let a=i.hostBindings;a&&J1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Q1(t,u),l&&Y1(t,l),W1(t,i),aP(t.outputs,i.outputs),Pr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Gs&&(n=!1)}}e=Object.getPrototypeOf(e)}K1(r)}function W1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function K1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,n=ha(n,i.hostAttrs))}}function Ku(t){return t===Ps?{}:t===Yt?[]:t}function Q1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Y1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function J1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var kr=class{},Ta=class{};var Bp=class extends kr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yl(this);let i=zT(e);this._bootstrapComponents=$b(i.bootstrap),this._r3Injector=Nb(e,n,[{provide:kr,useValue:this},{provide:Ol,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},$p=class extends Ta{constructor(e){super(),this.moduleType=e}create(e){return new Bp(this.moduleType,e,[])}};var vl=class extends kr{constructor(e){super(),this.componentFactoryResolver=new yl(this),this.instance=null;let n=new fa([...e.providers,{provide:kr,useValue:this},{provide:Ol,useValue:this.componentFactoryResolver}],e.parent||cg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Vl(t,e,n=null){return new vl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ul=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Z1(t,e,n){return t[e]=n}function Si(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function X1(t){return(t.flags&32)===32}function eF(t,e,n,r,i,s,o,a,u){let l=e.consts,h=xl(e,t,4,o||null,al(l,a));oD(e,n,h,al(l,u)),vg(e,h);let p=h.tView=Ng(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Yn(t,e,n,r,i,s,o,a){let u=be(),l=Bt(),h=t+Nt,p=l.firstCreatePass?eF(h,l,u,e,n,r,i,s,o):l.data[h];Sa(p,!1);let m=tF(l,u,p,t);mg()&&Rg(l,u,m,p),Ii(m,u);let _=uD(m,u,m,p);return u[h]=_,Pl(u,_),H1(_,p,u),lg(p)&&nD(l,u,p),o!=null&&rD(u,p,a),Yn}var tF=nF;function nF(t,e,n,r){return yg(!0),e[Je].createComment("")}function rF(t,e,n,r){return Si(t,Ra(),n)?e+rg(n)+r:Ai}function Qu(t,e){return t<<17|e<<2}function Ei(t){return t>>17&32767}function iF(t){return(t&2)==2}function sF(t,e){return t&131071|e<<17}function Hp(t){return t|2}function Bs(t){return(t&131068)>>2}function ap(t,e){return t&-131069|e<<2}function oF(t){return(t&1)===1}function qp(t){return t|1}function aF(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ei(o),u=Bs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Aa(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Ei(t[a+1]);t[r+1]=Qu(m,a),m!==0&&(t[m+1]=ap(t[m+1],r)),t[a+1]=sF(t[a+1],r)}else t[r+1]=Qu(a,0),a!==0&&(t[a+1]=ap(t[a+1],r)),a=r;else t[r+1]=Qu(u,0),a===0?a=r:t[u+1]=ap(t[u+1],r),u=r;l&&(t[r+1]=Hp(t[r+1])),vT(t,h,r,!0),vT(t,h,r,!1),cF(e,h,t,r,s),o=Qu(a,u),s?e.classBindings=o:e.styleBindings=o}function cF(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Aa(s,e)>=0&&(n[r+1]=qp(n[r+1]))}function vT(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ei(i):Bs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];uF(u,e)&&(a=!0,t[o+1]=r?qp(l):Hp(l)),o=r?Ei(l):Bs(l)}a&&(t[n+1]=r?Hp(i):qp(i))}function uF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Aa(t,e)>=0:!1}function Ri(t,e,n){let r=be(),i=Ra();if(Si(r,i,e)){let s=Bt(),o=_b();sD(s,o,r,t,e,r[Je],n,!1)}return Ri}function _T(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";xg(t,n,s[o],o,r)}function Mi(t,e){return lF(t,e,null,!0),Mi}function lF(t,e,n,r){let i=be(),s=Bt(),o=Ak(2);if(s.firstUpdatePass&&hF(s,t,o,r),e!==Ai&&Si(i,o,e)){let a=s.data[Di()];yF(s,a,i,i[Je],t,i[o+1]=vF(e,n),r,o)}}function dF(t,e){return e>=t.expandoStartIndex}function hF(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Di()],o=dF(t,n);_F(s,r)&&e===null&&!o&&(e=!1),e=fF(i,s,e,r),aF(i,s,e,n,o,r)}}function fF(t,e,n,r){let i=Nk(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=cp(null,t,e,n,r),n=ba(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=cp(i,t,e,n,r),s===null){let u=pF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=cp(null,t,e,u[1],r),u=ba(u,e.attrs,r),gF(t,e,r,u))}else s=mF(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function pF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Bs(r)!==0)return t[Ei(r)]}function gF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ei(i)]=r}function mF(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ba(r,o,n)}return ba(r,e.attrs,n)}function cp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ba(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),AP(t,o,n?!0:e[++s]))}return t===void 0?null:t}function yF(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=oF(l)?wT(u,e,n,i,Bs(l),o):void 0;if(!_l(h)){_l(s)||iF(l)&&(s=wT(u,null,n,i,a,o));let p=ob(Di(),n);xO(r,o,p,i,s)}}function wT(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Ai&&(m=p?Yt:void 0);let _=p?Jf(m,r):h===r?m:void 0;if(l&&!_l(_)&&(_=Jf(u,r)),_l(_)&&(a=_,o))return a;let C=t[i+1];i=o?Ei(C):Bs(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Jf(u,r))}return a}function _l(t){return t!==void 0}function vF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Rt(Sl(t)))),t}function _F(t,e){return(t.flags&(e?8:16))!==0}var zp=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function up(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function wF(t,e,n){let r,i,s=0,o=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;s<=o&&s<=a;){let u=t.at(s),l=e[s],h=up(s,u,s,l,n);if(h!==0){h<0&&t.updateValue(s,l),s++;continue}let p=t.at(o),m=e[a],_=up(o,p,a,m,n);if(_!==0){_<0&&t.updateValue(o,m),o--,a--;continue}let C=n(s,u),M=n(o,p),R=n(s,l);if(Object.is(R,M)){let k=n(a,m);Object.is(k,C)?(t.swap(s,o),t.updateValue(o,m),a--,o--):t.move(o,s),t.updateValue(s,l),s++;continue}if(r??=new wl,i??=ET(t,s,o,n),Gp(t,r,s,R))t.updateValue(s,l),s++,o++;else if(i.has(R))r.set(C,t.detach(s)),o--;else{let k=t.create(s,e[s]);t.attach(s,k),s++,o++}}for(;s<=a;)IT(t,r,n,s,e[s]),s++}else if(e!=null){let a=e[Symbol.iterator](),u=a.next();for(;!u.done&&s<=o;){let l=t.at(s),h=u.value,p=up(s,l,s,h,n);if(p!==0)p<0&&t.updateValue(s,h),s++,u=a.next();else{r??=new wl,i??=ET(t,s,o,n);let m=n(s,h);if(Gp(t,r,s,m))t.updateValue(s,h),s++,o++,u=a.next();else if(!i.has(m))t.attach(s,t.create(s,h)),s++,o++,u=a.next();else{let _=n(s,l);r.set(_,t.detach(s)),o--}}}for(;!u.done;)IT(t,r,n,t.length,u.value),u=a.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(a=>{t.destroy(a)})}function Gp(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function IT(t,e,n,r,i){if(Gp(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function ET(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var wl=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Ni(t,e,n){Na("NgControlFlow");let r=be(),i=Ra(),s=Yp(r,Nt+t),o=0;if(Si(r,i,e)){let a=ae(null);try{if(fD(s,o),e!==-1){let u=Jp(r[re],Nt+e),l=Ia(s,u.tView.ssrId),h=kg(r,u,n,{dehydratedView:l});kl(s,h,o,wa(u,l))}}finally{ae(a)}}else{let a=hD(s,o);a!==void 0&&(a[lt]=n)}}var Wp=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Et}};function ED(t,e){return e}var Kp=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function TD(t,e,n,r,i,s,o,a,u,l,h,p,m){Na("NgControlFlow");let _=u!==void 0,C=be(),M=a?o.bind(C[dn][lt]):o,R=new Kp(_,M);C[Nt+t]=R,Yn(t+1,e,n,r,i,s),_&&Yn(t+2,u,l,h,p,m)}var Qp=class extends zp{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Et}at(e){return this.getLView(e)[lt].$implicit}attach(e,n){let r=n[pa];this.needsIndexUpdate||=e!==this.length,kl(this.lContainer,n,e,wa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,IF(this.lContainer,e)}create(e,n){let r=Ia(this.lContainer,this.templateTNode.tView.ssrId);return kg(this.hostLView,this.templateTNode,new Wp(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Rl(e[re],e)}updateValue(e,n){this.getLView(e)[lt].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[lt].$index=e}getLView(e){return EF(this.lContainer,e)}};function bD(t){let e=ae(null),n=Di();try{let r=be(),i=r[re],s=r[n];if(s.liveCollection===void 0){let a=n+1,u=Yp(r,a),l=Jp(i,a);s.liveCollection=new Qp(u,r,l)}else s.liveCollection.reset();let o=s.liveCollection;if(wF(o,t,s.trackByFn),o.updateIndexes(),s.hasEmptyBlock){let a=Ra(),u=o.length===0;if(Si(r,a,u)){let l=n+2,h=Yp(r,l);if(u){let p=Jp(i,l),m=Ia(h,p.tView.ssrId),_=kg(r,p,void 0,{dehydratedView:m});kl(h,_,0,wa(p,m))}else fD(h,0)}}}finally{ae(e)}}function Yp(t,e){return t[e]}function IF(t,e){return _a(t,e)}function EF(t,e){return hD(t,e)}function Jp(t,e){return dg(t,e)}function TF(t,e,n,r,i,s){let o=e.consts,a=al(o,i),u=xl(e,t,2,r,a);return oD(e,n,u,al(o,s)),u.attrs!==null&&Vp(u,u.attrs,!1),u.mergedAttrs!==null&&Vp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ge(t,e,n,r){let i=be(),s=Bt(),o=Nt+t,a=i[Je],u=s.firstCreatePass?TF(o,s,i,e,n,r):s.data[o],l=bF(s,i,u,a,e,t);i[o]=l;let h=lg(u);return Sa(u,!0),Qb(a,l,u),!X1(u)&&mg()&&Rg(s,i,l,u),mk()===0&&Ii(l,i),yk(),h&&(nD(s,i,u),tD(s,u,i)),r!==null&&rD(i,u),ge}function De(){let t=Zt();hb()?Tk():(t=t.parent,Sa(t,!1));let e=t;wk(e)&&Ik(),vk();let n=Bt();return n.firstCreatePass&&(vg(n,t),tb(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Vk(e)&&_T(n,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Uk(e)&&_T(n,e,be(),e.stylesWithoutHost,!1),De}function Ke(t,e,n,r){return ge(t,e,n,r),De(),Ke}var bF=(t,e,n,r,i,s)=>(yg(!0),Hb(r,i,kk()));function jl(){return be()}var Il="en-US";var DF=Il;function CF(t){typeof t=="string"&&(DF=t.toLowerCase().replace(/_/g,"-"))}function Xt(t,e,n,r){let i=be(),s=Bt(),o=Zt();return DD(s,i,i[Je],o,t,e,r),Xt}function AF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ga],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function DD(t,e,n,r,i,s,o){let a=lg(r),l=t.firstCreatePass&&r1(t),h=e[lt],p=n1(e),m=!0;if(r.type&3||o){let M=fn(r,e),R=o?o(M):M,k=p.length,B=o?$=>o(bn($[r.index])):r.index,V=null;if(!o&&a&&(V=AF(t,e,i,r.index)),V!==null){let $=V.__ngLastListenerFn__||V;$.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,m=!1}else{s=bT(r,e,h,s,!1);let $=n.listen(R,i,s);p.push(s,$),l&&l.push(i,B,k,k+1)}}else s=bT(r,e,h,s,!1);let _=r.outputs,C;if(m&&_!==null&&(C=_[i])){let M=C.length;if(M)for(let R=0;R<M;R+=2){let k=C[R],B=C[R+1],Ie=e[k][B].subscribe(s),z=p.length;p.push(s,Ie),l&&l.push(i,r.index,z,-(z+1))}}}function TT(t,e,n,r){let i=ae(null);try{return In(6,e,n),n(r)!==!1}catch(s){return dD(t,s),!1}finally{In(7,e,n),ae(i)}}function bT(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Lr(t.index,e):e;Og(a);let u=TT(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=TT(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function Vr(t=1){return Pk(t)}function SF(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function CD(t){let e=bk();return ab(e,Nt+t)}function Ht(t,e=""){let n=be(),r=Bt(),i=t+Nt,s=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],o=RF(r,n,s,e,t);n[i]=o,mg()&&Rg(r,n,o,s),Sa(s,!1)}var RF=(t,e,n,r,i)=>(yg(!0),fO(e[Je],r));function Ur(t,e,n){let r=be(),i=rF(r,t,e,n);return i!==Ai&&i1(r,Di(),i),Ur}function Vg(t,e,n){ID(e)&&(e=e());let r=be(),i=Ra();if(Si(r,i,e)){let s=Bt(),o=_b();sD(s,o,r,t,e,r[Je],n,!1)}return Vg}function AD(t,e){let n=ID(t);return n&&t.set(e),n}function Ug(t,e){let n=be(),r=Bt(),i=Zt();return DD(r,n,n[Je],i,t,e),Ug}function MF(t,e,n){let r=Bt();if(r.firstCreatePass){let i=Pr(t);Zp(n,r.data,r.blueprint,i,!0),Zp(e,r.data,r.blueprint,i,!1)}}function Zp(t,e,n,r,i){if(t=wt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Zp(t[s],e,n,r,i);else{let s=Bt(),o=be(),a=Zt(),u=Os(t)?t:wt(t.provide),l=JT(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Os(t)||!t.multi){let _=new wi(l,i,He),C=dp(u,e,i?h:h+m,p);C===-1?(bp(dl(a,o),s,u),lp(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[C]=_,o[C]=_)}else{let _=dp(u,e,h+m,p),C=dp(u,e,h,h+m),M=_>=0&&n[_],R=C>=0&&n[C];if(i&&!R||!i&&!M){bp(dl(a,o),s,u);let k=PF(i?xF:NF,n.length,i,r,l);!i&&R&&(n[C].providerFactory=k),lp(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=SD(n[i?C:_],l,!i&&r);lp(s,t,_>-1?_:C,k)}!i&&r&&R&&n[C].componentProviders++}}}function lp(t,e,n,r){let i=Os(e),s=QP(e);if(i||s){let u=(s?wt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function SD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function NF(t,e,n,r){return Xp(this.multi,[])}function xF(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Vs(n,n[re],this.providerFactory.index,r);s=a.slice(0,o),Xp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Xp(i,s);return s}function Xp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function PF(t,e,n,r,i){let s=new wi(t,n,He);return s.multi=[],s.index=e,s.componentProviders=0,SD(s,i,r&&!n),s}function jg(t,e=[]){return n=>{n.providersResolver=(r,i)=>MF(r,i?i(t):t,e)}}var kF=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=KT(!1,n.type),i=r.length>0?Vl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(K(Mt))})}}return t})();function An(t){Na("NgStandalone"),t.getStandaloneInjector=e=>e.get(kF).getOrCreateStandaloneInjector(t)}function OF(t,e){let n=t[e];return n===Ai?void 0:n}function FF(t,e,n,r,i,s){let o=e+n;return Si(t,o,i)?Z1(t,o+1,s?r.call(s,i):r(i)):OF(t,o+1)}function xa(t,e){let n=Bt(),r,i=t+Nt;n.firstCreatePass?(r=LF(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=mi(r.type,!0)),o,a=St(He);try{let u=ll(!1),l=s();return ll(u),SF(n,be(),i,l),l}finally{St(a)}}function LF(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Pa(t,e,n){let r=t+Nt,i=be(),s=ab(i,r);return VF(i,r)?FF(i,Dk(),e,s.transform,n,s):s.transform(n)}function VF(t,e){return t[re].data[e].pure}var Jn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},RD=new Jn("17.3.12"),Bl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var MD=new j("");function jr(t){return!!t&&typeof t.then=="function"}function Bg(t){return!!t&&typeof t.subscribe=="function"}var Ws=new j(""),ND=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=x(Ws,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(jr(s))n.push(s);else if(Bg(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$l=new j("");function UF(){wE(()=>{throw new W(600,!1)})}function jF(t){return t.isBoundToModule}function BF(t,e,n){try{let r=n();return jr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ka=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(xb),this.afterRenderEffectManager=x(Lg),this.externalTestViews=new Set,this.beforeRender=new _t,this.afterTick=new _t,this.componentTypes=[],this.components=[],this.isStable=x(Ul).hasPendingTasks.pipe(Z(n=>!n)),this._injector=x(Mt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof ml;if(!this._injector.get(ND).done){let m=!i&&qT(n),_=!1;throw new W(405,_)}let o;i?o=n:o=this._injector.get(Ol).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=jF(o)?void 0:this._injector.get(kr),u=r||o.selector,l=o.create(Ue.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(MD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),hp(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new W(101,!1);let r=ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ae(r)}}detectChangesInAttachedViews(n){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===gD)throw new W(103,!1);if(n){let s=r===0;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)$F(o,s,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>eg(s))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>eg(s))))break}}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;hp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get($l,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>hp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function hp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $F(t,e,n){!e&&!eg(t)||HF(t,n,e)}function eg(t){return fg(t)}function HF(t,e,n){let r;n?(r=0,t[Y]|=1024):t[Y]&64?r=0:r=1,mD(t,e,r)}var tg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hl=(()=>{class t{compileModuleSync(n){return new $p(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=zT(n),s=$b(i.declarations).reduce((o,a)=>{let u=xr(a);return u&&o.push(new js(u)),o},[]);return new tg(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var qF=(()=>{class t{constructor(){this.zone=x(ce),this.applicationRef=x(ka)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function zF(t){return[{provide:ce,useFactory:t},{provide:ks,multi:!0,useFactory:()=>{let e=x(qF,{optional:!0});return()=>e.initialize()}},{provide:ks,multi:!0,useFactory:()=>{let e=x(QF);return()=>{e.initialize()}}},{provide:xb,useFactory:GF}]}function GF(){let t=x(ce),e=x(Dn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function WF(t){let e=zF(()=>new ce(KF(t)));return ht([[],e])}function KF(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var QF=(()=>{class t{constructor(){this.subscription=new Ve,this.initialized=!1,this.zone=x(ce),this.pendingTasks=x(Ul)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ce.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ce.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function YF(){return typeof $localize<"u"&&$localize.locale||Il}var $g=new j("",{providedIn:"root",factory:()=>x($g,se.Optional|se.SkipSelf)||YF()});var xD=new j("");var el=null;function JF(t=[],e){return Ue.create({name:e,providers:[{provide:bl,useValue:"platform"},{provide:xD,useValue:new Set([()=>el=null])},...t]})}function ZF(t=[]){if(el)return el;let e=JF(t);return el=e,UF(),XF(e),e}function XF(t){t.get(Tg,null)?.forEach(n=>n())}function PD(){return!1}var Br=(()=>{class t{static{this.__NG_ELEMENT_ID__=eL}}return t})();function eL(t){return tL(Zt(),be(),(t&16)===16)}function tL(t,e,n){if(Al(t)&&!n){let r=Lr(t.index,e);return new Us(r,r)}else if(t.type&47){let r=e[dn];return new Us(r,e)}return null}function kD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=ZF(r),s=[WF(),...n||[]],a=new vl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ce);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Dn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>a.destroy(),m=i.get(xD);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),BF(l,u,()=>{let _=a.get(ND);return _.runInitializers(),_.donePromise.then(()=>{let C=a.get($g,Il);CF(C||Il);let M=a.get(ka);return e!==void 0&&M.bootstrap(e),M})})})}catch(e){return Promise.reject(e)}}function ql(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Hg(t){let e=ae(null);try{return t()}finally{ae(e)}}function OD(t){let e=xr(t);if(!e)return null;let n=new js(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var VD=null;function rr(){return VD}function UD(t){VD??=t}var zl=class{};var xt=new j(""),Kg=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(iL),providedIn:"platform"})}}return t})(),jD=new j(""),iL=(()=>{class t extends Kg{constructor(){super(),this._doc=x(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rr().getBaseHref(this._doc)}onPopState(n){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Qg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function FD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function nr(t){return t&&t[0]!=="?"?"?"+t:t}var xi=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(Yg),providedIn:"root"})}}return t})(),BD=new j(""),Yg=(()=>{class t extends xi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Qg(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+nr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+nr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+nr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(K(Kg),K(BD,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$D=(()=>{class t extends xi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Qg(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+nr(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+nr(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(K(Kg),K(BD,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Ks=(()=>{class t{constructor(n){this._subject=new It,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=aL(FD(LD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+nr(r))}normalize(n){return t.stripTrailingSlash(oL(this._basePath,LD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+nr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=nr}static{this.joinWithSlash=Qg}static{this.stripTrailingSlash=FD}static{this.\u0275fac=function(r){return new(r||t)(K(xi))}}static{this.\u0275prov=H({token:t,factory:()=>sL(),providedIn:"root"})}}return t})();function sL(){return new Ks(K(xi))}function oL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function LD(t){return t.replace(/\/index.html$/,"")}function aL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function HD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function cL(t,e){return new W(2100,!1)}var qg=class{createSubscription(e,n){return Hg(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Hg(()=>e.unsubscribe())}},zg=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},uL=new zg,lL=new qg,Wl=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(jr(n))return uL;if(Bg(n))return lL;throw cL(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(He(Br,16))}}static{this.\u0275pipe=BT({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var Jg="browser",dL="server";function hL(t){return t===Jg}function Oa(t){return t===dL}var qD=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>hL(x($t))?new Gg(x(xt),window):new Wg})}}return t})(),Gg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=fL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function fL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Wg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Gl=class{};var em=class extends zl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tm=class t extends em{static makeCurrent(){UD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=pL();return n==null?null:gL(n)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return HD(document.cookie,e)}},Fa=null;function pL(){return Fa=Fa||document.querySelector("base"),Fa?Fa.getAttribute("href"):null}function gL(t){return new URL(t,document.baseURI).pathname}var mL=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),nm=new j(""),KD=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(K(nm),K(ce))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Kl=class{constructor(e){this._doc=e}},Zg="ng-app-id",QD=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Oa(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Zg}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Zg),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Zg,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(K(xt),K(Eg),K(bg,8),K($t))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Xg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},im=/%COMP%/g,YD="%COMP%",yL=`_nghost-${YD}`,vL=`_ngcontent-${YD}`,_L=!0,wL=new j("",{providedIn:"root",factory:()=>_L});function IL(t){return vL.replace(im,t)}function EL(t){return yL.replace(im,t)}function JD(t,e){return e.map(n=>n.replace(im,t))}var zD=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Oa(a),this.defaultRenderer=new La(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r=Te(L({},r),{encapsulation:Tn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Ql?i.applyToHost(n):i instanceof Va&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Tn.Emulated:s=new Ql(u,l,r,this.appId,h,o,a,p);break;case Tn.ShadowDom:return new rm(u,l,n,r,o,a,this.nonce,p);default:s=new Va(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(K(KD),K(QD),K(Eg),K(wL),K(xt),K($t),K(ce),K(bg))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),La=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Xg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(GD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Xg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Xg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qn.DashCase|Qn.Important)?e.style.setProperty(n,r,i&Qn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function GD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var rm=class extends La{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=JD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Va=class extends La{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?JD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ql=class extends Va{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=IL(l),this.hostAttr=EL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},TL=(()=>{class t extends Kl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(K(xt))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),WD=["alt","control","meta","shift"],bL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},CL=(()=>{class t extends Kl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),WD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=bL[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),WD.forEach(o=>{if(o!==i){let a=DL[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(K(xt))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function ZD(t,e){return kD(L({rootComponent:t},AL(e)))}function AL(t){return{appProviders:[...xL,...t?.providers??[]],platformProviders:NL}}function SL(){tm.makeCurrent()}function RL(){return new Dn}function ML(){return Vb(document),document}var NL=[{provide:$t,useValue:Jg},{provide:Tg,useValue:SL,multi:!0},{provide:xt,useFactory:ML,deps:[]}];var xL=[{provide:bl,useValue:"root"},{provide:Dn,useFactory:RL,deps:[]},{provide:nm,useClass:TL,multi:!0,deps:[xt,ce,$t]},{provide:nm,useClass:CL,multi:!0,deps:[xt]},zD,QD,KD,{provide:Ea,useExisting:zD},{provide:Gl,useClass:mL,deps:[]},[]];var XD=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(K(xt))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var tC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},kL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Yl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new om;let m=s<<2|a>>4;if(r.push(m),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},om=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OL=function(t){let e=tC(t);return Yl.encodeByteArray(e,!0)},Ua=function(t){return OL(t).replace(/\./g,"")},cm=function(t){try{return Yl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function um(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var FL=()=>um().__FIREBASE_DEFAULTS__,LL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&cm(t[1]);return e&&JSON.parse(e)},Jl=()=>{try{return FL()||LL()||VL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lm=t=>{var e,n;return(n=(e=Jl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zl=t=>{let e=lm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dm=()=>{var t;return(t=Jl())===null||t===void 0?void 0:t.config},hm=t=>{var e;return(e=Jl())===null||e===void 0?void 0:e[`_${t}`]};var ir=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Xl(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ua(JSON.stringify(n)),Ua(JSON.stringify(o)),""].join(".")}function Ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function UL(){var t;let e=(t=Jl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oC(){let t=Ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aC(){return!UL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $r(){try{return typeof indexedDB=="object"}catch{return!1}}function ed(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function cC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var jL="FirebaseError",rt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}},Tt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?BL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new rt(i,a,r)}};function BL(t,e){return t.replace($L,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $L=/\{\$([^}]+)}/g;function uC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(eC(s)&&eC(o)){if(!Pi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function eC(t){return t!==null&&typeof t=="object"}function Qs(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lC(t,e){let n=new am(t,e);return n.subscribe.bind(n)}var am=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sm),i.error===void 0&&(i.error=sm),i.complete===void 0&&(i.complete=sm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function HL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sm(){}var dC=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})};var qL=1e3,zL=2,GL=4*60*60*1e3,WL=.5;function hC(t,e=qL,n=zL){let r=e*Math.pow(n,t),i=Math.round(WL*r*(Math.random()-.5)*2);return Math.min(GL,r+i)}function _e(t){return t&&t._delegate?t._delegate:t}var Pe=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ki="[DEFAULT]";var fm=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ir;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QL(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function KL(t){return t===ki?void 0:t}function QL(t){return t.instantiationMode==="EAGER"}var td=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new fm(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var YL=[],de=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(de||{}),JL={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ZL=de.INFO,XL={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},eV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=XL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sn=class{constructor(e){this.name=e,this._logLevel=ZL,this._logHandler=eV,this._userLogHandler=null,YL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}};var tV=(t,e)=>e.some(n=>t instanceof n),fC,pC;function nV(){return fC||(fC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rV(){return pC||(pC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var gC=new WeakMap,gm=new WeakMap,mC=new WeakMap,pm=new WeakMap,ym=new WeakMap;function iV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(gn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gC.set(n,t)}).catch(()=>{}),ym.set(e,t),e}function sV(t){if(gm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gm.set(t,e)}var mm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yC(t){mm=t(mm)}function oV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(nd(this),e,...n);return mC.set(r,e.sort?e.sort():[e]),gn(r)}:rV().includes(t)?function(...e){return t.apply(nd(this),e),gn(gC.get(this))}:function(...e){return gn(t.apply(nd(this),e))}}function aV(t){return typeof t=="function"?oV(t):(t instanceof IDBTransaction&&sV(t),tV(t,nV())?new Proxy(t,mm):t)}function gn(t){if(t instanceof IDBRequest)return iV(t);if(pm.has(t))return pm.get(t);let e=aV(t);return e!==t&&(pm.set(t,e),ym.set(e,t)),e}var nd=t=>ym.get(t);function Oi(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=gn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(gn(o.result),u.oldVersion,u.newVersion,gn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function rd(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),gn(n).then(()=>{})}var cV=["get","getKey","getAll","getAllKeys","count"],uV=["put","add","delete","clear"],vm=new Map;function vC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vm.get(e))return vm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=uV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cV.includes(n)))return;let s=function(o,...a){return y(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return vm.set(e,s),s}yC(t=>Te(L({},t),{get:(e,n,r)=>vC(e,n)||t.get(e,n,r),has:(e,n)=>!!vC(e,n)||t.has(e,n)}));var wm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function lV(t){let e=t.getComponent();return e?.type==="VERSION"}var Im="@firebase/app",_C="0.10.13";var sr=new Sn("@firebase/app"),dV="@firebase/app-compat",hV="@firebase/analytics-compat",fV="@firebase/analytics",pV="@firebase/app-check-compat",gV="@firebase/app-check",mV="@firebase/auth",yV="@firebase/auth-compat",vV="@firebase/database",_V="@firebase/data-connect",wV="@firebase/database-compat",IV="@firebase/functions",EV="@firebase/functions-compat",TV="@firebase/installations",bV="@firebase/installations-compat",DV="@firebase/messaging",CV="@firebase/messaging-compat",AV="@firebase/performance",SV="@firebase/performance-compat",RV="@firebase/remote-config",MV="@firebase/remote-config-compat",NV="@firebase/storage",xV="@firebase/storage-compat",PV="@firebase/firestore",kV="@firebase/vertexai-preview",OV="@firebase/firestore-compat",FV="firebase",LV="10.14.1";var Em="[DEFAULT]",VV={[Im]:"fire-core",[dV]:"fire-core-compat",[fV]:"fire-analytics",[hV]:"fire-analytics-compat",[gV]:"fire-app-check",[pV]:"fire-app-check-compat",[mV]:"fire-auth",[yV]:"fire-auth-compat",[vV]:"fire-rtdb",[_V]:"fire-data-connect",[wV]:"fire-rtdb-compat",[IV]:"fire-fn",[EV]:"fire-fn-compat",[TV]:"fire-iid",[bV]:"fire-iid-compat",[DV]:"fire-fcm",[CV]:"fire-fcm-compat",[AV]:"fire-perf",[SV]:"fire-perf-compat",[RV]:"fire-rc",[MV]:"fire-rc-compat",[NV]:"fire-gcs",[xV]:"fire-gcs-compat",[PV]:"fire-fst",[OV]:"fire-fst-compat",[kV]:"fire-vertex","fire-js":"fire-js",[FV]:"fire-js-all"};var ja=new Map,UV=new Map,Tm=new Map;function wC(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qe(t){let e=t.name;if(Tm.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Tm.set(e,t);for(let n of ja.values())wC(n,t);for(let n of UV.values())wC(n,t);return!0}function bt(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rn(t){return t.settings!==void 0}var jV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hr=new Tt("app","Firebase",jV);var bm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hr.create("app-deleted",{appName:this._name})}};var Mn=LV;function Am(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Em,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hr.create("bad-app-name",{appName:String(i)});if(n||(n=dm()),!n)throw Hr.create("no-options");let s=ja.get(i);if(s){if(Pi(n,s.options)&&Pi(r,s.config))return s;throw Hr.create("duplicate-app",{appName:i})}let o=new td(i);for(let u of Tm.values())o.addComponent(u);let a=new bm(n,r,o);return ja.set(i,a),a}function Pt(t=Em){let e=ja.get(t);if(!e&&t===Em&&dm())return Am();if(!e)throw Hr.create("no-app",{appName:t});return e}function id(){return Array.from(ja.values())}function ue(t,e,n){var r;let i=(r=VV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(a.join(" "));return}Qe(new Pe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var BV="firebase-heartbeat-database",$V=1,Ba="firebase-heartbeat-store",_m=null;function bC(){return _m||(_m=Oi(BV,$V,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Hr.create("idb-open",{originalErrorMessage:t.message})})),_m}function HV(t){return y(this,null,function*(){try{let n=(yield bC()).transaction(Ba),r=yield n.objectStore(Ba).get(DC(t));return yield n.done,r}catch(e){if(e instanceof rt)sr.warn(e.message);else{let n=Hr.create("idb-get",{originalErrorMessage:e?.message});sr.warn(n.message)}}})}function IC(t,e){return y(this,null,function*(){try{let r=(yield bC()).transaction(Ba,"readwrite");yield r.objectStore(Ba).put(e,DC(t)),yield r.done}catch(n){if(n instanceof rt)sr.warn(n.message);else{let r=Hr.create("idb-set",{originalErrorMessage:n?.message});sr.warn(r.message)}}})}function DC(t){return`${t.name}!${t.options.appId}`}var qV=1024,zV=30*24*60*60*1e3,Dm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Cm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=EC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=zV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=EC(),{heartbeatsToSend:r,unsentEntries:i}=GV(this._heartbeatsCache.heartbeats),s=Ua(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return sr.warn(n),""}})}};function EC(){return new Date().toISOString().substring(0,10)}function GV(t,e=qV){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),TC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),TC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Cm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return $r()?ed().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield HV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return IC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return IC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function TC(t){return Ua(JSON.stringify({version:2,heartbeats:t})).length}function WV(t){Qe(new Pe("platform-logger",e=>new wm(e),"PRIVATE")),Qe(new Pe("heartbeat",e=>new Dm(e),"PRIVATE")),ue(Im,_C,t),ue(Im,_C,"esm2017"),ue("fire-js","")}WV("");var KV="firebase",QV="10.14.1";ue(KV,QV,"app");var qt=new Jn("ANGULARFIRE2_VERSION"),CC=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function xn(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Pn=(t,e)=>{let n=e?[e]:id(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Nn=class{constructor(){return Pn(Rm)}},Rm="app-check";function Ys(){}var sd=class{zone;delegate;constructor(e,n=zf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Sm=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ys,{},Ys,Ys)),n.pipe(We({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},en=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sd(Zone.current)),this.insideAngular=n.run(()=>new sd(Zone.current,qf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(K(ce))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function od(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function YV(t){return od().ngZone.runOutsideAngular(()=>t())}function Fi(t){return od().ngZone.run(()=>t())}function JV(t){return ZV(od())(t)}function ZV(t){return function(n){return n=n.lift(new Sm(t.ngZone)),n.pipe(Ar(t.outsideAngular),Cr(t.insideAngular))}}var XV=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Fi(()=>t.apply(void 0,r))},ve=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Fi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ys,{},Ys,Ys))),r[s]=XV(r[s],n));let i=YV(()=>t.apply(this,r));if(!e)if(i instanceof ie){let s=od();return i.pipe(Ar(s.outsideAngular),Cr(s.insideAngular))}else return Fi(()=>i);return i instanceof ie?i.pipe(JV):i instanceof Promise?Fi(()=>new Promise((s,o)=>i.then(a=>Fi(()=>s(a)),a=>Fi(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Fi(()=>i)};var Dt=class{constructor(e){return e}},zt=class{constructor(){return id()}};function eU(t){return t&&t.length===1?t[0]:new Dt(Pt())}var Mm=new j("angularfire2._apps"),tU={provide:Dt,useFactory:eU,deps:[[new Se,Mm]]},nU={provide:zt,deps:[[new Se,Mm]]};function rU(t){return(e,n)=>{let r=n.get($t);ue("angularfire",qt.full,"core"),ue("angularfire",qt.full,"app"),ue("angular",RD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Dt(i)}}function AC(t,...e){return ht([tU,nU,{provide:Mm,useFactory:rU(t),multi:!0,deps:[ce,Ue,en,...e]}])}var SC=ve(Pt,!0);var RC=ve(Am,!0);function qC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zC=qC,GC=new Tt("auth","Firebase",qC());var hd=new Sn("@firebase/auth");function iU(t,...e){hd.logLevel<=de.WARN&&hd.warn(`Auth (${Mn}): ${t}`,...e)}function cd(t,...e){hd.logLevel<=de.ERROR&&hd.error(`Auth (${Mn}): ${t}`,...e)}function On(t,...e){throw Km(t,...e)}function mn(t,...e){return Km(t,...e)}function Wm(t,e,n){let r=Object.assign(Object.assign({},zC()),{[e]:n});return new Tt("auth","Firebase",r).create(e,{appName:t.name})}function Li(t){return Wm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sU(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&On(t,"argument-error"),Wm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Km(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GC.create(t,...e)}function J(t,e,...n){if(!t)throw Km(e,...n)}function or(t){let e="INTERNAL ASSERTION FAILED: "+t;throw cd(e),new Error(e)}function cr(t,e){t||or(e)}function Pm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oU(){return MC()==="http:"||MC()==="https:"}function MC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function aU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oU()||iC()||"connection"in navigator)?navigator.onLine:!0}function cU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Vi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=nC()||sC()}get(){return aU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Qm(t,e){cr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var fd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var lU=new Vi(3e4,6e4);function Ym(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Xs(s,o,a,u){return y(this,arguments,function*(t,e,n,r,i={}){return WC(t,i,()=>y(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Qs(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:m},l);return rC()||(_.referrerPolicy="no-referrer"),fd.fetch()(KC(t,t.config.apiHost,n,p),_)}))})}function WC(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},uU),e);try{let i=new km(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ad(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ad(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ad(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Wm(t,h,l);On(t,h)}}catch(i){if(i instanceof rt)throw i;On(t,"network-request-failed",{message:String(i)})}})}function dU(s,o,a,u){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield Xs(t,e,n,r,i);return"mfaPendingCredential"in l&&On(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function KC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Qm(t.config,i):`${t.config.apiScheme}://${i}`}var km=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),lU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ad(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=mn(t,e,r);return i.customData._tokenResponse=n,i}function hU(t,e){return y(this,null,function*(){return Xs(t,"POST","/v1/accounts:delete",e)})}function QC(t,e){return y(this,null,function*(){return Xs(t,"POST","/v1/accounts:lookup",e)})}function $a(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Jm(t,e=!1){return y(this,null,function*(){let n=_e(t),r=yield n.getIdToken(e),i=Zm(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:$a(Nm(i.auth_time)),issuedAtTime:$a(Nm(i.iat)),expirationTime:$a(Nm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Nm(t){return Number(t)*1e3}function Zm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{let i=cm(n);return i?JSON.parse(i):(cd("Failed to decode base64 JWT payload"),null)}catch(i){return cd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function NC(t){let e=Zm(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qa(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof rt&&fU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function fU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Om=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var za=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pd(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield qa(t,QC(n,{idToken:r}));J(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YC(s.providerUserInfo):[],a=pU(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new za(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Xm(t){return y(this,null,function*(){let e=_e(t);yield pd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function pU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YC(t){return t.map(e=>{var{providerId:n}=e,r=Ru(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gU(t,e){return y(this,null,function*(){let n=yield WC(t,{},()=>y(this,null,function*(){let r=Qs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=KC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function mU(t,e){return y(this,null,function*(){return Xs(t,"POST","/v2/accounts:revokeToken",Ym(t,e))})}var Ha=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");let n=NC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield gU(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return or("not implemented")}};function qr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Zs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ru(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Om(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new za(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield qa(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Jm(this,e)}reload(){return Xm(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield pd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Rn(this.auth.app))return Promise.reject(Li(this.auth));let e=yield this.getIdToken();return yield qa(this,hU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,M=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:$,isAnonymous:Ie,providerData:z,stsTokenManager:E}=n;J(V&&E,e,"internal-error");let v=Ha.fromJSON(this.name,E);J(typeof V=="string",e,"internal-error"),qr(p,e.name),qr(m,e.name),J(typeof $=="boolean",e,"internal-error"),J(typeof Ie=="boolean",e,"internal-error"),qr(_,e.name),qr(C,e.name),qr(M,e.name),qr(R,e.name),qr(k,e.name),qr(B,e.name);let w=new t({uid:V,auth:e,email:m,emailVerified:$,displayName:p,isAnonymous:Ie,photoURL:C,phoneNumber:_,tenantId:M,stsTokenManager:v,createdAt:k,lastLoginAt:B});return z&&Array.isArray(z)&&(w.providerData=z.map(T=>Object.assign({},T))),R&&(w._redirectEventId=R),w}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new Ha;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?YC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ha;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new za(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var xC=new Map;function ar(t){cr(t instanceof Function,"Expected a class definition");let e=xC.get(t);return e?(cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xC.set(t,e),e)}var yU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Fm=yU;function ud(t,e,n){return`firebase:${t}:${e}:${n}`}var gd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ud(this.userKey,i.apiKey,s),this.fullPersistenceKey=ud("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Zs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(ar(Fm),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ar(Fm),o=ud(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Zs._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function PC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(JC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n0(e))return"Blackberry";if(r0(e))return"Webos";if(ZC(e))return"Safari";if((e.includes("chrome/")||XC(e))&&!e.includes("edge/"))return"Chrome";if(t0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function JC(t=Ze()){return/firefox\//i.test(t)}function ZC(t=Ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XC(t=Ze()){return/crios\//i.test(t)}function e0(t=Ze()){return/iemobile/i.test(t)}function t0(t=Ze()){return/android/i.test(t)}function n0(t=Ze()){return/blackberry/i.test(t)}function r0(t=Ze()){return/webos/i.test(t)}function ey(t=Ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vU(t=Ze()){var e;return ey(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _U(){return oC()&&document.documentMode===10}function i0(t=Ze()){return ey(t)||t0(t)||r0(t)||n0(t)||/windows phone/i.test(t)||e0(t)}function s0(t,e=[]){let n;switch(t){case"Browser":n=PC(Ze());break;case"Worker":n=`${PC(Ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mn}/${r}`}var Lm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wU(n){return y(this,arguments,function*(t,e={}){return Xs(t,"GET","/v2/passwordPolicy",Ym(t,e))})}var IU=6,Vm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:IU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Um=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new md(this),this.idTokenSubscription=new md(this),this.beforeStateQueue=new Lm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield gd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield QC(this,{idToken:e}),r=yield Zs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(Rn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield pd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cU()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Rn(this.app))return Promise.reject(Li(this));let n=e?_e(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Rn(this.app)?Promise.reject(Li(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Rn(this.app)?Promise.reject(Li(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(ar(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield wU(this),n=new Vm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield mU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ar(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=yield gd.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&iU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function bd(t){return _e(t)}var md=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=lC(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ty={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EU(t){ty=t}function TU(t){return ty.loadJS(t)}function bU(){return ty.gapiScript}function o0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function ny(t,e){let n=bt(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Pi(s,e??{}))return i;On(i,"already-initialized")}return n.initialize({options:e})}function DU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ar);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ry(t,e,n){let r=bd(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=a0(e),{host:o,port:a}=CU(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||AU()}function a0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CU(t){let e=a0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:kC(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:kC(o)}}}function kC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function AU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ga=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}};function Js(t,e){return y(this,null,function*(){return dU(t,"POST","/v1/accounts:signInWithIdp",Ym(t,e))})}var SU="http://localhost",yd=class t extends Ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ru(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Js(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Js(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Js(e,n)}buildRequest(){let e={requestUri:SU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qs(n)}return e}};var Wa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vd=class extends Wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Dd=(()=>{class t extends vd{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return yd._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();var Ka=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield Zs._fromIdTokenResponse(e,r,i),o=OC(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=OC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function OC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var jm=class t extends rt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function c0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jm._fromErrorAndOperation(t,s,e,r):s})}function RU(t,e,n=!1){return y(this,null,function*(){let r=yield qa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ka._forOperation(t,"link",r)})}function MU(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(Rn(r.app))return Promise.reject(Li(r));let i="reauthenticate";try{let s=yield qa(t,c0(r,i,e,t),n);J(s.idToken,r,"internal-error");let o=Zm(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Ka._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&On(r,"user-mismatch"),s}})}function NU(t,e,n=!1){return y(this,null,function*(){if(Rn(t.app))return Promise.reject(Li(t));let r="signIn",i=yield c0(t,r,e),s=yield Ka._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Ya(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function iy(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function sy(t){return _e(t).signOut()}var _d="__sak";var wd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var xU=1e3,PU=10,kU=(()=>{class t extends wd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);_U()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,PU):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},xU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield br(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield br(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield br(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),u0=kU;var OU=(()=>{class t extends wd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),oy=OU;function FU(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var LU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>y(this,null,function*(){return h(r.origin,o)})),l=yield FU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ay(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Bm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=ay("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function kn(){return window}function VU(t){kn().location.href=t}function l0(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}function UU(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function jU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function BU(){return l0()?self:null}var d0="firebaseLocalStorageDb",$U=1,Id="firebaseLocalStorage",h0="fbase_key",Ui=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Cd(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function HU(){let t=indexedDB.deleteDatabase(d0);return new Ui(t).toPromise()}function $m(){let t=indexedDB.open(d0,$U);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Id,{keyPath:h0})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),yield HU(),e(yield $m()))}))})}function FC(t,e,n){return y(this,null,function*(){let r=Cd(t,!0).put({[h0]:e,value:n});return new Ui(r).toPromise()})}function qU(t,e){return y(this,null,function*(){let n=Cd(t,!1).get(e),r=yield new Ui(n).toPromise();return r===void 0?null:r.value})}function LC(t,e){let n=Cd(t,!0).delete(e);return new Ui(n).toPromise()}var zU=800,GU=3,WU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield $m(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>GU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return l0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=LU._getInstance(BU()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield UU(),!this.activeServiceWorker)return;this.sender=new Bm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||jU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield $m();return yield FC(n,_d,"1"),yield LC(n,_d),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>FC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>qU(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>LC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=Cd(s,!1).getAll();return new Ui(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),zU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),f0=WU;var tY=o0("rcb"),nY=new Vi(3e4,6e4);function p0(t,e){return e?ar(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Qa=class extends Ga{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Js(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function KU(t){return NU(t.auth,new Qa(t),t.bypassAuthState)}function QU(t){let{auth:e,user:n}=t;return J(n,e,"internal-error"),MU(n,new Qa(t),t.bypassAuthState)}function YU(t){return y(this,null,function*(){let{auth:e,user:n}=t;return J(n,e,"internal-error"),RU(n,new Qa(t),t.bypassAuthState)})}var Ed=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KU;case"linkViaPopup":case"linkViaRedirect":return YU;case"reauthViaPopup":case"reauthViaRedirect":return QU;default:On(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var JU=new Vi(2e3,1e4);function cy(t,e,n){return y(this,null,function*(){if(Rn(t.app))return Promise.reject(mn(t,"operation-not-supported-in-this-environment"));let r=bd(t);sU(t,e,Wa);let i=p0(r,n);return new ZU(r,"signInViaPopup",e,i).executeNotNull()})}var ZU=(()=>{class t extends Ed{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return y(this,null,function*(){let n=yield this.execute();return J(n,this.auth,"internal-error"),n})}onExecution(){return y(this,null,function*(){cr(this.filter.length===1,"Popup operations only handle one event");let n=ay();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,JU.get())};n()}}t.currentPopupAction=null;return t})(),XU="pendingRedirect",ld=new Map,Hm=class t extends Ed{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=ld.get(this.auth._key());if(!e){try{let r=(yield ej(this.resolver,this.auth))?yield br(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return br(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,br(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function ej(t,e){return y(this,null,function*(){let n=rj(e),r=nj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function tj(t,e){ld.set(t._key(),e)}function nj(t){return ar(t._redirectPersistence)}function rj(t){return ud(XU,t.config.apiKey,t.name)}function ij(t,e,n=!1){return y(this,null,function*(){if(Rn(t.app))return Promise.reject(Li(t));let r=bd(t),i=p0(r,e),o=yield new Hm(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var sj=10*60*1e3,qm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!g0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sj&&this.cachedEventUids.clear(),this.cachedEventUids.has(VC(e))}saveEventToCache(e){this.cachedEventUids.add(VC(e)),this.lastProcessedEventTime=Date.now()}};function VC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function g0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function oj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g0(t);default:return!1}}function aj(n){return y(this,arguments,function*(t,e={}){return Xs(t,"GET","/v1/projects",e)})}var cj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uj=/^https?/;function lj(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield aj(t);for(let n of e)try{if(dj(n))return}catch{}On(t,"unauthorized-domain")})}function dj(t){let e=Pm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!uj.test(n))return!1;if(cj.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var hj=new Vi(3e4,6e4);function UC(){let t=kn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fj(t){return new Promise((e,n)=>{var r,i,s;function o(){UC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UC(),n(mn(t,"network-request-failed"))},timeout:hj.get()})}if(!((i=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=kn().gapi)===null||s===void 0)&&s.load)o();else{let a=o0("iframefcb");return kn()[a]=()=>{gapi.load?o():n(mn(t,"network-request-failed"))},TU(`${bU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw dd=null,e})}var dd=null;function pj(t){return dd=dd||fj(t),dd}var gj=new Vi(5e3,15e3),mj="__/auth/iframe",yj="emulator/auth/iframe",vj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_j=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wj(t){let e=t.config;J(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Qm(e,yj):`https://${t.config.authDomain}/${mj}`,r={apiKey:e.apiKey,appName:t.name,v:Mn},i=_j.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qs(r).slice(1)}`}function Ij(t){return y(this,null,function*(){let e=yield pj(t),n=kn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:wj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vj,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=mn(t,"network-request-failed"),a=kn().setTimeout(()=>{s(o)},gj.get());function u(){kn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var Ej={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tj=500,bj=600,Dj="_blank",Cj="http://localhost",Td=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Aj(t,e,n,r=Tj,i=bj){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Ej),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ze().toLowerCase();n&&(a=XC(l)?Dj:n),JC(l)&&(e=e||Cj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[_,C])=>`${m}${_}=${C},`,"");if(vU(l)&&a!=="_self")return Sj(e||"",a),new Td(null);let p=window.open(e||"",a,h);J(p,t,"popup-blocked");try{p.focus()}catch{}return new Td(p)}function Sj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rj="__/auth/handler",Mj="emulator/auth/handler",Nj=encodeURIComponent("fac");function jC(t,e,n,r,i,s){return y(this,null,function*(){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mn,eventId:i};if(e instanceof Wa){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof vd){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${Nj}=${encodeURIComponent(u)}`:"";return`${xj(t)}?${Qs(a).slice(1)}${l}`})}function xj({config:t}){return t.emulator?Qm(t,Mj):`https://${t.authDomain}/${Rj}`}var xm="webStorageSupport",zm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oy,this._completeRedirectFn=ij,this._overrideRedirectResult=tj}_openPopup(e,n,r,i){return y(this,null,function*(){var s;cr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield jC(e,n,r,Pm(),i);return Aj(e,o,ay())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield jC(e,n,r,Pm(),i);return VU(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(cr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield Ij(e),r=new qm(e);return n.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xm,{type:xm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[xm];o!==void 0&&n(!!o),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return i0()||ZC()||ey()}},m0=zm;var BC="@firebase/auth",$C="1.7.9";var Gm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Pj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kj(t){Qe(new Pe("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s0(t)},l=new Um(r,i,s,u);return DU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qe(new Pe("auth-internal",e=>{let n=bd(e.getProvider("auth").getImmediate());return(r=>new Gm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ue(BC,$C,Pj(t)),ue(BC,$C,"esm2017")}var Oj=5*60,Fj=hm("authIdTokenMaxAge")||Oj,HC=null,Lj=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fj)return;let i=n?.token;HC!==i&&(HC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function uy(t=Pt()){let e=bt(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ny(t,{popupRedirectResolver:m0,persistence:[f0,u0,oy]}),r=hm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Lj(s.toString());iy(n,o,()=>o(n.currentUser)),Ya(n,a=>o(a))}}let i=lm("auth");return i&&ry(n,`http://${i}`),n}function Vj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}EU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=mn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Vj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kj("Browser");function _0(t){return new ie(function(e){var n=Ya(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var w0="auth",ur=class{constructor(e){return e}},ji=class{constructor(){return Pn(w0)}};var ly=new j("angularfire2.auth-instances");function S2(t,e){let n=xn(w0,t,e);return n&&new ur(n)}function R2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ur(r)}}var M2={provide:ji,deps:[[new Se,ly]]},N2={provide:ur,useFactory:S2,deps:[[new Se,ly],Dt]};function I0(t,...e){return ue("angularfire",qt.full,"auth"),ht([N2,M2,{provide:ly,useFactory:R2(t),multi:!0,deps:[ce,Ue,en,zt,[new Se,Nn],...e]}])}var Ad=ve(_0,!0);var E0=ve(uy,!0);var T0=ve(cy,!0);var b0=ve(sy,!0);var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},C0={};var zr,dy;(function(){var t;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(T,b,A){for(var I=Array(arguments.length-2),zn=2;zn<arguments.length;zn++)I[zn-2]=arguments[zn];return v.prototype[b].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)T[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],b=E.g[2];var A=E.g[3],I=v+(A^w&(b^A))+T[0]+3614090360&4294967295;v=w+(I<<7&4294967295|I>>>25),I=A+(b^v&(w^b))+T[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(w^A&(v^w))+T[2]+606105819&4294967295,b=A+(I<<17&4294967295|I>>>15),I=w+(v^b&(A^v))+T[3]+3250441966&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(A^w&(b^A))+T[4]+4118548399&4294967295,v=w+(I<<7&4294967295|I>>>25),I=A+(b^v&(w^b))+T[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(w^A&(v^w))+T[6]+2821735955&4294967295,b=A+(I<<17&4294967295|I>>>15),I=w+(v^b&(A^v))+T[7]+4249261313&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(A^w&(b^A))+T[8]+1770035416&4294967295,v=w+(I<<7&4294967295|I>>>25),I=A+(b^v&(w^b))+T[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(w^A&(v^w))+T[10]+4294925233&4294967295,b=A+(I<<17&4294967295|I>>>15),I=w+(v^b&(A^v))+T[11]+2304563134&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(A^w&(b^A))+T[12]+1804603682&4294967295,v=w+(I<<7&4294967295|I>>>25),I=A+(b^v&(w^b))+T[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(w^A&(v^w))+T[14]+2792965006&4294967295,b=A+(I<<17&4294967295|I>>>15),I=w+(v^b&(A^v))+T[15]+1236535329&4294967295,w=b+(I<<22&4294967295|I>>>10),I=v+(b^A&(w^b))+T[1]+4129170786&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^b&(v^w))+T[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(A^v))+T[11]+643717713&4294967295,b=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(b^A))+T[0]+3921069994&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(w^b))+T[5]+3593408605&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^b&(v^w))+T[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(A^v))+T[15]+3634488961&4294967295,b=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(b^A))+T[4]+3889429448&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(w^b))+T[9]+568446438&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^b&(v^w))+T[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(A^v))+T[3]+4107603335&4294967295,b=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(b^A))+T[8]+1163531501&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(w^b))+T[13]+2850285829&4294967295,v=w+(I<<5&4294967295|I>>>27),I=A+(w^b&(v^w))+T[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^w&(A^v))+T[7]+1735328473&4294967295,b=A+(I<<14&4294967295|I>>>18),I=w+(A^v&(b^A))+T[12]+2368359562&4294967295,w=b+(I<<20&4294967295|I>>>12),I=v+(w^b^A)+T[5]+4294588738&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^b)+T[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^w)+T[11]+1839030562&4294967295,b=A+(I<<16&4294967295|I>>>16),I=w+(b^A^v)+T[14]+4259657740&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(w^b^A)+T[1]+2763975236&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^b)+T[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^w)+T[7]+4139469664&4294967295,b=A+(I<<16&4294967295|I>>>16),I=w+(b^A^v)+T[10]+3200236656&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(w^b^A)+T[13]+681279174&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^b)+T[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^w)+T[3]+3572445317&4294967295,b=A+(I<<16&4294967295|I>>>16),I=w+(b^A^v)+T[6]+76029189&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(w^b^A)+T[9]+3654602809&4294967295,v=w+(I<<4&4294967295|I>>>28),I=A+(v^w^b)+T[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^w)+T[15]+530742520&4294967295,b=A+(I<<16&4294967295|I>>>16),I=w+(b^A^v)+T[2]+3299628645&4294967295,w=b+(I<<23&4294967295|I>>>9),I=v+(b^(w|~A))+T[0]+4096336452&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~b))+T[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~w))+T[14]+2878612391&4294967295,b=A+(I<<15&4294967295|I>>>17),I=w+(A^(b|~v))+T[5]+4237533241&4294967295,w=b+(I<<21&4294967295|I>>>11),I=v+(b^(w|~A))+T[12]+1700485571&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~b))+T[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~w))+T[10]+4293915773&4294967295,b=A+(I<<15&4294967295|I>>>17),I=w+(A^(b|~v))+T[1]+2240044497&4294967295,w=b+(I<<21&4294967295|I>>>11),I=v+(b^(w|~A))+T[8]+1873313359&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~b))+T[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~w))+T[6]+2734768916&4294967295,b=A+(I<<15&4294967295|I>>>17),I=w+(A^(b|~v))+T[13]+1309151649&4294967295,w=b+(I<<21&4294967295|I>>>11),I=v+(b^(w|~A))+T[4]+4149444226&4294967295,v=w+(I<<6&4294967295|I>>>26),I=A+(w^(v|~b))+T[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~w))+T[2]+718787259&4294967295,b=A+(I<<15&4294967295|I>>>17),I=w+(A^(b|~v))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=w;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(T[b++]=E.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=E[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var T=0;32>T;T+=8)E[w++]=this.g[v]>>>T&255;return E};function s(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function o(E,v){this.h=v;for(var w=[],T=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;T&&A==v||(w[b]=A,T=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var v=[],w=1,T=0;E>=w;T++)v[T]=E/w|0,w*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return R(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),T=p,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),I=parseInt(E.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(I))):(T=T.j(w),T=T.add(l(I)))}return T}var p=u(0),m=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(M(this))return-R(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var T=this.i(w);E+=(0<=T?T:4294967296+T)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(M(this))return"-"+R(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,T="";;){var b=$(w,v).g;w=k(w,b.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=b,C(w))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function M(E){return E.h==-1}t.l=function(E){return E=k(this,E),M(E)?-1:C(E)?0:1};function R(E){for(var v=E.g.length,w=[],T=0;T<v;T++)w[T]=~E.g[T];return new o(w,~E.h).add(m)}t.abs=function(){return M(this)?R(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(E.i(b)&65535),I=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);T=I>>>16,A&=65535,I&=65535,w[b]=I<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function k(E,v){return E.add(R(v))}t.j=function(E){if(C(this)||C(E))return p;if(M(this))return M(E)?R(this).j(R(E)):R(R(this).j(E));if(M(E))return R(this.j(R(E)));if(0>this.l(_)&&0>E.l(_))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],T=0;T<2*v;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<E.g.length;b++){var A=this.i(T)>>>16,I=this.i(T)&65535,zn=E.i(b)>>>16,jo=E.i(b)&65535;w[2*T+2*b]+=I*jo,B(w,2*T+2*b),w[2*T+2*b+1]+=A*jo,B(w,2*T+2*b+1),w[2*T+2*b+1]+=I*zn,B(w,2*T+2*b+1),w[2*T+2*b+2]+=A*zn,B(w,2*T+2*b+2)}for(T=0;T<v;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=v;T<2*v;T++)w[T]=0;return new o(w,0)};function B(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function $(E,v){if(C(v))throw Error("division by zero");if(C(E))return new V(p,p);if(M(E))return v=$(R(E),v),new V(R(v.g),R(v.h));if(M(v))return v=$(E,R(v)),new V(R(v.g),v.h);if(30<E.g.length){if(M(E)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,T=v;0>=T.l(E);)w=Ie(w),T=Ie(T);var b=z(w,1),A=z(T,1);for(T=z(T,2),w=z(w,2);!C(T);){var I=A.add(T);0>=I.l(E)&&(b=b.add(w),A=I),T=z(T,1),w=z(w,1)}return v=k(E,b.j(v)),new V(b,v)}for(b=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(w),I=A.j(v);M(I)||0<I.l(E);)w-=T,A=l(w),I=A.j(v);C(A)&&(A=m),b=b.add(A),E=k(E,I)}return new V(b,E)}t.A=function(E){return $(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)&E.i(T);return new o(w,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)|E.i(T);return new o(w,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)^E.i(T);return new o(w,this.h^E.h)};function Ie(E){for(var v=E.g.length+1,w=[],T=0;T<v;T++)w[T]=E.i(T)<<1|E.i(T-1)>>>31;return new o(w,E.h)}function z(E,v){var w=v>>5;v%=32;for(var T=E.g.length-w,b=[],A=0;A<T;A++)b[A]=0<v?E.i(A+w)>>>v|E.i(A+w+1)<<32-v:E.i(A+w);return new o(b,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dy=C0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,zr=C0.Integer=o}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lr={};var hy,P2,eo,fy,Ja,Rd,py,gy,my;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sd=="object"&&Sd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,S){for(var O=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)O[Ce-2]=arguments[Ce];return d.prototype[D].apply(g,O)}}function M(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,S=g.length||0;c.length=D+S;for(let O=0;O<S;O++)c[D+O]=g[O]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function $(c){return $[" "](c),c}$[" "]=function(){};var Ie=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let S=0;S<w.length;S++)f=w[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function I(){var c=sf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class zn{constructor(){this.h=this.g=null}add(d,f){let g=jo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var jo=new k(()=>new KN,c=>c.reset());class KN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Bo,$o=!1,sf=new zn,hI=()=>{let c=a.Promise.resolve(void 0);Bo=()=>{c.then(QN)}};var QN=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){A(f)}var d=jo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}$o=!1};function wr(){this.s=this.s,this.C=this.C}wr.prototype.s=!1,wr.prototype.ma=function(){this.s||(this.s=!0,this.N())},wr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var YN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ho(c,d){if(ot.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{$(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:JN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ho.aa.h.call(this)}}C(Ho,ot);var JN={2:"touch",3:"pen",4:"mouse"};Ho.prototype.h=function(){Ho.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qo="closure_listenable_"+(1e6*Math.random()|0),ZN=0;function XN(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++ZN,this.da=this.fa=!1}function nu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ru(c){this.src=c,this.g={},this.h=0}ru.prototype.add=function(c,d,f,g,D){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var O=af(c,d,g,D);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new XN(d,this.src,S,!!g,D),d.fa=f,c.push(d)),d};function of(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(g,D,1),S&&(nu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function af(c,d,f,g){for(var D=0;D<c.length;++D){var S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return D}return-1}var cf="closure_lm_"+(1e6*Math.random()|0),uf={};function fI(c,d,f,g,D){if(g&&g.once)return gI(c,d,f,g,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)fI(c,d[S],f,g,D);return null}return f=ff(f),c&&c[qo]?c.K(d,f,l(g)?!!g.capture:!!g,D):pI(c,d,f,!1,g,D)}function pI(c,d,f,g,D,S){if(!d)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Ce=df(c);if(Ce||(c[cf]=Ce=new ru(c)),f=Ce.add(d,f,g,O,S),f.proxy)return f;if(g=ex(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)YN||(D=O),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(yI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ex(){function c(f){return d.call(c.src,c.listener,f)}let d=tx;return c}function gI(c,d,f,g,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)gI(c,d[S],f,g,D);return null}return f=ff(f),c&&c[qo]?c.L(d,f,l(g)?!!g.capture:!!g,D):pI(c,d,f,!0,g,D)}function mI(c,d,f,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)mI(c,d[S],f,g,D);else g=l(g)?!!g.capture:!!g,f=ff(f),c&&c[qo]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=af(S,f,g,D),-1<f&&(nu(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=df(c))&&(d=c.g[d.toString()],c=-1,d&&(c=af(d,f,g,D)),(f=-1<c?d[c]:null)&&lf(f))}function lf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[qo])of(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(yI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=df(d))?(of(f,c),f.h==0&&(f.src=null,d[cf]=null)):nu(c)}}}function yI(c){return c in uf?uf[c]:uf[c]="on"+c}function tx(c,d){if(c.da)c=!0;else{d=new Ho(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&lf(c),c=f.call(g,d)}return c}function df(c){return c=c[cf],c instanceof ru?c:null}var hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function ff(c){return typeof c=="function"?c:(c[hf]||(c[hf]=function(d){return c.handleEvent(d)}),c[hf])}function at(){wr.call(this),this.i=new ru(this),this.M=this,this.F=null}C(at,wr),at.prototype[qo]=!0,at.prototype.removeEventListener=function(c,d,f,g){mI(this,c,d,f,g)};function yt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ot(d,c);else if(d instanceof ot)d.target=d.target||c;else{var D=d;d=new ot(g,c),T(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var O=d.g=f[S];D=iu(O,g,!0,d)&&D}if(O=d.g=c,D=iu(O,g,!0,d)&&D,D=iu(O,g,!1,d)&&D,f)for(S=0;S<f.length;S++)O=d.g=f[S],D=iu(O,g,!1,d)&&D}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)nu(f[g]);delete c.g[d],c.h--}}this.F=null},at.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},at.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function iu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==f){var Ce=O.listener,tt=O.ha||O.src;O.fa&&of(c.i,O),D=Ce.call(tt,g)!==!1&&D}}return D&&!g.defaultPrevented}function vI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function _I(c){c.g=vI(()=>{c.g=null,c.i&&(c.i=!1,_I(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class nx extends wr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_I(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zo(c){wr.call(this),this.h=c,this.g={}}C(zo,wr);var wI=[];function II(c){z(c.g,function(d,f){this.g.hasOwnProperty(f)&&lf(d)},c),c.g={}}zo.prototype.N=function(){zo.aa.N.call(this),II(this)},zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pf=a.JSON.stringify,rx=a.JSON.parse,ix=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function gf(){}gf.prototype.h=null;function EI(c){return c.h||(c.h=c.i())}function TI(){}var Go={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mf(){ot.call(this,"d")}C(mf,ot);function yf(){ot.call(this,"c")}C(yf,ot);var ii={},bI=null;function su(){return bI=bI||new at}ii.La="serverreachability";function DI(c){ot.call(this,ii.La,c)}C(DI,ot);function Wo(c){let d=su();yt(d,new DI(d))}ii.STAT_EVENT="statevent";function CI(c,d){ot.call(this,ii.STAT_EVENT,c),this.stat=d}C(CI,ot);function vt(c){let d=su();yt(d,new CI(d,c))}ii.Ma="timingevent";function AI(c,d){ot.call(this,ii.Ma,c),this.size=d}C(AI,ot);function Ko(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Qo(){this.g=!0}Qo.prototype.xa=function(){this.g=!1};function sx(c,d,f,g,D,S){c.info(function(){if(c.g)if(S)for(var O="",Ce=S.split("&"),tt=0;tt<Ce.length;tt++){var me=Ce[tt].split("=");if(1<me.length){var ct=me[0];me=me[1];var ut=ct.split("_");O=2<=ut.length&&ut[1]=="type"?O+(ct+"="+me+"&"):O+(ct+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+O})}function ox(c,d,f,g,D,S,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+O})}function us(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+cx(c,f)+(g?" "+g:"")})}function ax(c,d){c.info(function(){return"TIMEOUT: "+d})}Qo.prototype.info=function(){};function cx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return pf(f)}catch{return d}}var ou={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},SI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vf;function au(){}C(au,gf),au.prototype.g=function(){return new XMLHttpRequest},au.prototype.i=function(){return{}},vf=new au;function Ir(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new zo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RI}function RI(){this.i=null,this.g="",this.h=!1}var MI={},_f={};function wf(c,d,f){c.L=1,c.v=du(Gn(d)),c.m=f,c.P=!0,NI(c,null)}function NI(c,d){c.F=Date.now(),cu(c),c.A=Gn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),zI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new RI,c.g=uE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new nx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(wI[0]=D.toString()),D=wI);for(var S=0;S<D.length;S++){var O=fI(f,D[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Wo(),sx(c.i,c.u,c.A,c.l,c.R,c.m)}Ir.prototype.ca=function(c){c=c.target;let d=this.M;d&&Wn(c)==3?d.j():this.Y(c)},Ir.prototype.Y=function(c){try{if(c==this.g)e:{let ut=Wn(this.g);var d=this.g.Ba();let hs=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||ZI(this.g)))){this.J||ut!=4||d==7||(d==8||0>=hs?Wo(3):Wo(2)),If(this);var f=this.g.Z();this.X=f;t:if(xI(this)){var g=ZI(this.g);c="";var D=g.length,S=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),Yo(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,ox(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ce,tt=this.g;if((Ce=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ce)){var me=Ce;break t}}me=null}if(f=me)us(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ef(this,f);else{this.o=!1,this.s=3,vt(12),si(this),Yo(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<O.length;)if(sn=ux(this,O),sn==_f){ut==4&&(this.s=4,vt(14),f=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==MI){this.s=4,vt(15),us(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else us(this.i,this.l,sn,null),Ef(this,sn);if(xI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||O.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)us(this.i,this.l,O,"[Invalid Chunked Response]"),si(this),Yo(this);else if(0<O.length&&!this.W){this.W=!0;var ct=this.j;ct.g==this&&ct.ba&&!ct.M&&(ct.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Sf(ct),ct.M=!0,vt(11))}}else us(this.i,this.l,O,null),Ef(this,O);ut==4&&si(this),this.o&&!this.J&&(ut==4?sE(this.j,this):(this.o=!1,cu(this)))}else Cx(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),si(this),Yo(this)}}}catch{}finally{}};function xI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ux(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?_f:(f=Number(d.substring(f,g)),isNaN(f)?MI:(g+=1,g+f>d.length?_f:(d=d.slice(g,g+f),c.C=g+f,d)))}Ir.prototype.cancel=function(){this.J=!0,si(this)};function cu(c){c.S=Date.now()+c.I,PI(c,c.I)}function PI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ko(m(c.ba,c),d)}function If(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ir.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(ax(this.i,this.A),this.L!=2&&(Wo(),vt(17)),si(this),this.s=2,Yo(this)):PI(this,this.S-c)};function Yo(c){c.j.G==0||c.J||sE(c.j,c)}function si(c){If(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,II(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Ef(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Tf(f.h,c))){if(!c.K&&Tf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)mu(f),pu(f);else break e;Af(f),vt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ko(m(f.Za,f),6e3));if(1>=FI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ai(f,11)}else if((c.K||f.g==c)&&mu(f),!B(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let me=D[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let ct=me[3];ct!=null&&(f.la=ct,f.j.info("VER="+f.la));let ut=me[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));let hs=me[5];hs!=null&&typeof hs=="number"&&0<hs&&(g=1.5*hs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=c.g;if(sn){let vu=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vu){var S=g.h;S.g||vu.indexOf("spdy")==-1&&vu.indexOf("quic")==-1&&vu.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(bf(S,S.h),S.h=null))}if(g.D){let Rf=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Rf&&(g.ya=Rf,Re(g.I,g.D,Rf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=cE(g,g.J?g.ia:null,g.W),O.K){LI(g.h,O);var Ce=O,tt=g.L;tt&&(Ce.I=tt),Ce.B&&(If(Ce),cu(Ce)),g.g=O}else rE(g);0<f.i.length&&gu(f)}else me[0]!="stop"&&me[0]!="close"||ai(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ai(f,7):Cf(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Wo(4)}catch{}}var lx=class{constructor(c,d){this.g=c,this.map=d}};function kI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function FI(c){return c.h?1:c.g?c.g.size:0}function Tf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function bf(c,d){c.g?c.g.add(d):c.h=d}function LI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}kI.prototype.cancel=function(){if(this.i=VI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function VI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return M(c.i)}function dx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function hx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function UI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=hx(c),g=dx(c),D=g.length,S=0;S<D;S++)d.call(void 0,g[S],f&&f[S],c)}var jI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var S=c[f].substring(0,g);D=c[f].substring(g+1)}else S=c[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function oi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof oi){this.h=c.h,uu(this,c.j),this.o=c.o,this.g=c.g,lu(this,c.s),this.l=c.l;var d=c.i,f=new Xo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),BI(this,f),this.m=c.m}else c&&(d=String(c).match(jI))?(this.h=!1,uu(this,d[1]||"",!0),this.o=Jo(d[2]||""),this.g=Jo(d[3]||"",!0),lu(this,d[4]),this.l=Jo(d[5]||"",!0),BI(this,d[6]||"",!0),this.m=Jo(d[7]||"")):(this.h=!1,this.i=new Xo(null,this.h))}oi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Zo(d,$I,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Zo(d,$I,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Zo(f,f.charAt(0)=="/"?mx:gx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Zo(f,vx)),c.join("")};function Gn(c){return new oi(c)}function uu(c,d,f){c.j=f?Jo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function lu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function BI(c,d,f){d instanceof Xo?(c.i=d,_x(c.i,c.h)):(f||(d=Zo(d,yx)),c.i=new Xo(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function du(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Jo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Zo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,px),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function px(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $I=/[#\/\?@]/g,gx=/[#\?:]/g,mx=/[#\?]/g,yx=/[#\?@]/g,vx=/#/g;function Xo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Er(c){c.g||(c.g=new Map,c.h=0,c.i&&fx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Xo.prototype,t.add=function(c,d){Er(this),this.i=null,c=ls(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function HI(c,d){Er(c),d=ls(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function qI(c,d){return Er(c),d=ls(c,d),c.g.has(d)}t.forEach=function(c,d){Er(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},t.na=function(){Er(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let S=0;S<D.length;S++)f.push(d[g])}return f},t.V=function(c){Er(this);let d=[];if(typeof c=="string")qI(this,c)&&(d=d.concat(this.g.get(ls(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Er(this),this.i=null,c=ls(this,c),qI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function zI(c,d,f){HI(c,d),0<f.length&&(c.i=null,c.g.set(ls(c,d),M(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var D=S;O[g]!==""&&(D+="="+encodeURIComponent(String(O[g]))),c.push(D)}}return this.i=c.join("&")};function ls(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function _x(c,d){d&&!c.j&&(Er(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(HI(this,g),zI(this,D,f))},c)),c.j=d}function wx(c,d){let f=new Qo;if(a.Image){let g=new Image;g.onload=_(Tr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(Tr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(Tr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(Tr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Ix(c,d){let f=new Qo,g=new AbortController,D=setTimeout(()=>{g.abort(),Tr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?Tr(f,"TestPingServer: ok",!0,d):Tr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Tr(f,"TestPingServer: error",!1,d)})}function Tr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function Ex(){this.g=new ix}function Tx(c,d,f){let g=f||"";try{UI(c,function(D,S){let O=D;l(D)&&(O=pf(D)),d.push(g+S+"="+encodeURIComponent(O))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function ea(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ea,gf),ea.prototype.g=function(){return new hu(this.l,this.j)},ea.prototype.i=function(c){return function(){return c}}({});function hu(c,d){at.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(hu,at),t=hu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,na(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;GI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function GI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ta(this):na(this),this.readyState==3&&GI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ta(this))},t.Qa=function(c){this.g&&(this.response=c,ta(this))},t.ga=function(){this.g&&ta(this)};function ta(c){c.readyState=4,c.l=null,c.j=null,c.v=null,na(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function na(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function WI(c){let d="";return z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Df(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=WI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function Fe(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Fe,at);var bx=/^https?$/i,Dx=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vf.g(),this.v=this.o?EI(this.o):EI(vf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){KI(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Dx,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of f)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{JI(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){KI(this,S)}};function KI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,QI(c),fu(c)}function QI(c){c.A||(c.A=!0,yt(c,"complete"),yt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,yt(this,"complete"),yt(this,"abort"),fu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fu(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?YI(this):this.bb())},t.bb=function(){YI(this)};function YI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Wn(c)!=4||c.Z()!=2)){if(c.u&&Wn(c)==4)vI(c.Ea,0,c);else if(yt(c,"readystatechange"),Wn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var D=String(c.D).match(jI)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!bx.test(D?D.toLowerCase():"")}f=g}if(f)yt(c,"complete"),yt(c,"success");else{c.m=6;try{var S=2<Wn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",QI(c)}}finally{fu(c)}}}}function fu(c,d){if(c.g){JI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||yt(c,"ready");try{f.onreadystatechange=g}catch{}}}function JI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Wn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),rx(d)}};function ZI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cx(c){let d={};c=(c.g&&2<=Wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=b(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function XI(c){this.Aa=0,this.i=[],this.j=new Qo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,c),this.cb=ra("retryDelaySeedMs",1e4,c),this.Wa=ra("forwardChannelMaxRetries",2,c),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new kI(c&&c.concurrentRequestLimit),this.Da=new Ex,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=XI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){vt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=cE(this,null,this.W),gu(this)};function Cf(c){if(eE(c),c.G==3){var d=c.U++,f=Gn(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),ia(c,f),d=new Ir(c,c.j,d),d.L=2,d.v=du(Gn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=uE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),cu(d)}aE(c)}function pu(c){c.g&&(Sf(c),c.g.cancel(),c.g=null)}function eE(c){pu(c),c.u&&(a.clearTimeout(c.u),c.u=null),mu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function gu(c){if(!OI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Bo||hI(),$o||(Bo(),$o=!0),sf.add(d,c),c.B=0}}function Ax(c,d){return FI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ko(m(c.Ga,c,d),oE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Ir(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),T(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=nE(this,D,d),f=Gn(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),ia(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(WI(S)))+"&"+d:this.m&&Df(f,this.m,S)),bf(this.h,D),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),D.T=!0,wf(D,f,null)):wf(D,f,d),this.G=2}}else this.G==3&&(c?tE(this,c):this.i.length==0||OI(this.h)||tE(this))};function tE(c,d){var f;d?f=d.l:f=c.U++;let g=Gn(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),ia(c,g),c.m&&c.o&&Df(g,c.m,c.o),f=new Ir(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=nE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),bf(c.h,f),wf(f,g,d)}function ia(c,d){c.H&&z(c.H,function(f,g){Re(d,g,f)}),c.l&&UI({},function(f,g){Re(d,g,f)})}function nE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let S=-1;for(;;){let O=["count="+f];S==-1?0<f?(S=D[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let Ce=!0;for(let tt=0;tt<f;tt++){let me=D[tt].g,ct=D[tt].map;if(me-=S,0>me)S=Math.max(0,D[tt].g-100),Ce=!1;else try{Tx(ct,O,"req"+me+"_")}catch{g&&g(ct)}}if(Ce){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function rE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Bo||hI(),$o||(Bo(),$o=!0),sf.add(d,c),c.v=0}}function Af(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ko(m(c.Fa,c),oE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,iE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ko(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),pu(this),iE(this))};function Sf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function iE(c){c.g=new Ir(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Gn(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),ia(c,d),c.m&&c.o&&Df(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=du(Gn(d)),f.m=null,f.P=!0,NI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,pu(this),Af(this),vt(19))};function mu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function sE(c,d){var f=null;if(c.g==d){mu(c),Sf(c),c.g=null;var g=2}else if(Tf(c.h,d))f=d.D,LI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=su(),yt(g,new AI(g,f)),gu(c)}else rE(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&Ax(c,d)||g==2&&Af(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:ai(c,5);break;case 4:ai(c,10);break;case 3:ai(c,6);break;default:ai(c,2)}}}function oE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ai(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new oi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||uu(g,"https"),du(g),D?wx(g.toString(),f):Ix(g.toString(),f)}else vt(2);c.G=0,c.l&&c.l.sa(d),aE(c),eE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function aE(c){if(c.G=0,c.ka=[],c.l){let d=VI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function cE(c,d,f){var g=f instanceof oi?Gn(f):new oi(f);if(g.g!="")d&&(g.g=d+"."+g.g),lu(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new oi(null);g&&uu(S,g),d&&(S.g=d),D&&lu(S,D),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),ia(c,g),g}function uE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Fe(new ea({eb:f})):new Fe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lE(){}t=lE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yu(){}yu.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){at.call(this),this.g=new XI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ds(this)}C(Ft,at),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Cf(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=pf(c),c=f);d.i.push(new lx(d.Ya++,c)),d.G==3&&gu(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Cf(this.g),delete this.g,Ft.aa.N.call(this)};function dE(c){mf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(dE,mf);function hE(){yf.call(this),this.status=1}C(hE,yf);function ds(c){this.g=c}C(ds,lE),ds.prototype.ua=function(){yt(this.g,"a")},ds.prototype.ta=function(c){yt(this.g,new dE(c))},ds.prototype.sa=function(c){yt(this.g,new hE)},ds.prototype.ra=function(){yt(this.g,"b")},yu.prototype.createWebChannel=yu.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,my=lr.createWebChannelTransport=function(){return new yu},gy=lr.getStatEventTarget=function(){return su()},py=lr.Event=ii,Rd=lr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ou.NO_ERROR=0,ou.TIMEOUT=8,ou.HTTP_ERROR=6,Ja=lr.ErrorCode=ou,SI.COMPLETE="complete",fy=lr.EventType=SI,TI.EventType=Go,Go.OPEN="a",Go.CLOSE="b",Go.ERROR="c",Go.MESSAGE="d",at.prototype.listen=at.prototype.K,eo=lr.WebChannel=TI,P2=lr.FetchXmlHttpFactory=ea,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,hy=lr.XhrIo=Fe}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});var A0="@firebase/firestore";var Xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");var wo="10.14.0";var qi=new Sn("@firebase/firestore");function Za(){return qi.logLevel}function U(t,...e){if(qi.logLevel<=de.DEBUG){let n=e.map(i_);qi.debug(`Firestore (${wo}): ${t}`,...n)}}function pr(t,...e){if(qi.logLevel<=de.ERROR){let n=e.map(i_);qi.error(`Firestore (${wo}): ${t}`,...n)}}function ao(t,...e){if(qi.logLevel<=de.WARN){let n=e.map(i_);qi.warn(`Firestore (${wo}): ${t}`,...n)}}function i_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t="Unexpected state"){let e=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: `+t;throw pr(e),new Error(e)}function Ee(t,e){t||Q()}function X(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends rt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var kd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Iy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xe.UNAUTHENTICATED))}shutdown(){}},Ey=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Ty=class{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new kd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Xe(e)}},by=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Dy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new by(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Cy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ay=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new Cy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function k2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Od=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=k2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var it=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new it(0,0))}static max(){return new t(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ke=class t extends Fd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},O2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wt=class t extends Fd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return O2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(ke.fromString(e))}static fromName(e){return new t(ke.fromString(e).popFirst(5))}static empty(){return new t(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ke(e.slice()))}};var Sy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Sy.UNKNOWN_ID=-1;function F2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new zi(i,q.empty(),e)}function L2(t){return new zi(t.readTime,t.key,-1)}var zi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),q.empty(),-1)}static max(){return new t(te.max(),q.empty(),-1)}};function V2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var U2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ry=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function mc(t){return y(this,null,function*(){if(t.code!==N.FAILED_PRECONDITION||t.message!==U2)throw t;U("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function j2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yc(t){return t.name==="IndexedDbTransactionError"}var uA=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function hh(t){return t==null}function ic(t){return t===0&&1/t==-1/0}function B2(t){return typeof t=="number"&&Number.isInteger(t)&&!ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iJ=[...$2,"documentOverlays"],H2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],q2=H2,z2=[...q2,"indexConfiguration","indexState","indexEntries"];var sJ=[...z2,"globals"];function S0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Le=class t{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new io(this.root,e,this.comparator,!1)}getReverseIterator(){return new io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new io(this.root,e,this.comparator,!0)}},io=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ln=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pt=class t{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ld(this.data.getIterator())}getIteratorFrom(e){return new Ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ld=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var tn=class t{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new t([])}unionWith(e){let n=new pt(Wt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Vd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var gt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};gt.EMPTY_BYTE_STRING=new gt("");var G2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(Ee(!!t),typeof t=="string"){let e=0,n=G2.exec(t);if(Ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wr(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}function s_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function o_(t){let e=t.mapValue.fields.__previous_value__;return s_(e)?o_(e):e}function sc(t){let e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}var My=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ud=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Md={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?s_(t)?4:hA(t)?9007199254740991:dA(t)?10:11:Q()}function jn(t,e){if(t===e)return!0;let n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sc(t).isEqual(sc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=gr(i.timestampValue),a=gr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Wr(i.bytesValue).isEqual(Wr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ne(i.geoPointValue.latitude)===Ne(s.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ne(i.integerValue)===Ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ne(i.doubleValue),a=Ne(s.doubleValue);return o===a?ic(o)===ic(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(S0(o)!==S0(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!jn(o[u],a[u])))return!1;return!0}(t,e);default:return Q()}}function oc(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function uo(t,e){if(t===e)return 0;let n=Gi(t),r=Gi(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ne(s.integerValue||s.doubleValue),u=Ne(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return R0(t.timestampValue,e.timestampValue);case 4:return R0(sc(t),sc(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Wr(s),u=Wr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ye(a[l],u[l]);if(h!==0)return h}return ye(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ye(Ne(s.latitude),Ne(o.latitude));return a!==0?a:ye(Ne(s.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return M0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,M=ye(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:M0(_,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Md.mapValue&&o===Md.mapValue)return 0;if(s===Md.mapValue)return 1;if(o===Md.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ye(u[p],h[p]);if(m!==0)return m;let _=uo(a[u[p]],l[h[p]]);if(_!==0)return _}return ye(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q()}}function R0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=gr(t),r=gr(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function M0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=uo(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function lo(t){return Ny(t)}function Ny(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Ny(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Ny(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function N0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xy(t){return!!t&&"integerValue"in t}function a_(t){return!!t&&"arrayValue"in t}function x0(t){return!!t&&"nullValue"in t}function P0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xd(t){return!!t&&"mapValue"in t}function dA(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ec(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Zi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ec(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ec(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Gt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(n)}setAll(e){let n=Wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ec(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ec(this.value))}};function fA(t){let e=[];return Zi(t.fields,(n,r)=>{let i=new Wt([n]);if(xd(r)){let s=fA(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new tn(e)}var yn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ho=class{constructor(e,n){this.position=e,this.inclusive=n}};function k0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=uo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function O0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}var Wi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function W2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var jd=class{},Ge=class t extends jd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ky(e,n,r):n==="array-contains"?new Ly(e,r):n==="in"?new Vy(e,r):n==="not-in"?new Uy(e,r):n==="array-contains-any"?new jy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Oy(e,r):new Fy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(uo(n,this.value)):n!==null&&Gi(this.value)===Gi(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},vn=class t extends jd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return pA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pA(t){return t.op==="and"}function gA(t){return K2(t)&&pA(t)}function K2(t){for(let e of t.filters)if(e instanceof vn)return!1;return!0}function Py(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(gA(t))return t.filters.map(e=>Py(e)).join(",");{let e=t.filters.map(n=>Py(n)).join(",");return`${t.op}(${e})`}}function mA(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof vn?function(r,i){return i instanceof vn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&mA(o,i.filters[a]),!0):!1}(t,e):void Q()}function yA(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof vn?function(n){return n.op.toString()+" {"+n.getFilters().map(yA).join(" ,")+"}"}(t):"Filter"}var ky=class extends Ge{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},Oy=class extends Ge{constructor(e,n){super(e,"in",n),this.keys=vA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Fy=class extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=vA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function vA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var Ly=class extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return a_(n)&&oc(n.arrayValue,this.value)}},Vy=class extends Ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&oc(this.value.arrayValue,n)}},Uy=class extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!oc(this.value.arrayValue,n)}},jy=class extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!a_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>oc(this.value.arrayValue,r))}};var By=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function F0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new By(t,e,n,r,i,s,o)}function c_(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Py(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lo(r)).join(",")),e.ue=n}return e.ue}function u_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!O0(t.startAt,e.startAt)&&O0(t.endAt,e.endAt)}function $y(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Kr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Q2(t,e,n,r,i,s,o,a){return new Kr(t,e,n,r,i,s,o,a)}function l_(t){return new Kr(t)}function L0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _A(t){return t.collectionGroup!==null}function tc(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(Wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wi(s,r))}),n.has(Wt.keyField().canonicalString())||e.ce.push(new Wi(Wt.keyField(),r))}return e.ce}function Vn(t){let e=X(t);return e.le||(e.le=Y2(e,tc(t))),e.le}function Y2(t,e){if(t.limitType==="F")return F0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Wi(i.field,s)});let n=t.endAt?new ho(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ho(t.startAt.position,t.startAt.inclusive):null;return F0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hy(t,e){let n=t.filters.concat([e]);return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bd(t,e,n){return new Kr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fh(t,e){return u_(Vn(t),Vn(e))&&t.limitType===e.limitType}function wA(t){return`${c_(Vn(t))}|lt:${t.limitType}`}function to(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yA(i)).join(", ")}]`),hh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>lo(i)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function ph(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of tc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=k0(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,tc(r),i)||r.endAt&&!function(o,a,u){let l=k0(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,tc(r),i))}(t,e)}function J2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IA(t){return(e,n)=>{let r=!1;for(let i of tc(t)){let s=Z2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Z2(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?uo(u,l):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var Qr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return lA(this.inner)}size(){return this.innerSize}};var X2=new Le(q.comparator);function mr(){return X2}var EA=new Le(q.comparator);function Xa(...t){let e=EA;for(let n of t)e=e.insert(n.key,n);return e}function TA(t){let e=EA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bi(){return nc()}function bA(){return nc()}function nc(){return new Qr(t=>t.toString(),(t,e)=>t.isEqual(e))}var eB=new Le(q.comparator),tB=new pt(q.comparator);function he(...t){let e=tB;for(let n of t)e=e.add(n);return e}var nB=new pt(ye);function rB(){return nB}function d_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(e)?"-0":e}}function DA(t){return{integerValue:""+t}}function iB(t,e){return B2(e)?DA(e):d_(t,e)}var fo=class{constructor(){this._=void 0}};function sB(t,e,n){return t instanceof Ki?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&s_(s)&&(s=o_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qi?AA(t,e):t instanceof Yi?SA(t,e):function(i,s){let o=CA(i,s),a=V0(o)+V0(i.Pe);return xy(o)&&xy(i.Pe)?DA(a):d_(i.serializer,a)}(t,e)}function oB(t,e,n){return t instanceof Qi?AA(t,e):t instanceof Yi?SA(t,e):n}function CA(t,e){return t instanceof po?function(r){return xy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ki=class extends fo{},Qi=class extends fo{constructor(e){super(),this.elements=e}};function AA(t,e){let n=RA(e);for(let r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Yi=class extends fo{constructor(e){super(),this.elements=e}};function SA(t,e){let n=RA(e);for(let r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}var po=class extends fo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function V0(t){return Ne(t.integerValue||t.doubleValue)}function RA(t){return a_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var qy=class{constructor(e,n){this.field=e,this.transform=n}};function aB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qi&&i instanceof Qi||r instanceof Yi&&i instanceof Yi?co(r.elements,i.elements,jn):r instanceof po&&i instanceof po?jn(r.Pe,i.Pe):r instanceof Ki&&i instanceof Ki}(t.transform,e.transform)}var zy=class{constructor(e,n){this.version=e,this.transformResults=n}},hr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var go=class{};function MA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $d(t.key,hr.none()):new Ji(t.key,t.data,hr.none());{let n=t.data,r=Gt.empty(),i=new pt(Wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Bn(t.key,r,new tn(i.toArray()),hr.none())}}function cB(t,e,n){t instanceof Ji?function(i,s,o){let a=i.value.clone(),u=j0(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bn?function(i,s,o){if(!Pd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=j0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(NA(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rc(t,e,n,r){return t instanceof Ji?function(s,o,a,u){if(!Pd(s.precondition,o))return a;let l=s.value.clone(),h=B0(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bn?function(s,o,a,u){if(!Pd(s.precondition,o))return a;let l=B0(s.fieldTransforms,u,o),h=o.data;return h.setAll(NA(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Pd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function uB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=CA(r.transform,i||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,s))}return n||null}function U0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&co(r,i,(s,o)=>aB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ji=class extends go{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Bn=class extends go{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function NA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function j0(t,e,n){let r=new Map;Ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,oB(o,a,n[i]))}return r}function B0(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,sB(s,o,e))}return r}var $d=class extends go{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Gy=class extends go{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&cB(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=rc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=bA();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=MA(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>U0(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>U0(n,r))}},Ky=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length);let i=function(){return eB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Qy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Yy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var qe,pe;function lB(t){switch(t){default:return Q();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function xA(t){if(t===void 0)return pr("GRPC error has no .code"),N.UNKNOWN;switch(t){case qe.OK:return N.OK;case qe.CANCELLED:return N.CANCELLED;case qe.UNKNOWN:return N.UNKNOWN;case qe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case qe.INTERNAL:return N.INTERNAL;case qe.UNAVAILABLE:return N.UNAVAILABLE;case qe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case qe.NOT_FOUND:return N.NOT_FOUND;case qe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case qe.ABORTED:return N.ABORTED;case qe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case qe.DATA_LOSS:return N.DATA_LOSS;default:return Q()}}(pe=qe||(qe={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var $0=null;function dB(){return new TextEncoder}var hB=new zr([4294967295,4294967295],0);function H0(t){let e=dB().encode(t),n=new dy;return n.update(e),new Uint8Array(n.digest())}function q0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zr([n,r],0),new zr([i,s],0)]}var Jy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $i(`Invalid padding: ${n}`);if(r<0)throw new $i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $i(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $i(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zr.fromNumber(r)));return i.compare(hB)===1&&(i=new zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=H0(e),[r,i]=q0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=H0(e),[r,i]=q0(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},$i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Hd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ac.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Le(ye),mr(),he())}},ac=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,he(),he(),he())}};var so=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},qd=class{constructor(e,n){this.targetId=e,this.me=n}},zd=class{constructor(e,n,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Gd=class{constructor(){this.fe=0,this.ge=G0(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),n=he(),r=he();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new ac(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=G0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Zy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=mr(),this.qe=z0(),this.Qe=new Le(ye)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if($y(s))if(r===0){let o=new q(s.path);this.Ue(n,o,yn.newNoDocument(o,te.min()))}else Ee(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}$0?.et(function(h,p,m,_,C){var M,R,k,B,V,$;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},z=p.unchangedNames;return z&&(Ie.bloomFilter={applied:C===0,hashCount:(M=z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(B=(k=(R=z?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:($=(V=z?.bits)===null||V===void 0?void 0:V.padding)!==null&&$!==void 0?$:0,mightContain:E=>{var v;return(v=_?.mightContain(E))!==null&&v!==void 0&&v}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Wr(r).toUint8Array()}catch(u){if(u instanceof Vd)return ao("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Jy(o,i,s)}catch(u){return ao(u instanceof $i?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&$y(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,yn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=he();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Hd(e,n,this.Qe,this.ke,r);return this.ke=mr(),this.qe=z0(),this.Qe=new Le(ye),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Gd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function z0(){return new Le(q.comparator)}function G0(){return new Le(q.comparator)}var fB={asc:"ASCENDING",desc:"DESCENDING"},pB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gB={and:"AND",or:"OR"},Xy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ev(t,e){return t.useProto3Json||hh(e)?e:{value:e}}function Wd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mB(t,e){return Wd(t,e.toTimestamp())}function Un(t){return Ee(!!t),te.fromTimestamp(function(n){let r=gr(n);return new it(r.seconds,r.nanos)}(t))}function h_(t,e){return tv(t,e).canonicalString()}function tv(t,e){let n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function kA(t){let e=ke.fromString(t);return Ee(UA(e)),e}function nv(t,e){return h_(t.databaseId,e.path)}function yy(t,e){let n=kA(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(FA(n))}function OA(t,e){return h_(t.databaseId,e)}function yB(t){let e=kA(t);return e.length===4?ke.emptyPath():FA(e)}function rv(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FA(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function W0(t,e,n){return{name:nv(t,e),fields:n.value.mapValue.fields}}function vB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string"),gt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?N.UNKNOWN:xA(l.code);return new F(h,l.message||"")}(o);n=new zd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=yy(t,r.document.name),s=Un(r.document.updateTime),o=r.document.createTime?Un(r.document.createTime):te.min(),a=new Gt({mapValue:{fields:r.document.fields}}),u=yn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new so(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=yy(t,r.document),s=r.readTime?Un(r.readTime):te.min(),o=yn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new so([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=yy(t,r.document),s=r.removedTargetIds||[];n=new so([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Yy(i,s),a=r.targetId;n=new qd(a,o)}}return n}function _B(t,e){let n;if(e instanceof Ji)n={update:W0(t,e.key,e.value)};else if(e instanceof $d)n={delete:nv(t,e.key)};else if(e instanceof Bn)n={update:W0(t,e.key,e.data),updateMask:SB(e.fieldMask)};else{if(!(e instanceof Gy))return Q();n={verify:nv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof po)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function wB(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Un(i.updateTime):Un(s);return o.isEqual(te.min())&&(o=Un(s)),new zy(o,i.transformResults||[])}(n,e))):[]}function IB(t,e){return{documents:[OA(t,e.path)]}}function EB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OA(t,i);let s=function(l){if(l.length!==0)return VA(vn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:no(m.field),direction:DB(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=ev(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function TB(t){let e=yB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=LA(p);return m instanceof vn&&gA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new Wi(ro(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,hh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,_=p.values||[];return new ho(_,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,_=p.values||[];return new ho(_,m)}(n.endAt)),Q2(e,i,o,s,a,"F",u,l)}function bB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ro(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ro(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ro(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ro(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(ro(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vn.create(n.compositeFilter.filters.map(r=>LA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function DB(t){return fB[t]}function CB(t){return pB[t]}function AB(t){return gB[t]}function no(t){return{fieldPath:t.canonicalString()}}function ro(t){return Wt.fromServerFormat(t.fieldPath)}function VA(t){return t instanceof Ge?function(n){if(n.op==="=="){if(P0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(x0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(P0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(x0(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:CB(n.op),value:n.value}}}(t):t instanceof vn?function(n){let r=n.getFilters().map(i=>VA(i));return r.length===1?r[0]:{compositeFilter:{op:AB(n.op),filters:r}}}(t):Q()}function SB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var cc=class t{constructor(e,n,r,i,s=te.min(),o=te.min(),a=gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var iv=class{constructor(e){this.ct=e}};function RB(t){let e=TB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bd(e,e.limit,"L"):e}var Kd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),ic(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=gr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Wr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?hA(e)?this.dt(n,Number.MAX_SAFE_INTEGER):dA(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ne(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Kd.vt=new Kd;var sv=class{constructor(){this.un=new ov}addToCollectionParentIndex(e,n){return this.un.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(zi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(zi.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},ov=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(ke.comparator)).toArray()}};var aJ=new Uint8Array(0);var Fn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(41943040,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);var uc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var av=class{constructor(){this.changes=new Qr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var uv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rc(r.mutation,i,tn.empty(),it.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){let i=Bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xa();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=mr(),o=nc(),a=function(){return nc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Bn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),rc(h.mutation,l,h.mutation.getFieldMask(),it.now())):o.set(l.key,tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new cv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=nc(),i=new Le((o,a)=>o-a),s=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||tn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=bA();h.forEach(m=>{if(!s.has(m)){let _=MA(n.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_A(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(Bi()),a=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:TA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Xa();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{let l=function(p,m){return new Kr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,yn.newInvalidDocument(h)))});let a=Xa();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&rc(h.mutation,l,tn.empty(),it.now()),ph(n,l)&&(a=a.insert(u,l))}),a})}};var lv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return P.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Un(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:RB(i.bundledQuery),readTime:Un(i.readTime)}}(n)),P.resolve()}};var dv=class{constructor(){this.overlays=new Le(q.comparator),this.Ir=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Bi();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Bi(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Le((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Bi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Bi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Qy(n,r));let s=this.Ir.get(n);s===void 0&&(s=he(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var hv=class{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var lc=class{constructor(){this.Tr=new pt(ze.Er),this.dr=new pt(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new q(new ke([])),r=new ze(n,e),i=new ze(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new q(new ke([])),r=new ze(n,e),i=new ze(n,e+1),s=he();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ze=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||q.comparator(e.key,n.key)}};var fv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(ze.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Wy(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ze(n,0),i=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(ye);return n.forEach(i=>{let s=new ze(i,0),o=new ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;q.isDocumentKey(s)||(s=s.child(""));let o=new ze(new q(s),0),a=new pt(ye);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(n.mutations,i=>{let s=new ze(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new ze(n,0),i=this.br.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var pv=class{constructor(e){this.Mr=e,this.docs=function(){return new Le(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mr(),o=n.path,a=new q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||V2(L2(h),r)<=0||(i.has(h.key)||ph(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Or(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gv(this)}getSize(e){return P.resolve(this.size)}},gv=class extends av{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var mv=class{constructor(e){this.persistence=e,this.Nr=new Qr(n=>c_(n),u_),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lc,this.targetCount=0,this.kr=uc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),P.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new uc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Kn(n),P.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Br.containsKey(n))}};var yv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new uA(0),this.Kr=!1,this.Kr=!0,this.$r=new hv,this.referenceDelegate=e(this),this.Ur=new mv(this),this.indexManager=new sv,this.remoteDocumentCache=function(i){return new pv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iv(n),this.Gr=new lv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new fv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new vv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},vv=class extends Ry{constructor(e){super(),this.currentSequenceNumber=e}},_v=class t{constructor(e){this.persistence=e,this.Jr=new lc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return P.or([()=>P.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var wv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=he(),i=he();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Iv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ev=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aC()?8:j2(Ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Iv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Za()<=de.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(Za()<=de.DEBUG&&U("QueryEngine","Query:",to(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Za()<=de.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):P.resolve())}Yi(e,n){if(L0(n))return P.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Bd(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=he(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Bd(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return L0(n)||i.isEqual(te.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?P.resolve(null):(Za()<=de.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),to(n)),this.rs(e,o,n,F2(i,-1)).next(a=>a))})}ts(e,n){let r=new pt(IA(e));return n.forEach((i,s)=>{ph(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Za()<=de.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",to(n)),this.Ji.getDocumentsMatchingQuery(e,n,zi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Tv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Le(ye),this._s=new Qr(s=>c_(s),u_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function MB(t,e,n,r){return new Tv(t,e,n,r)}function jA(t,e){return y(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=he();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function NB(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),_=P.resolve();return m.forEach(C=>{_=_.next(()=>h.getEntry(u,C)).next(M=>{let R=l.docVersions.get(C);Ee(R!==null),M.version.compareTo(R)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BA(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function xB(t,e){let n=X(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(gt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(M,R,k){return M.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,_,h)&&a.push(n.Ur.updateTargetData(s,_))});let u=mr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(PB(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(te.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function PB(t,e,n){let r=he(),i=he();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=mr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function kB(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OB(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new cc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function bv(t,e,n){return y(this,null,function*(){let r=X(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!yc(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function K0(t,e,n){let r=X(t),i=te.min(),s=he();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=X(u),m=p._s.get(h);return m!==void 0?P.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:he())).next(a=>(FB(r,J2(e),a),{documents:a,Ts:s})))}function FB(t,e,n){let r=t.us.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Qd=class{constructor(){this.activeTargetIds=rB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Dv=class{constructor(){this.so=new Qd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Qd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Cv=class{_o(e){}shutdown(){}};var Yd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nd=null;function vy(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}var LB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Av=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ft="WebChannelConnection",Sv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=vy(),u=this.xo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(U("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ao("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=LB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=vy();return new Promise((o,a)=>{let u=new hy;u.setWithCredentials(!0),u.listenOnce(fy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ja.NO_ERROR:let h=u.getResponseJson();U(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ja.TIMEOUT:U(ft,`RPC '${e}' ${s} timed out`),a(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ja.HTTP_ERROR:let p=u.getStatus();if(U(ft,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let C=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(_.status);a(new F(C,_.message))}else a(new F(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new F(N.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{U(ft,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);U(ft,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=vy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=my(),a=gy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");U(ft,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,_=!1,C=new Av({Io:R=>{_?U(ft,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(U(ft,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),U(ft,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),M=(R,k,B)=>{R.listen(k,V=>{try{B(V)}catch($){setTimeout(()=>{throw $},0)}})};return M(p,eo.EventType.OPEN,()=>{_||(U(ft,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),M(p,eo.EventType.CLOSE,()=>{_||(_=!0,U(ft,`RPC '${e}' stream ${i} transport closed`),C.So())}),M(p,eo.EventType.ERROR,R=>{_||(_=!0,ao(ft,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new F(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,eo.EventType.MESSAGE,R=>{var k;if(!_){let B=R.data[0];Ee(!!B);let V=B,$=V.error||((k=V[0])===null||k===void 0?void 0:k.error);if($){U(ft,`RPC '${e}' stream ${i} received error:`,$);let Ie=$.status,z=function(w){let T=qe[w];if(T!==void 0)return xA(T)}(Ie),E=$.message;z===void 0&&(z=N.INTERNAL,E="Unknown error status: "+Ie+" with message "+$.message),_=!0,C.So(new F(z,E)),p.close()}else U(ft,`RPC '${e}' stream ${i} received:`,B),C.bo(B)}}),M(a,py.STAT_EVENT,R=>{R.stat===Rd.PROXY?U(ft,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Rd.NOPROXY&&U(ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function _y(){return typeof document<"u"?document:null}function gh(t){return new Xy(t,!0)}var Jd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Zd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Jd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(pr(n.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Rv=class extends Zd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=vB(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Un(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=rv(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=$y(u)?{documents:IB(s,u)}:{query:EB(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=PA(s,o.resumeToken);let l=ev(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Wd(s,o.snapshotVersion.toTimestamp());let l=ev(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=bB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=rv(this.serializer),n.removeTarget=e,this.a_(n)}},Mv=class extends Zd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=wB(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=rv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>_B(this.serializer,r))};this.a_(n)}};var Nv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,tv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,tv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},xv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pr(n),this.D_=!1):U("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Pv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Xi(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let l=X(u);l.L_.add(4),yield vc(l),l.q_.set("Unknown"),l.L_.delete(4),yield mh(l)})}(this))}))}),this.q_=new xv(r,i)}};function mh(t){return y(this,null,function*(){if(Xi(t))for(let e of t.B_)yield e(!0)})}function vc(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function $A(t,e){let n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),m_(n)?g_(n):Io(n).r_()&&p_(n,e))}function f_(t,e){let n=X(t),r=Io(n);n.N_.delete(e),r.r_()&&HA(n,e),n.N_.size===0&&(r.r_()?r.o_():Xi(n)&&n.q_.set("Unknown"))}function p_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(t).A_(e)}function HA(t,e){t.Q_.xe(e),Io(t).R_(e)}function g_(t){t.Q_=new Zy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Io(t).start(),t.q_.v_()}function m_(t){return Xi(t)&&!Io(t).n_()&&t.N_.size>0}function Xi(t){return X(t).L_.size===0}function qA(t){t.Q_=void 0}function VB(t){return y(this,null,function*(){t.q_.set("Online")})}function UB(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{p_(t,e)})})}function jB(t,e){return y(this,null,function*(){qA(t),m_(t)?(t.q_.M_(e),g_(t)):t.q_.set("Unknown")})}function BB(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof zd&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xd(t,r)}else if(e instanceof so?t.Q_.Ke(e):e instanceof qd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{let r=yield BA(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(gt.EMPTY_BYTE_STRING,h.snapshotVersion)),HA(s,u);let p=new cc(h.target,u,l,h.sequenceNumber);p_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield Xd(t,r)}})}function Xd(t,e,n){return y(this,null,function*(){if(!yc(e))throw e;t.L_.add(1),yield vc(t),t.q_.set("Offline"),n||(n=()=>BA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield mh(t)}))})}function zA(t,e){return e().catch(n=>Xd(t,n,e))}function yh(t){return y(this,null,function*(){let e=X(t),n=Yr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$B(e);)try{let i=yield kB(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,HB(e,i)}catch(i){yield Xd(e,i)}GA(e)&&WA(e)})}function $B(t){return Xi(t)&&t.O_.length<10}function HB(t,e){t.O_.push(e);let n=Yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function GA(t){return Xi(t)&&!Yr(t).n_()&&t.O_.length>0}function WA(t){Yr(t).start()}function qB(t){return y(this,null,function*(){Yr(t).p_()})}function zB(t){return y(this,null,function*(){let e=Yr(t);for(let n of t.O_)e.m_(n.mutations)})}function GB(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=Ky.from(r,e,n);yield zA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yh(t)})}function WB(t,e){return y(this,null,function*(){e&&Yr(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return lB(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();Yr(r).s_(),yield zA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield yh(r)}})}(t,e)),GA(t)&&WA(t)})}function Q0(t,e){return y(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=Xi(n);n.L_.add(3),yield vc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield mh(n)})}function KB(t,e){return y(this,null,function*(){let n=X(t);e?(n.L_.delete(2),yield mh(n)):e||(n.L_.add(2),yield vc(n),n.q_.set("Unknown"))})}function Io(t){return t.K_||(t.K_=function(n,r,i){let s=X(n);return s.w_(),new Rv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:VB.bind(null,t),Ro:UB.bind(null,t),mo:jB.bind(null,t),d_:BB.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),m_(t)?g_(t):t.q_.set("Unknown")):(yield t.K_.stop(),qA(t))}))),t.K_}function Yr(t){return t.U_||(t.U_=function(n,r,i){let s=X(n);return s.w_(),new Mv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qB.bind(null,t),mo:WB.bind(null,t),f_:zB.bind(null,t),g_:GB.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield yh(t)):(yield t.U_.stop(),t.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var kv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function y_(t,e){if(pr("AsyncQueue",`${e}: ${t}`),yc(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}var eh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Xa(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var th=class{constructor(){this.W_=new Le(q.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},mo=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,eh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ov=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Fv=class{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=X(n),s=i.queries;i.queries=Y0(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function Y0(){return new Qr(t=>wA(t),fh)}function QB(t,e){return y(this,null,function*(){let n=X(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Ov,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=y_(o,`Initialization of query '${to(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&v_(n)})}function YB(t,e){return y(this,null,function*(){let n=X(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function JB(t,e){let n=X(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&v_(n)}function ZB(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function v_(t){t.Y_.forEach(e=>{e.next()})}var Lv,J0;(J0=Lv||(Lv={})).ea="default",J0.Cache="cache";var Vv=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Lv.Cache}};var nh=class{constructor(e){this.key=e}},rh=class{constructor(e){this.key=e}},Uv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=IA(e),this.Ra=new eh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new th,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),_=ph(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),M=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;m&&_?m.data.isEqual(_.data)?C!==M&&(r.track({type:3,doc:_}),R=!0):this.ga(m,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),R=!0):m&&!_&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(_?(o=o.add(_),s=M?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(_,C){let M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return M(_)-M(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new mo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new th,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=he(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new rh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new nh(r))}),n}ba(e){this.Ta=e.Ts,this.da=he();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},jv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Bv=class{constructor(e){this.key=e,this.va=!1}},$v=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qr(a=>wA(a),fh),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(q.comparator),this.Na=new Map,this.La=new lc,this.Ba={},this.ka=new Map,this.qa=uc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function XB(t,e,n=!0){return y(this,null,function*(){let r=XA(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield KA(r,e,n,!0),i})}function e$(t,e){return y(this,null,function*(){let n=XA(t);yield KA(n,e,!0,!1)})}function KA(t,e,n,r){return y(this,null,function*(){let i=yield OB(t.localStore,Vn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield t$(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&$A(t.remoteStore,i),a})}function t$(t,e,n,r,i){return y(this,null,function*(){t.Ka=(p,m,_)=>function(M,R,k,B){return y(this,null,function*(){let V=R.view.ma(k);V.ns&&(V=yield K0(M.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,V)));let $=B&&B.targetChanges.get(R.targetId),Ie=B&&B.targetMismatches.get(R.targetId)!=null,z=R.view.applyChanges(V,M.isPrimaryClient,$,Ie);return X0(M,R.targetId,z.wa),z.snapshot})}(t,p,m,_);let s=yield K0(t.localStore,e,!0),o=new Uv(e,s.Ts),a=o.ma(s.documents),u=ac.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);X0(t,n,l.wa);let h=new jv(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function n$(t,e,n){return y(this,null,function*(){let r=X(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!fh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield bv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&f_(r.remoteStore,i.targetId),Hv(r,i.targetId)}).catch(mc))):(Hv(r,i.targetId),yield bv(r.localStore,i.targetId,!0))})}function r$(t,e){return y(this,null,function*(){let n=X(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),f_(n.remoteStore,r.targetId))})}function i$(t,e,n){return y(this,null,function*(){let r=d$(t);try{let i=yield function(o,a){let u=X(o),l=it.now(),h=a.reduce((_,C)=>_.add(C.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=mr(),M=he();return u.cs.getEntries(_,h).next(R=>{C=R,C.forEach((k,B)=>{B.isValidDocument()||(M=M.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,C)).next(R=>{p=R;let k=[];for(let B of a){let V=uB(B,p.get(B.key).overlayedDocument);V!=null&&k.push(new Bn(B.key,V,fA(V.value.mapValue),hr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,M);return u.documentOverlayCache.saveOverlays(_,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:TA(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Le(ye)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield _c(r,i.changes),yield yh(r.remoteStore)}catch(i){let s=y_(i,"Failed to persist write");n.reject(s)}})}function QA(t,e){return y(this,null,function*(){let n=X(t);try{let r=yield xB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ee(o.va):i.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),yield _c(n,r,e)}catch(r){yield mc(r)}})}function Z0(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=X(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&v_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function s$(t,e,n){return y(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Le(q.comparator);o=o.insert(s,yn.newNoDocument(s,te.min()));let a=he().add(s),u=new Hd(te.min(),new Map,new Le(ye),o,a);yield QA(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),__(r)}else yield bv(r.localStore,e,!1).then(()=>Hv(r,e,n)).catch(mc)})}function o$(t,e){return y(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield NB(n.localStore,e);JA(n,r,null),YA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield _c(n,i)}catch(i){yield mc(i)}})}function a$(t,e,n){return y(this,null,function*(){let r=X(t);try{let i=yield function(o,a){let u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);JA(r,e,n),YA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield _c(r,i)}catch(i){yield mc(i)}})}function YA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function JA(t,e,n){let r=X(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Hv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ZA(t,r)})}function ZA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(f_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),__(t))}function X0(t,e,n){for(let r of n)r instanceof nh?(t.La.addReference(r.key,e),c$(t,r)):r instanceof rh?(U("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ZA(t,r.key)):Q()}function c$(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.xa.add(r),__(t))}function __(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new q(ke.fromString(e)),r=t.qa.next();t.Na.set(r,new Bv(n)),t.Oa=t.Oa.insert(n,r),$A(t.remoteStore,new cc(Vn(l_(n.path)),r,"TargetPurposeLimboResolution",uA.oe))}}function _c(t,e,n){return y(this,null,function*(){let r=X(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=wv.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return y(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>P.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!yc(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let _=h.os.get(m),C=_.snapshotVersion,M=_.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,M)}}})}(r.localStore,s))})}function u$(t,e){return y(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield jA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new F(N.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _c(n,r.hs)}})}function l$(t,e){let n=X(t),r=n.Na.get(e);if(r&&r.va)return he().add(r.key);{let i=he(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function XA(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=QA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=s$.bind(null,e),e.Ca.d_=JB.bind(null,e.eventManager),e.Ca.$a=ZB.bind(null,e.eventManager),e}function d$(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a$.bind(null,e),e}var eA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=gh(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return MB(this.persistence,new Ev,n.initialUser,this.serializer)}Ga(n){return new yv(_v.Zr,this.serializer)}Wa(n){return new Dv}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var h$=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Z0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=u$.bind(null,this.syncEngine),yield KB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Fv}()}createDatastore(n){let r=gh(n.databaseInfo.databaseId),i=function(o){return new Sv(o)}(n.databaseInfo);return function(o,a,u,l){return new Nv(o,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,u){return new Pv(i,s,o,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>Z0(this.syncEngine,r,0),function(){return Yd.D()?new Yd:new Cv}())}createSyncEngine(n,r){return function(s,o,a,u,l,h,p){let m=new $v(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=X(s);U("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield vc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var qv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var zv=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xe.UNAUTHENTICATED,this.clientId=Od.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){U("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=y_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function wy(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield jA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function tA(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield f$(t);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Q0(e.remoteStore,i)),t._onlineComponents=e})}function f$(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),yield wy(t,new eA)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield wy(t,new eA);return t._offlineComponents})}function eS(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield tA(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield tA(t,new h$))),t._onlineComponents})}function p$(t){return eS(t).then(e=>e.syncEngine)}function nA(t){return y(this,null,function*(){let e=yield eS(t),n=e.eventManager;return n.onListen=XB.bind(null,e.syncEngine),n.onUnlisten=n$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=e$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=r$.bind(null,e.syncEngine),n})}function tS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var rA=new Map;function nS(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g$(t,e,n,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iA(t){if(!q.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sA(t){if(q.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=vh(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function m$(t,e){if(e<=0)throw new F(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var ih=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Iy;switch(r.type){case"firstParty":return new Dy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=rA.get(n);r&&(U("ComponentProvider","Removing Datastore"),rA.delete(n),r.terminate())}(this),Promise.resolve()}};function rS(t,e,n,r={}){var i;let s=(t=fr(t,yo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Xe.MOCK_USER;else{a=Xl(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xe(l)}t._authCredentials=new Ey(new kd(a,u))}}var Jr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Ct=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Gr=class t extends Jr{constructor(e,n,r){super(e,n,l_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function iS(t,e,...n){if(t=_e(t),nS("collection","path",e),t instanceof yo){let r=ke.fromString(e,...n);return sA(r),new Gr(t,null,r)}{if(!(t instanceof Ct||t instanceof Gr))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return sA(r),new Gr(t.firestore,null,r)}}function w_(t,e,...n){if(t=_e(t),arguments.length===1&&(e=Od.newId()),nS("doc","path",e),t instanceof yo){let r=ke.fromString(e,...n);return iA(r),new Ct(t,null,new q(r))}{if(!(t instanceof Ct||t instanceof Gr))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return iA(r),new Ct(t.firestore,t instanceof Gr?t.converter:null,new q(r))}}var sh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Jd(this,"async_queue_retry"),this.Vu=()=>{let r=_y();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=_y();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=_y();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw pr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=kv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Q()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function oA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Zr=class extends yo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sh(e),this._firestoreClient=void 0,yield e}})}};function sS(t,e){let n=typeof t=="object"?t:Pt(),r=typeof t=="string"?t:e||"(default)",i=bt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Zl("firestore");s&&rS(i,...s)}return i}function oS(t){if(t._terminated)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y$(t),t._firestoreClient}function y$(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new My(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,tS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new zv(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var dc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(gt.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _o=class{constructor(e){this._methodName=e}};var hc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}};var fc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var v$=/^__.*__$/,Gv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ji(e,this.data,n,this.fieldTransforms)}},oh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function aS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Wv=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ch(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(aS(this.Cu)&&v$.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Kv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gh(e)}Qu(e,n,r,i=!1){return new Wv({Cu:e,methodName:n,qu:r,path:Wt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _h(t){let e=t._freezeSettings(),n=gh(t._databaseId);return new Kv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cS(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);I_("Data must be an object, but it was:",o,r);let a=uS(r,o),u,l;if(s.merge)u=new tn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Yv(e,p,n);if(!o.contains(m))throw new F(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dS(h,m)||h.push(m)}u=new tn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Gv(new Gt(a),u,l)}var ah=class t extends _o{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var Qv=class t extends _o{_toFieldTransform(e){return new qy(e.path,new Ki)}isEqual(e){return e instanceof t}};function _$(t,e,n,r){let i=t.Qu(1,e,n);I_("Data must be an object, but it was:",i,r);let s=[],o=Gt.empty();Zi(r,(u,l)=>{let h=E_(e,u,n);l=_e(l);let p=i.Nu(h);if(l instanceof ah)s.push(h);else{let m=wc(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new tn(s);return new oh(o,a,i.fieldTransforms)}function w$(t,e,n,r,i,s){let o=t.Qu(1,e,n),a=[Yv(e,r,n)],u=[i];if(s.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Yv(e,s[m])),u.push(s[m+1]);let l=[],h=Gt.empty();for(let m=a.length-1;m>=0;--m)if(!dS(l,a[m])){let _=a[m],C=u[m];C=_e(C);let M=o.Nu(_);if(C instanceof ah)l.push(_);else{let R=wc(C,M);R!=null&&(l.push(_),h.set(_,R))}}let p=new tn(l);return new oh(h,p,o.fieldTransforms)}function I$(t,e,n,r=!1){return wc(n,t.Qu(r?4:3,e))}function wc(t,e){if(lS(t=_e(t)))return I_("Unsupported field value:",e,t),uS(t,e);if(t instanceof _o)return function(r,i){if(!aS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=wc(a,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=it.fromDate(r);return{timestampValue:Wd(i.serializer,s)}}if(r instanceof it){let s=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(i.serializer,s)}}if(r instanceof hc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dc)return{bytesValue:PA(i.serializer,r._byteString)};if(r instanceof Ct){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:h_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return d_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${vh(r)}`)}(t,e)}function uS(t,e){let n={};return lA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(t,(r,i)=>{let s=wc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function lS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof hc||t instanceof dc||t instanceof Ct||t instanceof _o||t instanceof fc)}function I_(t,e,n){if(!lS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=vh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Yv(t,e,n){if((e=_e(e))instanceof vo)return e._internalPath;if(typeof e=="string")return E_(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}var E$=new RegExp("[~\\*/\\[\\]]");function E_(t,e,n){if(e.search(E$)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vo(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,a+t+u)}function dS(t,e){return t.some(n=>n.isEqual(e))}var uh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Jv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(T_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Jv=class extends uh{data(){return super.data()}};function T_(t,e){return typeof e=="string"?E_(t,e):e instanceof vo?e._internalPath:e._delegate._internalPath}function T$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pc=class{},gc=class extends pc{};function hS(t,e,...n){let r=[];e instanceof pc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof Xv).length,a=s.filter(u=>u instanceof Zv).length;if(o>1||o>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Zv=class t extends gc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return gS(e._query,n),new Jr(e.firestore,e.converter,Hy(e._query,n))}_parse(e){let n=_h(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){cA(p,h);let _=[];for(let C of p)_.push(aA(u,s,C));m={arrayValue:{values:_}}}else m=aA(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||cA(p,h),m=I$(a,o,p,h==="in"||h==="not-in");return Ge.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var Xv=class t extends pc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:vn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)gS(o,u),o=Hy(o,u)}(e._query,n),new Jr(e.firestore,e.converter,Hy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var e_=class t extends gc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wi(s,o)}(e._query,this._field,this._direction);return new Jr(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Kr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function fS(t,e="asc"){let n=e,r=T_("orderBy",t);return e_._create(r,n)}var t_=class t extends gc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Jr(e.firestore,e.converter,Bd(e._query,this._limit,this._limitType))}};function pS(t){return m$("limit",t),t_._create("limit",t,"F")}function aA(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_A(e)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ke.fromString(n));if(!q.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N0(t,new q(r))}if(n instanceof Ct)return N0(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vh(n)}.`)}function cA(t,e){if(!Array.isArray(t)||t.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gS(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var n_=class{convertValue(e,n="none"){switch(Gi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Zi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ne(o.doubleValue));return new fc(s)}convertGeoPoint(e){return new hc(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=o_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){let n=gr(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ke.fromString(e);Ee(UA(r));let i=new Ud(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||pr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function mS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Hi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},lh=class extends uh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new oo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(T_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},oo=class extends lh{data(e={}){return super.data(e)}},r_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Hi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oo(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new oo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new oo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Hi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:b$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function b$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}var dh=class extends n_{constructor(e){super(),this.firestore=e}convertBytes(e){return new dc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}};function yS(t,e,n){t=fr(t,Ct);let r=fr(t.firestore,Zr),i=mS(t.converter,e,n);return D_(r,[cS(_h(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,hr.none())])}function vS(t,e,n,...r){t=fr(t,Ct);let i=fr(t.firestore,Zr),s=_h(i),o;return o=typeof(e=_e(e))=="string"||e instanceof vo?w$(s,"updateDoc",t._key,e,n,r):_$(s,"updateDoc",t._key,e),D_(i,[o.toMutation(t._key,hr.exists(!0))])}function _S(t,e){let n=fr(t.firestore,Zr),r=w_(t),i=mS(t.converter,e);return D_(n,[cS(_h(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function b_(t,...e){var n,r,i;t=_e(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||oA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(oA(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Ct)l=fr(t.firestore,Zr),h=l_(t._key.path),u={next:p=>{e[o]&&e[o](D$(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=fr(t,Jr);l=fr(p.firestore,Zr),h=p._query;let m=new dh(l);u={next:_=>{e[o]&&e[o](new r_(l,m,p,_))},error:e[o+1],complete:e[o+2]},T$(t._query)}return function(m,_,C,M){let R=new qv(M),k=new Vv(_,R,C);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return QB(yield nA(m),k)})),()=>{R.Za(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return YB(yield nA(m),k)}))}}(oS(l),h,a,u)}function D_(t,e){return function(r,i){let s=new dr;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return i$(yield p$(r),i,s)})),s.promise}(oS(t),e)}function D$(t,e,n){let r=n.docs.get(e._key),i=new dh(t);return new lh(t,i,e._key,r,new Hi(n.hasPendingWrites,n.fromCache),e.converter)}function wS(){return new Qv("serverTimestamp")}(function(e,n=!0){(function(i){wo=i})(Mn),Qe(new Pe("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Zr(new Ty(r.getProvider("auth-internal")),new Ay(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ud(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ue(A0,"4.7.3",e),ue(A0,"4.7.3","esm2017")})();var wh=function(){return wh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wh.apply(this,arguments)};var S$={includeMetadataChanges:!1};function IS(t,e){return e===void 0&&(e=S$),new ie(function(n){var r=b_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function ES(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:wh(wh({},r),(n={},n[e.idField]=t.id,n))}function TS(t){return IS(t,{includeMetadataChanges:!0}).pipe(Z(function(e){return e.docs}))}function bS(t,e){return e===void 0&&(e={}),TS(t).pipe(Z(function(n){return n.map(function(r){return ES(r,e)})}))}var es=class{constructor(e){return e}},DS="firestore",C_=class{constructor(){return Pn(DS)}};var A_=new j("angularfire2.firestore-instances");function R$(t,e){let n=xn(DS,t,e);return n&&new es(n)}function M$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new es(r)}}var N$={provide:C_,deps:[[new Se,A_]]},x$={provide:es,useFactory:R$,deps:[[new Se,A_],Dt]};function CS(t,...e){return ue("angularfire",qt.full,"fst"),ht([x$,N$,{provide:A_,useFactory:M$(t),multi:!0,deps:[ce,Ue,en,zt,[new Se,ji],[new Se,Nn],...e]}])}var AS=ve(bS,!0);var SS=ve(_S,!0);var S_=ve(iS,!0);var RS=ve(w_,!0);var MS=ve(sS,!0);var NS=ve(pS,!0);var xS=ve(fS,!0);var PS=ve(hS,!0);var kS=ve(wS,!0),OS=ve(yS,!0);var FS=ve(vS,!0);var qS="firebasestorage.googleapis.com",zS="storageBucket",P$=2*60*1e3,k$=10*60*1e3,O$=1e3;var Oe=class t extends rt{constructor(e,n,r=0){super(R_(e),`Firebase Storage: ${n} (${R_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return R_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},xe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(xe||{});function R_(t){return"storage/"+t}function V_(){let t="An unknown error occurred, please check the error payload for server response.";return new Oe(xe.UNKNOWN,t)}function F$(t){return new Oe(xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function L$(t){return new Oe(xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V$(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Oe(xe.UNAUTHENTICATED,t)}function U$(){return new Oe(xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function j$(t){return new Oe(xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function GS(){return new Oe(xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WS(){return new Oe(xe.CANCELED,"User canceled the upload/download.")}function B$(t){return new Oe(xe.INVALID_URL,"Invalid URL '"+t+"'.")}function $$(t){return new Oe(xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function H$(){return new Oe(xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zS+"' property when initializing the app?")}function KS(){return new Oe(xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function q$(){return new Oe(xe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function z$(){return new Oe(xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function G$(t){return new Oe(xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function N_(t){return new Oe(xe.INVALID_ARGUMENT,t)}function QS(){return new Oe(xe.APP_DELETED,"The Firebase app was deleted.")}function W$(t){return new Oe(xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ec(t,e){return new Oe(xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ic(t){throw new Oe(xe.INTERNAL_ERROR,"Internal error: "+t)}var _n=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw $$(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l($){$.path_=decodeURIComponent($.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),C={bucket:1,path:3},M=n===qS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",k=new RegExp(`^https?://${M}/${i}/${R}`,"i"),V=[{regex:a,indices:u,postModify:s},{regex:_,indices:C,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let $=0;$<V.length;$++){let Ie=V[$],z=Ie.regex.exec(e);if(z){let E=z[Ie.indices.bucket],v=z[Ie.indices.path];v||(v=""),r=new t(E,v),Ie.postModify(r);break}}if(r==null)throw B$(e);return r}},x_=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function K$(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...R){l||(l=!0,e.apply(null,R))}function p(R){i=setTimeout(()=>{i=null,t(_,u())},R)}function m(){s&&clearTimeout(s)}function _(R,...k){if(l){m();return}if(R){m(),h.call(null,R,...k);return}if(u()||o){m(),h.call(null,R,...k);return}r<64&&(r*=2);let V;a===1?(a=2,V=0):V=(r+Math.random())*1e3,p(V)}let C=!1;function M(R){C||(C=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),p(0)):R||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,M(!0)},n),M}function Q$(t){t(!1)}function Y$(t){return t!==void 0}function J$(t){return typeof t=="function"}function Z$(t){return typeof t=="object"&&!Array.isArray(t)}function bh(t){return typeof t=="string"||t instanceof String}function LS(t){return U_()&&t instanceof Blob}function U_(){return typeof Blob<"u"}function VS(t,e,n,r){if(r<e)throw N_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw N_(`Invalid value for '${t}'. Expected ${n} or less.`)}function Dc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function YS(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Do=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Do||{});function JS(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var P_=class{constructor(e,n,r,i,s,o,a,u,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,C)=>{this.resolve_=_,this.reject_=C,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new bo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Do.NO_ERROR,u=s.getStatus();if(!a||JS(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===Do.ABORT;r(!1,new bo(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new bo(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());Y$(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=V_();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?QS():WS();o(u)}else{let u=GS();o(u)}};this.canceled_?n(!1,new bo(!1,null,!0)):this.backoffId_=K$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Q$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},bo=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function X$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function eH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function nH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function rH(t,e,n,r,i,s,o=!0){let a=YS(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return tH(l,e),X$(l,n),eH(l,s),nH(l,r),new P_(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function iH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sH(...t){let e=iH();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(U_())return new Blob(t);throw new Oe(xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function aH(t){if(typeof atob>"u")throw G$("base-64");return atob(t)}var $n={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Tc=class{constructor(e,n){this.data=e,this.contentType=n||null}};function cH(t,e){switch(t){case $n.RAW:return new Tc(ZS(e));case $n.BASE64:case $n.BASE64URL:return new Tc(XS(t,e));case $n.DATA_URL:return new Tc(lH(e),dH(e))}throw V_()}function ZS(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function uH(t){let e;try{e=decodeURIComponent(t)}catch{throw Ec($n.DATA_URL,"Malformed data URL.")}return ZS(e)}function XS(t,e){switch(t){case $n.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ec(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case $n.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ec(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=aH(e)}catch(i){throw i.message.includes("polyfill")?i:Ec(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Eh=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ec($n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=hH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function lH(t){let e=new Eh(t);return e.base64?XS($n.BASE64,e.rest):uH(e.rest)}function dH(t){return new Eh(t).contentType}function hH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var Th=class t{constructor(e,n){let r=0,i="";LS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(LS(this.data_)){let r=this.data_,i=oH(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(U_()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(sH.apply(null,n))}else{let n=e.map(o=>bh(o)?cH($n.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function eR(t){let e;try{e=JSON.parse(t)}catch{return null}return Z$(e)?e:null}function fH(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function pH(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tR(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function gH(t,e){return e}var st=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||gH}},Ih=null;function mH(t){return!bh(t)||t.length<2?t:tR(t)}function nR(){if(Ih)return Ih;let t=[];t.push(new st("bucket")),t.push(new st("generation")),t.push(new st("metageneration")),t.push(new st("name","fullPath",!0));function e(s,o){return mH(o)}let n=new st("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new st("size");return i.xform=r,t.push(i),t.push(new st("timeCreated")),t.push(new st("updated")),t.push(new st("md5Hash",null,!0)),t.push(new st("cacheControl",null,!0)),t.push(new st("contentDisposition",null,!0)),t.push(new st("contentEncoding",null,!0)),t.push(new st("contentLanguage",null,!0)),t.push(new st("contentType",null,!0)),t.push(new st("metadata","customMetadata",!0)),Ih=t,Ih}function yH(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new _n(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function vH(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return yH(r,t),r}function rR(t,e,n){let r=eR(e);return r===null?null:vH(t,r,n)}function _H(t,e,n,r){let i=eR(e);if(i===null||!bh(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),_=Dc(m,n,r),C=YS({alt:"media",token:l});return _+C})[0]}function iR(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var Xr=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function yr(t){if(!t)throw V_()}function j_(t,e){function n(r,i){let s=rR(t,i,e);return yr(s!==null),s}return n}function wH(t,e){function n(r,i){let s=rR(t,i,e);return yr(s!==null),_H(s,i,t.host,t._protocol)}return n}function Cc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=U$():i=V$():n.getStatus()===402?i=L$(t.bucket):n.getStatus()===403?i=j$(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function sR(t){let e=Cc(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=F$(t.path)),s.serverResponse=i.serverResponse,s}return n}function IH(t,e,n){let r=e.fullServerUrl(),i=Dc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Xr(i,s,j_(t,n),o);return a.errorHandler=sR(e),a}function EH(t,e,n){let r=e.fullServerUrl(),i=Dc(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Xr(i,s,wH(t,n),o);return a.errorHandler=sR(e),a}function TH(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function oR(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=TH(null,e)),r}function bH(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let $=0;$<2;$++)V=V+Math.random().toString().slice(2);return V}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=oR(e,r,i),h=iR(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",_=Th.getBlob(p,r,m);if(_===null)throw KS();let C={name:l.fullPath},M=Dc(s,t.host,t._protocol),R="POST",k=t.maxUploadRetryTime,B=new Xr(M,R,j_(t,n),k);return B.urlParams=C,B.headers=o,B.body=_.uploadData(),B.errorHandler=Cc(e),B}var Co=class{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}};function B_(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{yr(!1)}return yr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function DH(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o=oR(e,r,i),a={name:o.fullPath},u=Dc(s,t.host,t._protocol),l="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=iR(o,n),m=t.maxUploadRetryTime;function _(M){B_(M);let R;try{R=M.getResponseHeader("X-Goog-Upload-URL")}catch{yr(!1)}return yr(bh(R)),R}let C=new Xr(u,l,_,m);return C.urlParams=a,C.headers=h,C.body=p,C.errorHandler=Cc(e),C}function CH(t,e,n,r){let i={"X-Goog-Upload-Command":"query"};function s(l){let h=B_(l,["active","final"]),p=null;try{p=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{yr(!1)}p||yr(!1);let m=Number(p);return yr(!isNaN(m)),new Co(m,r.size(),h==="final")}let o="POST",a=t.maxUploadRetryTime,u=new Xr(n,o,s,a);return u.headers=i,u.errorHandler=Cc(e),u}var US=256*1024;function AH(t,e,n,r,i,s,o,a){let u=new Co(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw q$();let l=u.total-u.current,h=l;i>0&&(h=Math.min(h,i));let p=u.current,m=p+h,_="";h===0?_="finalize":l===h?_="upload, finalize":_="upload";let C={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},M=r.slice(p,m);if(M===null)throw KS();function R($,Ie){let z=B_($,["active","final"]),E=u.current+h,v=r.size(),w;return z==="final"?w=j_(e,s)($,Ie):w=null,new Co(E,v,z==="final",w)}let k="POST",B=e.maxUploadRetryTime,V=new Xr(n,k,R,B);return V.headers=C,V.body=M.uploadData(),V.progressCallback=a||null,V.errorHandler=Cc(t),V}var kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function M_(t){switch(t){case"running":case"pausing":case"canceling":return kt.RUNNING;case"paused":return kt.PAUSED;case"success":return kt.SUCCESS;case"canceled":return kt.CANCELED;case"error":return kt.ERROR;default:return kt.ERROR}}var k_=class{constructor(e,n,r){if(J$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Eo(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var jS=null,O_=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Ic("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},F_=class extends O_{initXhr(){this.xhr_.responseType="text"}};function To(){return jS?jS():new F_}var L_=class{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=nR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(xe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(JS(i.status,[]))if(s)i=GS();else{this.sleepTime=Math.max(this.sleepTime*2,O$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(xe.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let r=DH(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,To,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,r)=>{let i=CH(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,To,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=US*this._chunkMultiplier,n=new Co(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=AH(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}let a=this._ref.storage._makeRequest(o,To,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){US*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let r=IH(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,To,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let r=bH(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,To,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=WS(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=M_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){let s=new k_(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(M_(this._state)){case kt.SUCCESS:Eo(this._resolve.bind(null,this.snapshot))();break;case kt.CANCELED:case kt.ERROR:let n=this._reject;Eo(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(M_(this._state)){case kt.RUNNING:case kt.PAUSED:e.next&&Eo(e.next.bind(e,this.snapshot))();break;case kt.SUCCESS:e.complete&&Eo(e.complete.bind(e))();break;case kt.CANCELED:case kt.ERROR:e.error&&Eo(e.error.bind(e,this._error))();break;default:e.error&&Eo(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var Ao=class t{constructor(e,n){this._service=e,n instanceof _n?this._location=n:this._location=_n.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new _n(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tR(this._location.path)}get storage(){return this._service}get parent(){let e=fH(this._location.path);if(e===null)return null;let n=new _n(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw W$(e)}};function SH(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new L_(t,new Th(e),n)}function RH(t){t._throwIfRoot("getDownloadURL");let e=EH(t.storage,t._location,nR());return t.storage.makeRequestWithTokens(e,To).then(n=>{if(n===null)throw z$();return n})}function MH(t,e){let n=pH(t._location.path,e),r=new _n(t._location.bucket,n);return new Ao(t.storage,r)}function NH(t){return/^[A-Za-z]+:\/\//.test(t)}function xH(t,e){return new Ao(t,e)}function aR(t,e){if(t instanceof bc){let n=t;if(n._bucket==null)throw H$();let r=new Ao(n,n._bucket);return e!=null?aR(r,e):r}else return e!==void 0?MH(t,e):t}function PH(t,e){if(e&&NH(e)){if(t instanceof bc)return xH(t,e);throw N_("To use ref(service, url), the first argument must be a Storage instance.")}else return aR(t,e)}function BS(t,e){let n=e?.[zS];return n==null?null:_n.makeFromBucketSpec(n,t)}function kH(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Xl(i,t.app.options.projectId))}var bc=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=qS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P$,this._maxUploadRetryTime=k$,this._requests=new Set,i!=null?this._bucket=_n.makeFromBucketSpec(i,this._host):this._bucket=BS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_n.makeFromBucketSpec(this._url,e):this._bucket=BS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ao(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new x_(QS());{let o=rH(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},$S="@firebase/storage",HS="0.13.2";var cR="storage";function uR(t,e,n){return t=_e(t),SH(t,e,n)}function lR(t){return t=_e(t),RH(t)}function dR(t,e){return t=_e(t),PH(t,e)}function hR(t=Pt(),e){t=_e(t);let r=bt(t,cR).getImmediate({identifier:e}),i=Zl("storage");return i&&fR(r,...i),r}function fR(t,e,n,r={}){kH(t,e,n,r)}function OH(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new bc(n,r,i,e,Mn)}function FH(){Qe(new Pe(cR,OH,"PUBLIC").setMultipleInstances(!0)),ue($S,HS,""),ue($S,HS,"esm2017")}FH();var ts=class{constructor(e){return e}},pR="storage",$_=class{constructor(){return Pn(pR)}};var H_=new j("angularfire2.storage-instances");function LH(t,e){let n=xn(pR,t,e);return n&&new ts(n)}function VH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ts(r)}}var UH={provide:$_,deps:[[new Se,H_]]},jH={provide:ts,useFactory:LH,deps:[[new Se,H_],Dt]};function gR(t,...e){return ue("angularfire",qt.full,"gcs"),ht([jH,UH,{provide:H_,useFactory:VH(t),multi:!0,deps:[ce,Ue,en,zt,[new Se,ji],[new Se,Nn],...e]}])}var mR=ve(lR,!0);var yR=ve(hR,!0);var vR=ve(dR,!0);var _R=ve(uR,!0);var ER="@firebase/installations",W_="0.6.9";var TR=1e4,bR=`w:${W_}`,DR="FIS_v2",BH="https://firebaseinstallations.googleapis.com/v1",$H=60*60*1e3,HH="installations",qH="Installations";var zH={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},rs=new Tt(HH,qH,zH);function CR(t){return t instanceof rt&&t.code.includes("request-failed")}function AR({projectId:t}){return`${BH}/projects/${t}/installations`}function SR(t){return{token:t.token,requestStatus:2,expiresIn:WH(t.expiresIn),creationTime:Date.now()}}function RR(t,e){return y(this,null,function*(){let r=(yield e.json()).error;return rs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function MR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function GH(t,{refreshToken:e}){let n=MR(t);return n.append("Authorization",KH(e)),n}function NR(t){return y(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function WH(t){return Number(t.replace("s","000"))}function KH(t){return`${DR} ${t}`}function QH(r,i){return y(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=AR(t),o=MR(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let u={fid:n,authVersion:DR,appId:t.appId,sdkVersion:bR},l={method:"POST",headers:o,body:JSON.stringify(u)},h=yield NR(()=>fetch(s,l));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:SR(p.authToken)}}else throw yield RR("Create Installation",h)})}function xR(t){return new Promise(e=>{setTimeout(e,t)})}function YH(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var JH=/^[cdef][\w-]{21}$/,G_="";function ZH(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=XH(t);return JH.test(n)?n:G_}catch{return G_}}function XH(t){return YH(t).substr(0,22)}function Ch(t){return`${t.appName}!${t.appId}`}var PR=new Map;function kR(t,e){let n=Ch(t);OR(n,e),eq(n,e)}function OR(t,e){let n=PR.get(t);if(n)for(let r of n)r(e)}function eq(t,e){let n=tq();n&&n.postMessage({key:t,fid:e}),nq()}var ns=null;function tq(){return!ns&&"BroadcastChannel"in self&&(ns=new BroadcastChannel("[Firebase] FID Change"),ns.onmessage=t=>{OR(t.data.key,t.data.fid)}),ns}function nq(){PR.size===0&&ns&&(ns.close(),ns=null)}var rq="firebase-installations-database",iq=1,is="firebase-installations-store",q_=null;function K_(){return q_||(q_=Oi(rq,iq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(is)}}})),q_}function Dh(t,e){return y(this,null,function*(){let n=Ch(t),i=(yield K_()).transaction(is,"readwrite"),s=i.objectStore(is),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&kR(t,e.fid),e})}function FR(t){return y(this,null,function*(){let e=Ch(t),r=(yield K_()).transaction(is,"readwrite");yield r.objectStore(is).delete(e),yield r.done})}function Ah(t,e){return y(this,null,function*(){let n=Ch(t),i=(yield K_()).transaction(is,"readwrite"),s=i.objectStore(is),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&kR(t,a.fid),a})}function Q_(t){return y(this,null,function*(){let e,n=yield Ah(t.appConfig,r=>{let i=sq(r),s=oq(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===G_?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function sq(t){let e=t||{fid:ZH(),registrationStatus:0};return LR(e)}function oq(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(rs.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aq(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cq(t)}:{installationEntry:e}}function aq(t,e){return y(this,null,function*(){try{let n=yield QH(t,e);return Dh(t.appConfig,n)}catch(n){throw CR(n)&&n.customData.serverCode===409?yield FR(t.appConfig):yield Dh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function cq(t){return y(this,null,function*(){let e=yield wR(t.appConfig);for(;e.registrationStatus===1;)yield xR(100),e=yield wR(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Q_(t);return r||n}return e})}function wR(t){return Ah(t,e=>{if(!e)throw rs.create("installation-not-found");return LR(e)})}function LR(t){return uq(t)?{fid:t.fid,registrationStatus:0}:t}function uq(t){return t.registrationStatus===1&&t.registrationTime+TR<Date.now()}function lq(r,i){return y(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=dq(t,n),o=GH(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let u={installation:{sdkVersion:bR,appId:t.appId}},l={method:"POST",headers:o,body:JSON.stringify(u)},h=yield NR(()=>fetch(s,l));if(h.ok){let p=yield h.json();return SR(p)}else throw yield RR("Generate Auth Token",h)})}function dq(t,{fid:e}){return`${AR(t)}/${e}/authTokens:generate`}function Y_(t,e=!1){return y(this,null,function*(){let n,r=yield Ah(t.appConfig,s=>{if(!VR(s))throw rs.create("not-registered");let o=s.authToken;if(!e&&pq(o))return s;if(o.requestStatus===1)return n=hq(t,e),s;{if(!navigator.onLine)throw rs.create("app-offline");let a=mq(s);return n=fq(t,a),a}});return n?yield n:r.authToken})}function hq(t,e){return y(this,null,function*(){let n=yield IR(t.appConfig);for(;n.authToken.requestStatus===1;)yield xR(100),n=yield IR(t.appConfig);let r=n.authToken;return r.requestStatus===0?Y_(t,e):r})}function IR(t){return Ah(t,e=>{if(!VR(e))throw rs.create("not-registered");let n=e.authToken;return yq(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function fq(t,e){return y(this,null,function*(){try{let n=yield lq(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Dh(t.appConfig,r),n}catch(n){if(CR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield FR(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Dh(t.appConfig,r)}throw n}})}function VR(t){return t!==void 0&&t.registrationStatus===2}function pq(t){return t.requestStatus===2&&!gq(t)}function gq(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$H}function mq(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yq(t){return t.requestStatus===1&&t.requestTime+TR<Date.now()}function vq(t){return y(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Q_(e);return r?r.catch(console.error):Y_(e).catch(console.error),n.fid})}function _q(t,e=!1){return y(this,null,function*(){let n=t;return yield wq(n),(yield Y_(n,e)).token})}function wq(t){return y(this,null,function*(){let{registrationPromise:e}=yield Q_(t);e&&(yield e)})}function Iq(t){if(!t||!t.options)throw z_("App Configuration");if(!t.name)throw z_("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw z_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function z_(t){return rs.create("missing-app-config-values",{valueName:t})}var UR="installations",Eq="installations-internal",Tq=t=>{let e=t.getProvider("app").getImmediate(),n=Iq(e),r=bt(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},bq=t=>{let e=t.getProvider("app").getImmediate(),n=bt(e,UR).getImmediate();return{getId:()=>vq(n),getToken:i=>_q(n,i)}};function Dq(){Qe(new Pe(UR,Tq,"PUBLIC")),Qe(new Pe(Eq,bq,"PRIVATE"))}Dq();ue(ER,W_);ue(ER,W_,"esm2017");var Cq="/firebase-messaging-sw.js",Aq="/firebase-cloud-messaging-push-scope",zR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sq="https://fcmregistrations.googleapis.com/v1",GR="google.c.a.c_id",Rq="google.c.a.c_l",Mq="google.c.a.ts",Nq="google.c.a.e";var Sh=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Sh||{});function vr(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xq(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var J_="fcm_token_details_db",Pq=5,jR="fcm_token_object_Store";function kq(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(J_))return null;let e=null;return(yield Oi(J_,Pq,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(jR))return;let u=o.objectStore(jR),l=yield u.index("fcmSenderId").get(t);if(yield u.clear(),!!l){if(i===2){let h=l;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:vr(h.vapidKey)}}}else if(i===3){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:vr(h.auth),p256dh:vr(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:vr(h.vapidKey)}}}else if(i===4){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:vr(h.auth),p256dh:vr(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:vr(h.vapidKey)}}}}})})).close(),yield rd(J_),yield rd("fcm_vapid_details_db"),yield rd("undefined"),Oq(e)?e:null})}function Oq(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var Fq="firebase-messaging-database",Lq=1,Ac="firebase-messaging-store",Z_=null;function WR(){return Z_||(Z_=Oi(Fq,Lq,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ac)}}})),Z_}function Vq(t){return y(this,null,function*(){let e=KR(t),r=yield(yield WR()).transaction(Ac).objectStore(Ac).get(e);if(r)return r;{let i=yield kq(t.appConfig.senderId);if(i)return yield tw(t,i),i}})}function tw(t,e){return y(this,null,function*(){let n=KR(t),i=(yield WR()).transaction(Ac,"readwrite");return yield i.objectStore(Ac).put(e,n),yield i.done,e})}function KR({appConfig:t}){return t.appId}var Uq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},mt=new Tt("messaging","Messaging",Uq);function jq(t,e){return y(this,null,function*(){let n=yield rw(t),r=QR(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(nw(t.appConfig),i)).json()}catch(o){throw mt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw mt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw mt.create("token-subscribe-no-token");return s.token})}function Bq(t,e){return y(this,null,function*(){let n=yield rw(t),r=QR(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${nw(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw mt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw mt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw mt.create("token-update-no-token");return s.token})}function $q(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield rw(t)};try{let s=yield(yield fetch(`${nw(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw mt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw mt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function nw({projectId:t}){return`${Sq}/projects/${t}/registrations`}function rw(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function QR({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==zR&&(i.web.applicationPubKey=r),i}var Hq=7*24*60*60*1e3;function qq(t){return y(this,null,function*(){let e=yield Gq(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:vr(e.getKey("auth")),p256dh:vr(e.getKey("p256dh"))},r=yield Vq(t.firebaseDependencies);if(r){if(Wq(r.subscriptionOptions,n))return Date.now()>=r.createTime+Hq?zq(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield $q(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return BR(t.firebaseDependencies,n)}else return BR(t.firebaseDependencies,n)})}function zq(t,e){return y(this,null,function*(){try{let n=yield Bq(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield tw(t.firebaseDependencies,r),n}catch(n){throw n}})}function BR(t,e){return y(this,null,function*(){let r={token:yield jq(t,e),createTime:Date.now(),subscriptionOptions:e};return yield tw(t,r),r.token})}function Gq(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xq(e)})})}function Wq(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function $R(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Kq(e,t),Qq(e,t),Yq(e,t),e}function Kq(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function Qq(t,e){e.data&&(t.data=e.data)}function Yq(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}function Jq(t){return typeof t=="object"&&!!t&&GR in t}Zq("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Zq(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Xq(t){if(!t||!t.options)throw X_("App Configuration Object");if(!t.name)throw X_("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw X_(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function X_(t){return mt.create("missing-app-config-values",{valueName:t})}var ew=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=Xq(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function ez(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(Cq,{scope:Aq}),t.swRegistration.update().catch(()=>{})}catch(e){throw mt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function tz(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield ez(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw mt.create("invalid-sw-registration");t.swRegistration=e}})}function nz(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=zR)})}function YR(t,e){return y(this,null,function*(){if(!navigator)throw mt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw mt.create("permission-blocked");return yield nz(t,e?.vapidKey),yield tz(t,e?.serviceWorkerRegistration),qq(t)})}function rz(t,e,n){return y(this,null,function*(){let r=iz(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[GR],message_name:n[Rq],message_time:n[Mq],message_device_time:Math.floor(Date.now()/1e3)})})}function iz(t){switch(t){case Sh.NOTIFICATION_CLICKED:return"notification_open";case Sh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function sz(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Sh.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler($R(n)):t.onMessageHandler.next($R(n)));let r=n.data;Jq(r)&&r[Nq]==="1"&&(yield rz(t,n.messageType,r))})}var HR="@firebase/messaging",qR="0.12.12";var oz=t=>{let e=new ew(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>sz(e,n)),e},az=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>YR(e,r)}};function cz(){Qe(new Pe("messaging",oz,"PUBLIC")),Qe(new Pe("messaging-internal",az,"PRIVATE")),ue(HR,qR),ue(HR,qR,"esm2017")}function iw(){return y(this,null,function*(){try{yield ed()}catch{return!1}return typeof window<"u"&&$r()&&cC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function uz(t,e){if(!navigator)throw mt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function JR(t=Pt()){return iw().then(e=>{if(!e)throw mt.create("unsupported-browser")},e=>{throw mt.create("indexed-db-unsupported")}),bt(_e(t),"messaging").getImmediate()}function ZR(t,e){return y(this,null,function*(){return t=_e(t),YR(t,e)})}function XR(t,e){return t=_e(t),uz(t,e)}cz();var ss=class{constructor(e){return e}},eM="messaging",sw=class{constructor(){return Pn(eM)}};var tM="__angularfire_symbol__messagingIsSupported",ow="__angularfire_symbol__messagingIsSupportedValue";globalThis[tM]||=iw().then(t=>globalThis[ow]=t).catch(()=>globalThis[ow]=!1);var Rh={async:()=>globalThis[tM],sync:()=>{let t=globalThis[ow];if(t===void 0)throw new Error(CC("Messaging"));return t}},aw=new j("angularfire2.messaging-instances");function lz(t,e){if(!Rh.sync())return null;let n=xn(eM,t,e);return n&&new ss(n)}function dz(t){return(e,n)=>{if(!Rh.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new ss(r)}}var hz={provide:sw,deps:[[new Se,aw]]},fz={provide:ss,useFactory:lz,deps:[[new Se,aw],Dt]};function nM(t,...e){return ue("angularfire",qt.full,"fcm"),ht([fz,hz,{provide:Ws,useValue:Rh.async,multi:!0},{provide:aw,useFactory:dz(t),multi:!0,deps:[ce,Ue,en,zt,...e]}])}var NX=Rh.async;var rM=ve(JR,!0),iM=ve(ZR,!0),sM=ve(XR,!1);var ne="primary",Hc=Symbol("RouteTitle"),hw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function xo(t){return new hw(t)}function gz(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function mz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hn(t[n],e[n]))return!1;return!0}function Hn(t,e){let n=t?fw(t):void 0,r=e?fw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!pM(t[i],e[i]))return!1;return!0}function fw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function pM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function gM(t){return t.length>0?t[t.length-1]:null}function ri(t){return Gf(t)?t:jr(t)?Me(Promise.resolve(t)):G(t)}var yz={exact:yM,subset:vM},mM={exact:vz,subset:_z,ignored:()=>!0};function oM(t,e,n){return yz[n.paths](t.root,e.root,n.matrixParams)&&mM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function vz(t,e){return Hn(t,e)}function yM(t,e,n){if(!as(t.segments,e.segments)||!xh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!yM(t.children[r],e.children[r],n))return!1;return!0}function _z(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pM(t[n],e[n]))}function vM(t,e,n){return _M(t,e,e.segments,n)}function _M(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!as(i,n)||e.hasChildren()||!xh(i,n,r))}else if(t.segments.length===n.length){if(!as(t.segments,n)||!xh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!vM(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!as(t.segments,i)||!xh(t.segments,i,r)||!t.children[ne]?!1:_M(t.children[ne],e,s,r)}}function xh(t,e,n){return e.every((r,i)=>mM[n](t[i].parameters,r.parameters))}var ei=class{constructor(e=new we([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=xo(this.queryParams),this._queryParamMap}toString(){return Ez.serialize(this)}},we=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ph(this)}},os=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=xo(this.parameters),this._parameterMap}toString(){return IM(this)}};function wz(t,e){return as(t,e)&&t.every((n,r)=>Hn(n.parameters,e[r].parameters))}function as(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Iz(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var qc=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new kc,providedIn:"root"})}}return t})(),kc=class{parse(e){let n=new gw(e);return new ei(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Sc(e.root,!0)}`,r=Dz(e.queryParams),i=typeof e.fragment=="string"?`#${Tz(e.fragment)}`:"";return`${n}${r}${i}`}},Ez=new kc;function Ph(t){return t.segments.map(e=>IM(e)).join("/")}function Sc(t,e){if(!t.hasChildren())return Ph(t);if(e){let n=t.children[ne]?Sc(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ne&&r.push(`${i}:${Sc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Iz(t,(r,i)=>i===ne?[Sc(t.children[ne],!1)]:[`${i}:${Sc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${Ph(t)}/${n[0]}`:`${Ph(t)}/(${n.join("//")})`}}function wM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mh(t){return wM(t).replace(/%3B/gi,";")}function Tz(t){return encodeURI(t)}function pw(t){return wM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kh(t){return decodeURIComponent(t)}function aM(t){return kh(t.replace(/\+/g,"%20"))}function IM(t){return`${pw(t.path)}${bz(t.parameters)}`}function bz(t){return Object.entries(t).map(([e,n])=>`;${pw(e)}=${pw(n)}`).join("")}function Dz(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Mh(n)}=${Mh(i)}`).join("&"):`${Mh(n)}=${Mh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Cz=/^[^\/()?;#]+/;function cw(t){let e=t.match(Cz);return e?e[0]:""}var Az=/^[^\/()?;=#]+/;function Sz(t){let e=t.match(Az);return e?e[0]:""}var Rz=/^[^=?&#]+/;function Mz(t){let e=t.match(Rz);return e?e[0]:""}var Nz=/^[^&#]+/;function xz(t){let e=t.match(Nz);return e?e[0]:""}var gw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new we(e,n)),r}parseSegment(){let e=cw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new os(kh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Sz(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=cw(this.remaining);i&&(r=i,this.capture(r))}e[kh(n)]=kh(r)}parseQueryParam(e){let n=Mz(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=xz(this.remaining);o&&(r=o,this.capture(r))}let i=aM(n),s=aM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=cw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ne);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ne]:new we([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function EM(t){return t.segments.length>0?new we([],{[ne]:t}):t}function TM(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=TM(i);if(r===ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new we(t.segments,e);return Pz(n)}function Pz(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new we(t.segments.concat(e.segments),e.children)}return t}function Po(t){return t instanceof ei}function kz(t,e,n=null,r=null){let i=bM(t);return DM(i,e,n,r)}function bM(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new we(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=EM(r);return e??i}function DM(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return uw(i,i,i,n,r);let s=Oz(e);if(s.toRoot())return uw(i,i,new we([],{}),n,r);let o=Fz(s,i,t),a=o.processChildren?Nc(o.segmentGroup,o.index,s.commands):AM(o.segmentGroup,o.index,s.commands);return uw(i,o.segmentGroup,a,n,r)}function Oh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Oc(t){return typeof t=="object"&&t!=null&&t.outlets}function uw(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=CM(t,e,n);let a=EM(TM(o));return new ei(a,s,i)}function CM(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=CM(s,e,n)}),new we(t.segments,r)}var Fh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Oh(r[0]))throw new W(4003,!1);let i=r.find(Oc);if(i&&i!==gM(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Oz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Fh(n,e,r)}var Mo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Fz(t,e,n){if(t.isAbsolute)return new Mo(e,!0,0);if(!n)return new Mo(e,!1,NaN);if(n.parent===null)return new Mo(n,!0,0);let r=Oh(t.commands[0])?0:1,i=n.segments.length-1+r;return Lz(n,i,t.numberOfDoubleDots)}function Lz(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Mo(r,!1,i-s)}function Vz(t){return Oc(t[0])?t[0].outlets:{[ne]:t}}function AM(t,e,n){if(t??=new we([],{}),t.segments.length===0&&t.hasChildren())return Nc(t,e,n);let r=Uz(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new we(t.segments.slice(0,r.pathIndex),{});return s.children[ne]=new we(t.segments.slice(r.pathIndex),t.children),Nc(s,0,i)}else return r.match&&i.length===0?new we(t.segments,{}):r.match&&!t.hasChildren()?mw(t,e,n):r.match?Nc(t,0,i):mw(t,e,n)}function Nc(t,e,n){if(n.length===0)return new we(t.segments,{});{let r=Vz(n),i={};if(Object.keys(r).some(s=>s!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let s=Nc(t.children[ne],e,n);return new we(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=AM(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new we(t.segments,i)}}function Uz(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Oc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!uM(u,l,o))return s;r+=2}else{if(!uM(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Oc(s)){let u=jz(s.outlets);return new we(r,u)}if(i===0&&Oh(n[0])){let u=t.segments[e];r.push(new os(u.path,cM(n[0]))),i++;continue}let o=Oc(s)?s.outlets[ne]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Oh(a)?(r.push(new os(o,cM(a))),i+=2):(r.push(new os(o,{})),i++)}return new we(r,{})}function jz(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=mw(new we([],{}),0,r))}),e}function cM(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function uM(t,e,n){return t==n.path&&Hn(e,n.parameters)}var xc="imperative",et=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(et||{}),nn=class{constructor(e,n){this.id=e,this.url=n}},ko=class extends nn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=et.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},_r=class extends nn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=et.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Qt||{}),Lh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Lh||{}),ti=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=et.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ni=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=et.NavigationSkipped}},Fc=class extends nn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=et.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Vh=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vw=class extends nn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=et.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_w=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ww=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=et.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iw=class{constructor(e){this.route=e,this.type=et.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ew=class{constructor(e){this.route=e,this.type=et.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tw=class{constructor(e){this.snapshot=e,this.type=et.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bw=class{constructor(e){this.snapshot=e,this.type=et.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dw=class{constructor(e){this.snapshot=e,this.type=et.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cw=class{constructor(e){this.snapshot=e,this.type=et.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=et.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Lc=class{},Vc=class{constructor(e){this.url=e}};var Aw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zc,this.attachRef=null}},zc=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Aw,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),jh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Sw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Sw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Rw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Rw(e,this._root).map(n=>n.value)}};function Sw(t,e){if(t===e.value)return e;for(let n of e.children){let r=Sw(t,n);if(r)return r}return null}function Rw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Rw(t,n);if(r.length)return r.unshift(e),r}return[]}var Kt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ro(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Bh=class extends jh{constructor(e,n){super(e),this.snapshot=n,Uw(this,e)}toString(){return this.snapshot.toString()}};function SM(t){let e=Bz(t),n=new nt([new os("",{})]),r=new nt({}),i=new nt({}),s=new nt({}),o=new nt(""),a=new cs(n,r,s,o,i,ne,t,e.root);return a.snapshot=e.root,new Bh(new Kt(a,[]),e)}function Bz(t){let e={},n={},r={},i="",s=new Uc([],e,r,i,n,ne,t,null,{});return new $h("",new Kt(s,[]))}var cs=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Z(l=>l[Hc]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Z(e=>xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Z(e=>xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vw(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&MM(i)&&(r.resolve[Hc]=i.title),r}var Uc=class{get title(){return this.data?.[Hc]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},$h=class extends jh{constructor(e,n){super(n),this.url=e,Uw(this,n)}toString(){return RM(this._root)}};function Uw(t,e){e.value._routerState=t,e.children.forEach(n=>Uw(t,n))}function RM(t){let e=t.children.length>0?` { ${t.children.map(RM).join(", ")} } `:"";return`${t.value}${e}`}function lw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Hn(e.params,n.params)||t.paramsSubject.next(n.params),mz(e.url,n.url)||t.urlSubject.next(n.url),Hn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Mw(t,e){let n=Hn(t.params,e.params)&&wz(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Mw(t.parent,e.parent))}function MM(t){return typeof t.title=="string"||t.title===null}var jw=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new It,this.deactivateEvents=new It,this.attachEvents=new It,this.detachEvents=new It,this.parentContexts=x(zc),this.location=x(Ll),this.changeDetector=x(Br),this.environmentInjector=x(Mt),this.inputBinder=x(Gh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Nw(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Zn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hs]})}}return t})(),Nw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===cs?this.route:e===zc?this.childContexts:this.parent.get(e,n)}},Gh=new j(""),lM=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=aa([r.queryParams,r.params,r.data]).pipe(jt(([s,o,a],u)=>(a=L(L(L({},s),o),a),u===0?G(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=OD(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function $z(t,e,n){let r=jc(t,e._root,n?n._root:void 0);return new Bh(r,e)}function jc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Hz(t,e,n);return new Kt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jc(t,a)),o}}let r=qz(e.value),i=e.children.map(s=>jc(t,s));return new Kt(r,i)}}function Hz(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return jc(t,r,i);return jc(t,r)})}function qz(t){return new cs(new nt(t.url),new nt(t.params),new nt(t.queryParams),new nt(t.fragment),new nt(t.data),t.outlet,t.component,t)}var NM="ngNavigationCancelingError";function xM(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Po(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PM(!1,Qt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function PM(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[NM]=!0,n.cancellationCode=e,n}function zz(t){return kM(t)&&Po(t.url)}function kM(t){return!!t&&t[NM]}var Gz=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Cn({type:t,selectors:[["ng-component"]],standalone:!0,features:[An],decls:1,vars:0,template:function(r,i){r&1&&Ke(0,"router-outlet")},dependencies:[jw],encapsulation:2})}}return t})();function Wz(t,e){return t.providers&&!t._injector&&(t._injector=Vl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Bw(t){let e=t.children&&t.children.map(Bw),n=e?Te(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=Gz),n}function qn(t){return t.outlet||ne}function Kz(t,e){let n=t.filter(r=>qn(r)===e);return n.push(...t.filter(r=>qn(r)!==e)),n}function Gc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Qz=(t,e,n,r)=>Z(i=>(new xw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),xw=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),lw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ro(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ro(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ro(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ro(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Cw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new bw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(lw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),lw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Gc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Hh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},No=class{constructor(e,n){this.component=e,this.route=n}};function Yz(t,e,n){let r=t._root,i=e?e._root:null;return Rc(r,i,n,[r.value])}function Jz(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Fo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!ST(t)?t:e.get(t):r}function Rc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ro(e);return t.children.forEach(o=>{Zz(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Pc(a,n.getContext(o),i)),i}function Zz(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Xz(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Hh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Rc(t,e,a?a.children:null,r,i):Rc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new No(a.outlet.component,o))}else o&&Pc(e,a,i),i.canActivateChecks.push(new Hh(r)),s.component?Rc(t,null,a?a.children:null,r,i):Rc(t,null,n,r,i);return i}function Xz(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!as(t.url,e.url);case"pathParamsOrQueryParamsChange":return!as(t.url,e.url)||!Hn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mw(t,e)||!Hn(t.queryParams,e.queryParams);case"paramsChange":default:return!Mw(t,e)}}function Pc(t,e,n){let r=Ro(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Pc(o,e.children.getContext(s),n):Pc(o,null,n):Pc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new No(e.outlet.component,i)):n.canDeactivateChecks.push(new No(null,i)):n.canDeactivateChecks.push(new No(null,i))}function Wc(t){return typeof t=="function"}function eG(t){return typeof t=="boolean"}function tG(t){return t&&Wc(t.canLoad)}function nG(t){return t&&Wc(t.canActivate)}function rG(t){return t&&Wc(t.canActivateChild)}function iG(t){return t&&Wc(t.canDeactivate)}function sG(t){return t&&Wc(t.canMatch)}function OM(t){return t instanceof Kn||t?.name==="EmptyError"}var Nh=Symbol("INITIAL_VALUE");function Oo(){return jt(t=>aa(t.map(e=>e.pipe(an(1),Gu(Nh)))).pipe(Z(e=>{for(let n of e)if(n!==!0){if(n===Nh)return Nh;if(n===!1||n instanceof ei)return n}return!0}),Ut(e=>e!==Nh),an(1)))}function oG(t,e){return Be(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(Te(L({},n),{guardsResult:!0})):aG(o,r,i,t).pipe(Be(a=>a&&eG(a)?cG(r,s,t,e):G(a)),Z(a=>Te(L({},n),{guardsResult:a})))})}function aG(t,e,n,r){return Me(t).pipe(Be(i=>fG(i.component,i.route,n,e,r)),wn(i=>i!==!0,!0))}function cG(t,e,n,r){return Me(e).pipe(fi(i=>Ds(lG(i.route.parent,r),uG(i.route,r),hG(t,i.path,n),dG(t,i.route,n))),wn(i=>i!==!0,!0))}function uG(t,e){return t!==null&&e&&e(new Dw(t)),G(!0)}function lG(t,e){return t!==null&&e&&e(new Tw(t)),G(!0)}function dG(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Hu(()=>{let o=Gc(e)??n,a=Fo(s,o),u=nG(a)?a.canActivate(e,t):Xn(o,()=>a(e,t));return ri(u).pipe(wn())}));return G(i).pipe(Oo())}function hG(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Jz(o)).filter(o=>o!==null).map(o=>Hu(()=>{let a=o.guards.map(u=>{let l=Gc(o.node)??n,h=Fo(u,l),p=rG(h)?h.canActivateChild(r,t):Xn(l,()=>h(r,t));return ri(p).pipe(wn())});return G(a).pipe(Oo())}));return G(s).pipe(Oo())}function fG(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=Gc(e)??i,l=Fo(a,u),h=iG(l)?l.canDeactivate(t,e,n,r):Xn(u,()=>l(t,e,n,r));return ri(h).pipe(wn())});return G(o).pipe(Oo())}function pG(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=Fo(o,t),u=tG(a)?a.canLoad(e,n):Xn(t,()=>a(e,n));return ri(u)});return G(s).pipe(Oo(),FM(r))}function FM(t){return di(We(e=>{if(Po(e))throw xM(t,e)}),Z(e=>e===!0))}function gG(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=Fo(o,t),u=sG(a)?a.canMatch(e,n):Xn(t,()=>a(e,n));return ri(u)});return G(s).pipe(Oo(),FM(r))}var Bc=class{constructor(e){this.segmentGroup=e||null}},qh=class extends Error{constructor(e){super(),this.urlTree=e}};function So(t){return Ts(new Bc(t))}function mG(t){return Ts(new W(4e3,!1))}function yG(t){return Ts(PM(!1,Qt.GuardRejected))}var Pw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[ne])return mG(e.redirectTo);i=i.children[ne]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new qh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ei(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new we(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},kw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vG(t,e,n,r,i){let s=$w(t,e,n);return s.matched?(r=Wz(e,r),gG(r,e,n,i).pipe(Z(o=>o===!0?s:L({},kw)))):G(s)}function $w(t,e,n){if(e.path==="**")return _G(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},kw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||gz)(n,t,e);if(!i)return L({},kw);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _G(t){return{matched:!0,parameters:t.length>0?gM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function dM(t,e,n,r){return n.length>0&&EG(t,n,r)?{segmentGroup:new we(e,IG(r,new we(n,t.children))),slicedSegments:[]}:n.length===0&&TG(t,n,r)?{segmentGroup:new we(t.segments,wG(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new we(t.segments,t.children),slicedSegments:n}}function wG(t,e,n,r){let i={};for(let s of n)if(Wh(t,e,s)&&!r[qn(s)]){let o=new we([],{});i[qn(s)]=o}return L(L({},r),i)}function IG(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&qn(r)!==ne){let i=new we([],{});n[qn(r)]=i}return n}function EG(t,e,n){return n.some(r=>Wh(t,e,r)&&qn(r)!==ne)}function TG(t,e,n){return n.some(r=>Wh(t,e,r))}function Wh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function bG(t,e,n,r){return qn(t)!==r&&(r===ne||!Wh(e,n,t))?!1:$w(e,t,n).matched}function DG(t,e,n){return e.length===0&&!t.children[n]}var Ow=class{};function CG(t,e,n,r,i,s,o="emptyOnly"){return new Fw(t,e,n,r,i,o,s).recognize()}var AG=31,Fw=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Pw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=dM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(n=>{let r=new Uc([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,{}),i=new Kt(r,n),s=new $h("",i),o=kz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ne).pipe(Sr(r=>{if(r instanceof qh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Vw(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Z(s=>s instanceof Kt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Me(i).pipe(fi(s=>{let o=r.children[s],a=Kz(n,s);return this.processSegmentGroup(e,a,o,s)}),zu((s,o)=>(s.push(...o),s)),Rr(null),Qf(),Be(s=>{if(s===null)return So(r);let o=LM(s);return SG(o),G(o)}))}processSegment(e,n,r,i,s,o){return Me(n).pipe(fi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Sr(u=>{if(u instanceof Bc)return G(null);throw u}))),wn(a=>!!a),Sr(a=>{if(OM(a))return DG(r,i,s)?G(new Ow):So(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return bG(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):So(i):So(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=$w(n,i,s);if(!a)return So(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AG&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Be(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=vG(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(jt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(jt(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,_=new Uc(h,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,MG(r),qn(r),r.component??r._loadedComponent??null,r,NG(r)),{segmentGroup:C,slicedSegments:M}=dM(n,h,p,u);if(M.length===0&&C.hasChildren())return this.processChildren(l,u,C).pipe(Z(k=>k===null?null:new Kt(_,k)));if(u.length===0&&M.length===0)return G(new Kt(_,[]));let R=qn(r)===s;return this.processSegment(l,u,C,M,R?ne:s,!0).pipe(Z(k=>new Kt(_,k instanceof Kt?[k]:[])))}))):So(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):pG(e,n,r,this.urlSerializer).pipe(Be(i=>i?this.configLoader.loadChildren(e,n).pipe(We(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):yG(n))):G({routes:[],injector:e})}};function SG(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function RG(t){let e=t.value.routeConfig;return e&&e.path===""}function LM(t){let e=[],n=new Set;for(let r of t){if(!RG(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=LM(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!n.has(r))}function MG(t){return t.data||{}}function NG(t){return t.resolve||{}}function xG(t,e,n,r,i,s){return Be(o=>CG(t,e,n,r,o.extractedUrl,i,s).pipe(Z(({state:a,tree:u})=>Te(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function PG(t,e){return Be(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of VM(u))o.add(l);let a=0;return Me(o).pipe(fi(u=>s.has(u)?kG(u,r,t,e):(u.data=Vw(u,u.parent,t).resolve,G(void 0))),We(()=>a++),Cs(1),Be(u=>a===o.size?G(n):Vt))})}function VM(t){let e=t.children.map(n=>VM(n)).flat();return[t,...e]}function kG(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!MM(i)&&(s[Hc]=i.title),OG(s,t,e,r).pipe(Z(o=>(t._resolvedData=o,t.data=Vw(t,t.parent,n).resolve,null)))}function OG(t,e,n,r){let i=fw(t);if(i.length===0)return G({});let s={};return Me(i).pipe(Be(o=>FG(t[o],e,n,r).pipe(wn(),We(a=>{s[o]=a}))),Cs(1),Kf(s),Sr(o=>OM(o)?Vt:Ts(o)))}function FG(t,e,n,r){let i=Gc(e)??r,s=Fo(t,i),o=s.resolve?s.resolve(e,n):Xn(i,()=>s(e,n));return ri(o)}function dw(t){return jt(e=>{let n=t(e);return n?Me(n).pipe(Z(()=>e)):G(e)})}var UM=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ne);return r}getResolvedTitleForRoute(n){return n.data[Hc]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(LG),providedIn:"root"})}}return t})(),LG=(()=>{class t extends UM{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(K(XD))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Kc=new j("",{providedIn:"root",factory:()=>({})}),$c=new j(""),Hw=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(Hl)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ri(n.loadComponent()).pipe(Z(jM),We(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),ca(()=>{this.componentLoaders.delete(n)})),i=new _s(r,()=>new _t).pipe(vs());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=VG(r,this.compiler,n,this.onLoadEndListener).pipe(ca(()=>{this.childrenLoaders.delete(r)})),o=new _s(s,()=>new _t).pipe(vs());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function VG(t,e,n,r){return ri(t.loadChildren()).pipe(Z(jM),Be(i=>i instanceof Ta||Array.isArray(i)?G(i):Me(e.compileModuleAsync(i))),Z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get($c,[],{optional:!0,self:!0}).flat()),{routes:o.map(Bw),injector:s}}))}function UG(t){return t&&typeof t=="object"&&"default"in t}function jM(t){return UG(t)?t.default:t}var qw=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(jG),providedIn:"root"})}}return t})(),jG=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),BM=new j(""),$M=new j("");function BG(t,e,n){let r=t.get($M),i=t.get(xt);return t.get(ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),$G(t))),{onViewTransitionCreated:u}=r;return u&&Xn(t,()=>u({transition:a,from:e,to:n})),o})}function $G(t){return new Promise(e=>{Fl(e,{injector:t})})}var zw=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _t,this.transitionAbortSubject=new _t,this.configLoader=x(Hw),this.environmentInjector=x(Mt),this.urlSerializer=x(qc),this.rootContexts=x(zc),this.location=x(Ks),this.inputBindingEnabled=x(Gh,{optional:!0})!==null,this.titleStrategy=x(UM),this.options=x(Kc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(qw),this.createViewTransition=x(BM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Iw(i)),r=i=>this.events.next(new Ew(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Te(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new nt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:xc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ut(s=>s.id!==0),Z(s=>Te(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jt(s=>{let o=!1,a=!1;return G(s).pipe(jt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Qt.SupersededByNewNavigation),Vt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Te(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.rawUrl),p,Lh.IgnoredSameUrlNavigation)),u.resolve(null),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(jt(p=>{let m=this.transitions?.getValue();return this.events.next(new ko(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Vt:Promise.resolve(p)}),xG(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),We(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Te(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Vh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:C,extras:M}=u,R=new ko(p,this.urlSerializer.serialize(m),_,C);this.events.next(R);let k=SM(this.rootComponentType).snapshot;return this.currentTransition=s=Te(L({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:Te(L({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,G(s)}else{let p="";return this.events.next(new ni(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Lh.IgnoredByUrlHandlingStrategy)),u.resolve(null),Vt}}),We(u=>{let l=new yw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Z(u=>(this.currentTransition=s=Te(L({},u),{guards:Yz(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),oG(this.environmentInjector,u=>this.events.next(u)),We(u=>{if(s.guardsResult=u.guardsResult,Po(u.guardsResult))throw xM(this.urlSerializer,u.guardsResult);let l=new vw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Qt.GuardRejected),!1)),dw(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(We(l=>{let h=new _w(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),jt(l=>{let h=!1;return G(l).pipe(PG(this.paramsInheritanceStrategy,this.environmentInjector),We({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Qt.NoDataFromResolver)}}))}),We(l=>{let h=new ww(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),dw(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(We(m=>{h.component=m}),Z(()=>{})));for(let m of h.children)p.push(...l(m));return p};return aa(l(u.targetSnapshot.root)).pipe(Rr(null),an(1))}),dw(()=>this.afterPreactivation()),jt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Me(h).pipe(Z(()=>s)):G(s)}),Z(u=>{let l=$z(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Te(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),We(()=>{this.events.next(new Lc)}),Qz(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),an(1),We({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _r(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Yf(this.transitionAbortSubject.pipe(We(u=>{throw u}))),ca(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Qt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sr(u=>{if(a=!0,kM(u))this.events.next(new ti(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),zz(u)?this.events.next(new Vc(u.url)):s.resolve(!1);else{this.events.next(new Fc(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(n.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return Vt}))}))}cancelNavigationTransition(n,r,i){let s=new ti(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function HG(t){return t!==xc}var qG=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(zG),providedIn:"root"})}}return t})(),Lw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},zG=(()=>{class t extends Lw{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ma(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),HM=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(GG),providedIn:"root"})}}return t})(),GG=(()=>{class t extends HM{constructor(){super(...arguments),this.location=x(Ks),this.urlSerializer=x(qc),this.options=x(Kc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(qw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ei,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=SM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ko)this.stateMemento=this.createStateMemento();else if(n instanceof ni)this.rawUrlTree=r.initialUrl;else if(n instanceof Vh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof Lc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof ti&&(n.code===Qt.GuardRejected||n.code===Qt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Fc?this.restoreHistory(r,!0):n instanceof _r&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ma(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Mc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Mc||{});function qM(t,e){t.events.pipe(Ut(n=>n instanceof _r||n instanceof ti||n instanceof Fc||n instanceof ni),Z(n=>n instanceof _r||n instanceof ni?Mc.COMPLETE:(n instanceof ti?n.code===Qt.Redirect||n.code===Qt.SupersededByNewNavigation:!1)?Mc.REDIRECTING:Mc.FAILED),Ut(n=>n!==Mc.REDIRECTING),an(1)).subscribe(()=>{e()})}function WG(t){throw t}var KG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=x(Bl),this.stateManager=x(HM),this.options=x(Kc,{optional:!0})||{},this.pendingTasks=x(Ul),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(zw),this.urlSerializer=x(qc),this.location=x(Ks),this.urlHandlingStrategy=x(qw),this._events=new _t,this.errorHandler=this.options.errorHandler||WG,this.navigated=!1,this.routeReuseStrategy=x(qG),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x($c,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Gh,{optional:!0}),this.eventsSubscription=new Ve,this.isNgZoneEnabled=x(ce)instanceof ce&&ce.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ti&&r.code!==Qt.Redirect&&r.code!==Qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof _r)this.navigated=!0;else if(r instanceof Vc){let o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||HG(i.source)};this.scheduleNavigation(o,xc,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}JG(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Bw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=bM(m)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),p=this.currentUrlTree.root}return DM(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Po(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,xc,null,r)}navigate(n,r={skipLocationChange:!1}){return YG(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},KG):r===!1?i=L({},QG):i=r,Po(n))return oM(this.currentUrlTree,n,i);let s=this.parseUrl(n);return oM(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return qM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function YG(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function JG(t){return!(t instanceof Lc)&&!(t instanceof Vc)}var zh=class{};var ZG=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ut(n=>n instanceof _r),fi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Vl(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Me(i).pipe(bs())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=G(null);let s=i.pipe(Be(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Me([s,o]).pipe(bs())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(K(rn),K(Hl),K(Mt),K(zh),K(Hw))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zM=new j(""),XG=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=x(Mt),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ko?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof _r?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof ni&&n.code===Lh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Uh&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>y(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Fl(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Uh(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Jb()}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function GM(t,...e){return ht([{provide:$c,multi:!0,useValue:t},[],{provide:cs,useFactory:WM,deps:[rn]},{provide:$l,multi:!0,useFactory:KM},e.map(n=>n.\u0275providers)])}function WM(t){return t.routerState.root}function Qc(t,e){return{\u0275kind:t,\u0275providers:e}}function KM(){let t=x(Ue);return e=>{let n=t.get(ka);if(e!==n.components[0])return;let r=t.get(rn),i=t.get(QM);t.get(Gw)===1&&r.initialNavigation(),t.get(YM,null,se.Optional)?.setUpPreloading(),t.get(zM,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QM=new j("",{factory:()=>new _t}),Gw=new j("",{providedIn:"root",factory:()=>1});function e4(){return Qc(2,[{provide:Gw,useValue:0},{provide:Ws,multi:!0,deps:[Ue],useFactory:e=>{let n=e.get(jD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(rn),s=e.get(QM);qM(i,()=>{r(!0)}),e.get(zw).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function t4(){return Qc(3,[{provide:Ws,multi:!0,useFactory:()=>{let e=x(rn);return()=>{e.setUpLocationChangeListener()}}},{provide:Gw,useValue:2}])}var YM=new j("");function n4(t){return Qc(0,[{provide:YM,useExisting:ZG},{provide:zh,useExisting:t}])}function r4(){return Qc(8,[lM,{provide:Gh,useExisting:lM}])}function i4(t){let e=[{provide:BM,useValue:BG},{provide:$M,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return Qc(9,e)}var hM=new j("ROUTER_FORROOT_GUARD"),s4=[Ks,{provide:qc,useClass:kc},rn,zc,{provide:cs,useFactory:WM,deps:[rn]},Hw,[]],JM=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[s4,[],{provide:$c,multi:!0,useValue:n},{provide:hM,useFactory:u4,deps:[[rn,new Se,new OT]]},{provide:Kc,useValue:r||{}},r?.useHash?a4():c4(),o4(),r?.preloadingStrategy?n4(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?l4(r):[],r?.bindToComponentInputs?r4().\u0275providers:[],r?.enableViewTransitions?i4().\u0275providers:[],d4()]}}static forChild(n){return{ngModule:t,providers:[{provide:$c,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(K(hM,8))}}static{this.\u0275mod=Fr({type:t})}static{this.\u0275inj=Or({})}}return t})();function o4(){return{provide:zM,useFactory:()=>{let t=x(qD),e=x(ce),n=x(Kc),r=x(zw),i=x(qc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new XG(i,r,t,e,n)}}}function a4(){return{provide:xi,useClass:$D}}function c4(){return{provide:xi,useClass:Yg}}function u4(t){return"guarded"}function l4(t){return[t.initialNavigation==="disabled"?t4().\u0275providers:[],t.initialNavigation==="enabledBlocking"?e4().\u0275providers:[]]}var fM=new j("");function d4(){return[{provide:fM,useFactory:KM},{provide:$l,multi:!0,useExisting:fM}]}var Lo=(()=>{class t{constructor(){this.firestore=x(es),this.auth=x(ur),this.storage=x(ts),this.messaging=x(ss),this.router=x(rn),this.provider=new Dd,this.LOADING_IMAGE_URL="https://www.google.com/images/spin-32.gif?a",this.user$=Ad(this.auth),this.currentUser=this.auth.currentUser,this.addMessage=(n,r)=>y(this,null,function*(){if(!n&&!r){console.log("addMessage was called without a message",n,r);return}if(this.currentUser===null){console.log("addMessage requires a signed-in user");return}let i={name:this.currentUser.displayName,profilePicUrl:this.currentUser.photoURL,timestamp:kS(),uid:this.currentUser?.uid};n&&(i.text=n),r&&(i.imageUrl=r);try{return yield SS(S_(this.firestore,"messages"),i)}catch(s){console.error("Error writing new message to Firebase Database",s);return}}),this.saveTextMessage=n=>y(this,null,function*(){return this.addMessage(n,null)}),this.loadMessages=()=>{let n=PS(S_(this.firestore,"messages"),xS("timestamp","desc"),NS(12));return AS(n)},this.saveImageMessage=n=>y(this,null,function*(){try{let r=yield this.addMessage(null,this.LOADING_IMAGE_URL),i=`${this.auth.currentUser?.uid}/${n.name}`,s=vR(this.storage,i),o=yield _R(s,n),a=yield mR(s);r&&(yield FS(r,{imageUrl:a,storageUri:o.metadata.fullPath}))}catch(r){console.error("There was an error uploading a file to Cloud Storage:",r)}}),this.requestNotificationsPermissions=()=>y(this,null,function*(){console.log("Requesting notifications permission..."),(yield Notification.requestPermission())==="granted"?(console.log("Notification permission granted."),yield this.saveMessagingDeviceToken()):console.log("Unable to get permission to notify.")}),this.saveMessagingDeviceToken=()=>y(this,null,function*(){try{let n=yield iM(this.messaging);if(n){console.log("Got FCM device token:",n);let r=RS(this.firestore,"fcmTokens",n);yield OS(r,{uid:this.auth.currentUser?.uid}),sM(this.messaging,i=>{console.log("New foreground notification from Firebase Messaging!",i.notification)})}else this.requestNotificationsPermissions()}catch(n){console.error("Unable to get messaging token.",n)}}),this.userSubscription=this.user$.subscribe(n=>{this.currentUser=n})}login(){T0(this.auth,this.provider).then(n=>{let r=Dd.credentialFromResult(n);return this.router.navigate(["/","chat"]),r}).catch(n=>{alert(n)})}logout(){b0(this.auth).then(()=>{this.router.navigate(["/","login"]),console.log("signed out")}).catch(n=>{console.log("sign out error: "+n)})}updateData(n,r){return y(this,null,function*(){})}deleteData(n){return y(this,null,function*(){})}getDocData(n){}getCollectionData(n){}uploadToStorage(n,r,i){return y(this,null,function*(){return null})}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function h4(t,e){if(t&1){let n=jl();ge(0,"div",5)(1,"div",6),Ke(2,"img",7),ge(3,"span",8),Ht(4),De()(),ge(5,"div",9)(6,"div",10)(7,"button",11),Ke(8,"img",12),De()(),ge(9,"ul",13)(10,"li",14),Ke(11,"img",7),ge(12,"span",15),Ht(13),De()(),ge(14,"li")(15,"a",16),Xt("click",function(){Ti(n);let i=Vr();return bi(i.chatService.logout())}),Ht(16," Sign out "),De()()()()()}if(t&2){let n=e;$e(2),Ri("src",n==null?null:n.photoURL,qs)("alt",n==null?null:n.displayName),$e(2),Ur(" ",n==null?null:n.displayName," "),$e(7),Ri("src",n==null?null:n.photoURL,qs)("alt",n==null?null:n.displayName),$e(2),Ur(" ",n==null?null:n.displayName," ")}}var XM=(()=>{class t{constructor(){this.chatService=x(Lo),this.user$=this.chatService.user$}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Cn({type:t,selectors:[["app-header"]],standalone:!0,features:[An],decls:9,vars:3,consts:[[1,"bg-navy-400","px-2","lg:px-4","py-2.5","h-18"],[1,"flex","flex-wrap","justify-between","items-center","max-w-screen"],["href","/",1,"flex","items-center"],["src","assets/FriendlyChatLogo.png","alt","FriendlyChat",1,"mr-3","h-16","sm:h-10","stop-image"],[1,"mr-3","self-center","text-2xl","whitespace-nowrap","font-light","text-white"],[1,"flex","flex-wrap","items-center","content-center","auth"],[1,"hidden","sm:flex","flex-wrap","items-center","content-center","text-white"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"text-white","text-xl","whitespace-nowrap","font-light","px-4","lg:px-5","py-2","lg:py-2.5"],[1,"dropdown","rounded-lg","px-4","py-2","hover:bg-navy-700","transition-colors"],[1,"flex","items-center"],[1,"text-gray-700","inline-flex","items-center","font-semibold"],["src","assets/menu.svg",1,"w-8","h-8"],[1,"dropdown-menu","absolute","hidden","bg-white","w-48","p-1","right-2","shadow-xl","rounded-lg"],[1,"bg-white","flex","flex-row","gap-2","items-center","px-4","py-4","rounded-lg"],[1,"text-navy-200","text-md","whitespace-nowrap"],["href","/",1,"bg-white","hover:bg-navy-20","rounded-md","mt-4","py-3","px-4","block","whitespace-no-wrap","text-navy-500","font-semibold",3,"click"]],template:function(r,i){if(r&1&&(ge(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),Ke(4,"img",3),ge(5,"span",4),Ht(6," Friendly Chat "),De()(),Yn(7,h4,17,6,"div",5),xa(8,"async"),De()()()),r&2){let s;$e(7),Ni(7,(s=Pa(8,1,i.user$))?7:-1,s)}},dependencies:[Wl],styles:[".dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})}}return t})();var eN=(()=>{class t{constructor(){this.title="friendlychat"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Cn({type:t,selectors:[["app-root"]],standalone:!0,features:[An],decls:4,vars:0,consts:[[1,"site-layout"],[1,"container"]],template:function(r,i){r&1&&(ge(0,"div",0),Ke(1,"app-header")(2,"div",1)(3,"router-outlet"),De())},dependencies:[XM,JM,jw]})}}return t})();var Ww={firebase:{apiKey:"AIzaSyBKRGb4IlonwqivSij4na_YwCTwvEKtAZc",authDomain:"friendlychat-9d809.firebaseapp.com",projectId:"friendlychat-9d809",storageBucket:"friendlychat-9d809.firebasestorage.app",messagingSenderId:"249928011007",appId:"1:249928011007:web:c7a7665d610b2dfe0150ca"},reCAPTCHAEnterpriseKey:{key:"6LcGT7IrAAAAAHNthehtPKBLGKM0kV2JmLfGMpui"},reCAPTCHAV3Key:{key:"6Lcnj7IrAAAAAIYqcnTEtpUKGsHhRCnwKXM-Y2xR"}};var Kw=Z(t=>!!t),Kh=(()=>{class t{router;auth;constructor(n,r){this.router=n,this.auth=r}canActivate=(n,r)=>{let i=n.data.authGuardPipe||(()=>Kw);return Ad(this.auth).pipe(an(1),i(n,r),Z(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||t)(K(rn),K(ur))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var tN=t=>di(Kw,Z(e=>e||t)),nN=t=>di(Kw,Z(e=>e&&t||!0));var Qw=(()=>{class t{constructor(){this.chatService=x(Lo),this.user$=this.chatService.user$}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Cn({type:t,selectors:[["app-login-page"]],standalone:!0,features:[An],decls:12,vars:0,consts:[[1,"min-h-[80vh]","h-full","w-full","py-10","flex","flex-wrap","flex-col-reverse","sm:flex-row","items-center","min-w-screen"],[1,"min-w-screen","sm:w-[50%]","h-full","items-center","m-auto"],["src","assets/WithFirebase.png",1,"w-[350px]","m-auto"],[1,"min-w-screen","sm:w-[50%]","flex","flex-col","gap-5","items-center","h-full","gap-5"],["src","assets/FriendlyChatLogo.png",1,"w-[200px]"],[1,"text-navy-600","text-5xl","font-light","mt-5"],[1,"transition-all","w-[400px]","bg-white","shadow-md","flex","flex-wrap","items-center","rounded-lg","p-2","hover:shadow-xl","justify-between",3,"click"],["src","assets/Google.png",1,"w-8","m-2"],[1,"text-slate-700","text-xl","flex-grow"]],template:function(r,i){r&1&&(ge(0,"div",0)(1,"div",1),Ke(2,"img",2),De(),ge(3,"div",3)(4,"div"),Ke(5,"img",4),ge(6,"span",5),Ht(7,"Friendly Chat"),De()(),ge(8,"button",6),Xt("click",function(){return i.chatService.login()}),Ke(9,"img",7),ge(10,"span",8),Ht(11,"Sign in with Google"),De()()()())}})}}return t})();var lN=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(He(zs),He(Ci))}}static{this.\u0275dir=Zn({type:t})}}return t})(),f4=(()=>{class t extends lN{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Ma(t)))(i||t)}})()}static{this.\u0275dir=Zn({type:t,features:[Gs]})}}return t})(),dN=new j("");var p4={provide:dN,useExisting:Ca(()=>Zh),multi:!0};function g4(){let t=rr()?rr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var m4=new j(""),Zh=(()=>{class t extends lN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!g4())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(He(zs),He(Ci),He(m4,8))}}static{this.\u0275dir=Zn({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Xt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[jg([p4]),Gs]})}}return t})();var y4=new j(""),v4=new j("");function hN(t){return t!=null}function fN(t){return jr(t)?Me(t):t}function pN(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function gN(t,e){return e.map(n=>n(t))}function _4(t){return!t.validate}function mN(t){return t.map(e=>_4(e)?e:n=>e.validate(n))}function w4(t){if(!t)return null;let e=t.filter(hN);return e.length==0?null:function(n){return pN(gN(n,e))}}function yN(t){return t!=null?w4(mN(t)):null}function I4(t){if(!t)return null;let e=t.filter(hN);return e.length==0?null:function(n){let r=gN(n,e).map(fN);return Wf(r).pipe(Z(pN))}}function vN(t){return t!=null?I4(mN(t)):null}function rN(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function E4(t){return t._rawValidators}function T4(t){return t._rawAsyncValidators}function Yw(t){return t?Array.isArray(t)?t:[t]:[]}function Yh(t,e){return Array.isArray(t)?t.includes(e):t===e}function iN(t,e){let n=Yw(e);return Yw(t).forEach(i=>{Yh(n,i)||n.push(i)}),n}function sN(t,e){return Yw(e).filter(n=>!Yh(t,n))}var Jh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Jw=class extends Jh{get formDirective(){return null}get path(){return null}},Zc=class extends Jh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zw=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},b4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Hee=Te(L({},b4),{"[class.ng-submitted]":"isSubmitted"}),_N=(()=>{class t extends Zw{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(He(Zc,2))}}static{this.\u0275dir=Zn({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Mi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Gs]})}}return t})();var Yc="VALID",Qh="INVALID",Vo="PENDING",Jc="DISABLED";function D4(t){return(Xh(t)?t.validators:t)||null}function C4(t){return Array.isArray(t)?yN(t):t||null}function A4(t,e){return(Xh(e)?e.asyncValidators:t)||null}function S4(t){return Array.isArray(t)?vN(t):t||null}function Xh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Xw=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yc}get invalid(){return this.status===Qh}get pending(){return this.status==Vo}get disabled(){return this.status===Jc}get enabled(){return this.status!==Jc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sN(e,this._rawAsyncValidators))}hasValidator(e){return Yh(this._rawValidators,e)}hasAsyncValidator(e){return Yh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Jc,this.errors=null,this._forEachChild(r=>{r.disable(Te(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Te(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Yc,this._forEachChild(r=>{r.enable(Te(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Te(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yc||this.status===Vo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jc:Yc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vo,this._hasOwnPendingAsyncValidator=!0;let n=fN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new It,this.statusChanges=new It}_calculateStatus(){return this._allControlsDisabled()?Jc:this.errors?Qh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vo)?Vo:this._anyControlsHaveStatus(Qh)?Qh:Yc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=C4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=S4(this._rawAsyncValidators)}};var wN=new j("CallSetDisabledState",{providedIn:"root",factory:()=>eI}),eI="always";function R4(t,e){return[...e.path,t]}function M4(t,e,n=eI){x4(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),P4(t,e),O4(t,e),k4(t,e),N4(t,e)}function oN(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function N4(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function x4(t,e){let n=E4(t);e.validator!==null?t.setValidators(rN(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=T4(t);e.asyncValidator!==null?t.setAsyncValidators(rN(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();oN(e._rawValidators,i),oN(e._rawAsyncValidators,i)}function P4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&IN(t,e)})}function k4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&IN(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function IN(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function O4(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function F4(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function L4(t){return Object.getPrototypeOf(t.constructor)===f4}function V4(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Zh?n=s:L4(s)?r=s:i=s}),i||r||n||null}function aN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var U4=class extends Xw{constructor(e=null,n,r){super(D4(n),A4(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var j4={provide:Zc,useExisting:Ca(()=>tI)},uN=Promise.resolve(),tI=(()=>{class t extends Zc{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new U4,this._registered=!1,this.name="",this.update=new It,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=V4(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),F4(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){M4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){uN.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&ql(r);uN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?R4(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(He(Jw,9),He(y4,10),He(v4,10),He(dN,10),He(Br,8),He(wN,8))}}static{this.\u0275dir=Zn({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Jt.None,"disabled","isDisabled"],model:[Jt.None,"ngModel","model"],options:[Jt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[jg([j4]),Gs,Hs]})}}return t})();var B4=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Fr({type:t})}static{this.\u0275inj=Or({})}}return t})();var EN=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:wN,useValue:n.callSetDisabledState??eI}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Fr({type:t})}static{this.\u0275inj=Or({imports:[B4]})}}return t})();function H4(t,e){if(t&1&&(ge(0,"div"),Ht(1),De()),t&2){let n=Vr(2).$implicit;$e(),Ur(" ",n.text," ")}}function q4(t,e){if(t&1&&(ge(0,"div",18),Ke(1,"img",22),De()),t&2){let n=Vr(2).$implicit;$e(),Ri("src",n.imageUrl,qs)}}function z4(t,e){if(t&1&&(ge(0,"div",21)(1,"div"),Ht(2),De(),ge(3,"div",19)(4,"span",20),Ht(5," \u2728 ai generated "),De()()()),t&2){let n=Vr(2).$implicit;$e(2),Ur(" ",n.response," ")}}function G4(t,e){if(t&1&&(ge(0,"div",14),Ke(1,"img",15),ge(2,"div",16)(3,"div",17),Yn(4,H4,2,1,"div")(5,q4,2,1,"div",18),ge(6,"div",19)(7,"span",20),Ht(8),De()()(),Yn(9,z4,6,1,"div",21),De()()),t&2){let n=e,r=Vr().$implicit;Mi("flex-row-reverse",n.uid===r.uid),$e(),Ri("src",r.profilePicUrl,qs)("alt",r.name),$e(),Mi("flex-row-reverse",n.uid===r.uid),$e(),Mi("bg-amber-200",n.uid===r.uid)("bg-white",n.uid!==r.uid),$e(),Ni(4,r.text&&r.text.length>0?4:-1),$e(),Ni(5,r.imageUrl&&r.imageUrl.length>0?5:-1),$e(3),Ur(" ",r.timestamp.toDate().toLocaleTimeString()," "),$e(),Ni(9,r.response&&r.response.length>0?9:-1)}}function W4(t,e){if(t&1&&(ge(0,"div")(1,"div",12),Yn(2,G4,10,14,"div",13),xa(3,"async"),De()()),t&2){let n,r=Vr();$e(2),Ni(2,(n=Pa(3,1,r.user$))?2:-1,n)}}var TN=(()=>{class t{constructor(){this.chatService=x(Lo),this.messages$=this.chatService.loadMessages(),this.user$=this.chatService.user$,this.text=""}sendTextMessage(){this.chatService.saveTextMessage(this.text),this.text=""}uploadImage(n){let r=n.target.files[0];r&&this.chatService.saveImageMessage(r)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Cn({type:t,selectors:[["app-chat-page"]],standalone:!0,features:[An],decls:15,vars:3,consts:[["fileUpload",""],[1,"min-h-screen","h-full","w-full","bg-navy-30"],[1,"w-3/4","bg-navy-10","min-h-screen","h-full","mx-auto","flex","flex-col","flex-grow","pb-56","overflow-auto"],[1,"bg-navy-10","w-full","shadow-[0_35px_60px_-15px_rgba(0,0,0,1)]","bottom-0","fixed"],[1,"flex-wrap","flex","w-5/6","mx-auto"],["type","file",1,"file-input","hidden",3,"change"],[1,"file-upload","w-16","h-16","rounded-full","bg-amber-800","my-3"],["color","primary",1,"upload-btn",3,"click"],["src","assets/add.svg","alt","Upload image",1,"w-16","h-16"],["placeholder","Write your thoughts here...",1,"w-4/5","mx-auto","h-16","rounded-3xl","my-auto","overflow-auto","text-gray-900","dark:placeholder-gray-400","p-4",3,"ngModelChange","ngModel"],[1,"w-16","h-16","rounded-full","bg-amber-800","my-3",3,"click"],["src","assets/send.svg","alt","Send message",1,"w-16","h-16"],[1,"flex","flex-col","flex-grow","p-4","gap-3"],[1,"flex","flex-nowrap","gap-4",3,"flex-row-reverse"],[1,"flex","flex-nowrap","gap-4"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"flex","flex-wrap","gap-1","text-neutral-800"],[1,"p-4","rounded-lg","max-w-xl","flex","flex-col","justify-between","gap-1"],[1,"flex","justify-center"],[1,"flex","flex-nowrap","justify-end"],[1,"text-neutral-500","text-sm"],[1,"transition-all","opacity-30","hover:opacity-100","hover:border-2","hover:border-navy-200","hover:py-6","gap-1","p-4","rounded-lg","max-w-xl","flex","flex-col","justify-between"],["alt","image",1,"max-w-[50vw]","max-h-[30vh]","rounded-md",3,"src"]],template:function(r,i){if(r&1){let s=jl();ge(0,"div",1)(1,"div",2),TD(2,W4,4,3,"div",null,ED),xa(4,"async"),De(),ge(5,"div",3)(6,"div",4)(7,"input",5,0),Xt("change",function(a){return Ti(s),bi(i.uploadImage(a))}),De(),ge(9,"div",6)(10,"button",7),Xt("click",function(){Ti(s);let a=CD(8);return bi(a.click())}),Ke(11,"img",8),De()(),ge(12,"textarea",9),Ug("ngModelChange",function(a){return Ti(s),AD(i.text,a)||(i.text=a),bi(a)}),De(),ge(13,"button",10),Xt("click",function(){return Ti(s),bi(i.sendTextMessage())}),Ke(14,"img",11),De()()()()}r&2&&($e(2),bD(Pa(4,1,i.messages$)),$e(10),Vg("ngModel",i.text))},dependencies:[Wl,EN,Zh,_N,tI]})}}return t})();var K4=()=>tN(["login"]),bN=()=>nN(["chat"]),DN=[{path:"",component:Qw,canActivate:[Kh],data:{authGuardPipe:bN}},{path:"login",component:Qw,canActivate:[Kh],data:{authGuardPipe:bN}},{path:"chat",component:TN,canActivate:[Kh],data:{authGuardPipe:K4}}];var rI=new Map,xN={activated:!1,tokenObservers:[]},Q4={initialized:!1,enabled:!1};function Ye(t){return rI.get(t)||Object.assign({},xN)}function Y4(t,e){return rI.set(t,e),rI.get(t)}function rf(){return Q4}var PN="https://content-firebaseappcheck.googleapis.com/v1",J4="exchangeRecaptchaV3Token";var Z4="exchangeDebugToken",CN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},X4=24*60*60*1e3;var iI=class{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new ir,this.pending.promise.catch(n=>{}),yield eW(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ir,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function eW(t){return new Promise(e=>{setTimeout(e,t)})}var tW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ot=new Tt("appCheck","AppCheck",tW);function AN(t=!1){var e;return t?(e=self.grecaptcha)===null||e===void 0?void 0:e.enterprise:self.grecaptcha}function aI(t){if(!Ye(t).activated)throw Ot.create("use-before-activation",{appName:t.name})}function kN(t){let e=Math.round(t/1e3),n=Math.floor(e/(3600*24)),r=Math.floor((e-n*3600*24)/3600),i=Math.floor((e-n*3600*24-r*3600)/60),s=e-n*3600*24-r*3600-i*60,o="";return n&&(o+=ef(n)+"d:"),r&&(o+=ef(r)+"h:"),o+=ef(i)+"m:"+ef(s)+"s",o}function ef(t){return t===0?"00":t>=10?t.toString():"0"+t}function cI(r,i){return y(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let _=yield o.getHeartbeatsHeader();_&&(s["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(t,a)}catch(_){throw Ot.create("fetch-network-error",{originalErrorMessage:_?.message})}if(u.status!==200)throw Ot.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(_){throw Ot.create("fetch-parse-error",{originalErrorMessage:_?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ot.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function nW(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${PN}/projects/${n}/apps/${r}:${J4}?key=${i}`,body:{recaptcha_v3_token:e}}}function ON(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${PN}/projects/${n}/apps/${r}:${Z4}?key=${i}`,body:{debug_token:e}}}var rW="firebase-app-check-database",iW=1,Xc="firebase-app-check-store",FN="debug-token",tf=null;function LN(){return tf||(tf=new Promise((t,e)=>{try{let n=indexedDB.open(rW,iW);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ot.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Xc,{keyPath:"compositeKey"})}}}catch(n){e(Ot.create("storage-open",{originalErrorMessage:n?.message}))}}),tf)}function sW(t){return UN(jN(t))}function oW(t,e){return VN(jN(t),e)}function aW(t){return VN(FN,t)}function cW(){return UN(FN)}function VN(t,e){return y(this,null,function*(){let r=(yield LN()).transaction(Xc,"readwrite"),s=r.objectStore(Xc).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Ot.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function UN(t){return y(this,null,function*(){let n=(yield LN()).transaction(Xc,"readonly"),i=n.objectStore(Xc).get(t);return new Promise((s,o)=>{i.onsuccess=a=>{let u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Ot.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})})}function jN(t){return`${t.options.appId}-${t.name}`}var eu=new Sn("@firebase/app-check");function uW(t){return y(this,null,function*(){if($r()){let e;try{e=yield sW(t)}catch(n){eu.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return e}})}function nI(t,e){return $r()?oW(t,e).catch(n=>{eu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function lW(){return y(this,null,function*(){let t;try{t=yield cW()}catch{}if(t)return t;{let e=dC();return aW(e).catch(n=>eu.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),e}})}function uI(){return rf().enabled}function lI(){return y(this,null,function*(){let t=rf();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}function dW(){let t=um(),e=rf();if(e.initialized=!0,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&t.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;e.enabled=!0;let n=new ir;e.token=n,typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(lW())}var hW={error:"UNKNOWN_ERROR"};function fW(t){return Yl.encodeString(JSON.stringify(t),!1)}function sI(t,e=!1){return y(this,null,function*(){let n=t.app;aI(n);let r=Ye(n),i=r.token,s;if(i&&!Uo(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Uo(u)?i=u:yield nI(n,void 0))}if(!e&&i&&Uo(i))return{token:i.token};let o=!1;if(uI()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cI(ON(n,yield lI()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let u=yield r.exchangeTokenPromise;return yield nI(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Ye(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?eu.warn(u.message):eu.error(u),s=u}let a;return i?s?Uo(i)?a={token:i.token,internalError:s}:a=RN(s):(a={token:i.token},r.token=i,yield nI(n,i)):a=RN(s),o&&HN(n,a),a})}function pW(t){return y(this,null,function*(){let e=t.app;aI(e);let{provider:n}=Ye(e);if(uI()){let r=yield lI(),{token:i}=yield cI(ON(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function BN(t,e,n,r){let{app:i}=t,s=Ye(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Uo(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),SN(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SN(t))}function $N(t,e){let n=Ye(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function SN(t){let{app:e}=t,n=Ye(e),r=n.tokenRefresher;r||(r=gW(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function gW(t){let{app:e}=t;return new iI(()=>y(this,null,function*(){let n=Ye(e),r;if(n.token?r=yield sI(t,!0):r=yield sI(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Ye(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},CN.RETRIAL_MIN_WAIT,CN.RETRIAL_MAX_WAIT)}function HN(t,e){let n=Ye(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uo(t){return t.expireTimeMillis-Date.now()>0}function RN(t){return{token:fW(hW),error:t}}var oI=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Ye(this.app);for(let n of e)$N(this.app,n.next);return Promise.resolve()}};function mW(t,e){return new oI(t,e)}function yW(t){return{getToken:e=>sI(t,e),getLimitedUseToken:()=>pW(t),addTokenListener:e=>BN(t,"INTERNAL",e),removeTokenListener:e=>$N(t.app,e)}}var vW="@firebase/app-check",_W="0.8.8";var wW="https://www.google.com/recaptcha/api.js";function IW(t,e){let n=new ir,r=Ye(t);r.reCAPTCHAState={initialized:n};let i=EW(t),s=AN(!1);return s?MN(t,e,s,i,n):DW(()=>{let o=AN(!1);if(!o)throw new Error("no recaptcha");MN(t,e,o,i,n)}),n.promise}function MN(t,e,n,r,i){n.ready(()=>{bW(t,e,n,r),i.resolve(n)})}function EW(t){let e=`fire_app_check_${t.name}`,n=document.createElement("div");return n.id=e,n.style.display="none",document.body.appendChild(n),e}function TW(t){return y(this,null,function*(){aI(t);let n=yield Ye(t).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{let s=Ye(t).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})})}function bW(t,e,n,r){let i=n.render(r,{sitekey:e,size:"invisible",callback:()=>{Ye(t).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ye(t).reCAPTCHAState.succeeded=!1}}),s=Ye(t);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function DW(t){let e=document.createElement("script");e.src=wW,e.onload=t,document.head.appendChild(e)}var nf=class t{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){return y(this,null,function*(){var e,n,r;AW(this._throttleData);let i=yield TW(this._app).catch(o=>{throw Ot.create("recaptcha-error")});if(!(!((e=Ye(this._app).reCAPTCHAState)===null||e===void 0)&&e.succeeded))throw Ot.create("recaptcha-error");let s;try{s=yield cI(nW(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=CW(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ot.create("throttled",{time:kN(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s})}initialize(e){this._app=e,this._heartbeatServiceProvider=bt(e,"heartbeat"),IW(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof t?this._siteKey===e._siteKey:!1}};function CW(t,e){if(t===404||t===403)return{backoffCount:1,allowRequestsAfter:Date.now()+X4,httpStatus:t};{let n=e?e.backoffCount:0,r=hC(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:t}}}function AW(t){if(t&&Date.now()-t.allowRequestsAfter<=0)throw Ot.create("throttled",{time:kN(t.allowRequestsAfter-Date.now()),httpStatus:t.httpStatus})}function qN(t=Pt(),e){t=_e(t);let n=bt(t,"app-check");if(rf().initialized||dW(),uI()&&lI().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw Ot.create("already-initialized",{appName:t.name})}let r=n.initialize({options:e});return SW(t,e.provider,e.isTokenAutoRefreshEnabled),Ye(t).isTokenAutoRefreshEnabled&&BN(r,"INTERNAL",()=>{}),r}function SW(t,e,n){let r=Y4(t,Object.assign({},xN));r.activated=!0,r.provider=e,r.cachedTokenPromise=uW(t).then(i=>(i&&Uo(i)&&(r.token=i,HN(t,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?t.automaticDataCollectionEnabled:n,r.provider.initialize(t)}var RW="app-check",NN="app-check-internal";function MW(){Qe(new Pe(RW,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return mW(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(NN).initialize()})),Qe(new Pe(NN,t=>{let e=t.getProvider("app-check").getImmediate();return yW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ue(vW,_W)}MW();var tu=class{constructor(e){return e}};var dI=new j("angularfire2.app-check-instances");function NW(t,e){let n=xn(Rm,t,e);return n&&new tu(n)}var xW=["localhost","0.0.0.0","127.0.0.1"],PW=typeof window<"u"&&xW.includes(window.location.hostname);function kW(t){return(e,n,r)=>{!Oa(r)&&(PD()||PW)&&(globalThis.FIREBASE_APPCHECK_DEBUG_TOKEN??=!0);let i=e.runOutsideAngular(()=>t(n));return new tu(i)}}var OW={provide:Nn,deps:[[new Se,dI]]},FW={provide:tu,useFactory:NW,deps:[[new Se,dI],Dt,$t]};function zN(t,...e){return ue("angularfire",qt.full,"app-check"),ht([FW,OW,{provide:dI,useFactory:kW(t),multi:!0,deps:[ce,Ue,$t,en,zt,...e]}])}var GN=ve(qN,!0);var WN={providers:[GM(DN),AC(()=>RC(Ww.firebase)),zN(()=>{let t=GN(SC(),{provider:new nf(Ww.reCAPTCHAV3Key.key),isTokenAutoRefreshEnabled:!0});return(location.hostname==="localhost"||location.hostname.endsWith(".local"))&&(self.FIREBASE_APPCHECK_DEBUG_TOKEN=!0),t}),I0(()=>E0()),CS(()=>MS()),nM(()=>rM()),gR(()=>yR())]};ZD(eN,WN).catch(t=>console.error(t));
